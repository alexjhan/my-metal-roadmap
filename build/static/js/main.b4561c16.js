/*! For license information please see main.b4561c16.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:d,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function x(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var b=y.prototype=new x;b.constructor=y,f(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,j={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var o,a={},i=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)k.call(t,o)&&!S.hasOwnProperty(o)&&(a[o]=t[o]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:n,type:e,key:i,ref:s,props:a,_owner:j.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,o,a,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+E(l,0):a,w(i)?(o="",null!=e&&(o=e.replace(_,"$&/")+"/"),P(i,t,o,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+E(s=e[c],c);l+=P(s,t,o,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(s=e.next()).done;)l+=P(s=s.value,t,o,d=a+E(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],o=0;return P(e,r,"","",function(e){return t.call(n,e,o++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},L={transition:null},A={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:L,ReactCurrentOwner:j};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=f({},e.props),a=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=j.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(829)),a=r(n(736));class i{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new o.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:r=!1,count:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let s;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(s=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?`{${n.join(",")}}`:`${n}`]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(s="POST",c=t);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new a.default({method:s,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,d=e[c];if(0>a(l,n))c<o&&0>a(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)o(d);else{if(!(t.startTime<=e))break;o(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,b(e),!f)if(null!==r(c))f=!0,L(k);else{var t=r(d);null!==t&&A(w,t.startTime-e)}}function k(e,n){f=!1,g&&(g=!1,x(C),C=-1),m=!0;var a=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var s=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&o(c),b(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&A(w,u.startTime-n),l=!1}return l}finally{h=null,p=a,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,S=!1,N=null,C=-1,_=5,E=-1;function P(){return!(t.unstable_now()-E<_)}function T(){if(null!==N){var e=t.unstable_now();E=e;var n=!0;try{n=N(!0,e)}finally{n?j():(S=!1,N=null)}}else S=!1}if("function"===typeof y)j=function(){y(T)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,R=M.port2;M.port1.onmessage=T,j=function(){R.postMessage(null)}}else j=function(){v(T,0)};function L(e){N=e,S||(S=!0,j())}function A(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,L(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:u++,callback:o,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>i?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(g?(x(C),C=-1):g=!0,A(w,a-i))):(e.sortIndex=s,n(c,e),f||m||(f=!0,L(k))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},286:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(630)),a=r(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=o.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,o;let i=null,s=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(s="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const o=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),a=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");o&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,c=406,d="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(o=null===i||void 0===i?void 0:i.details)||void 0===o?void 0:o.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new a.default(i)}return{error:i,data:s,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},330:(e,t,n)=>{var r=n(43);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,i=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(r){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,d=r[1];return s(function(){o.value=n,o.getSnapshot=t,c(o)&&d({inst:o})},[e,n,t]),i(function(){return c(o)&&d({inst:o}),e(function(){c(o)&&d({inst:o})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function d(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},374:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(286));class a extends o.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:o=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=o?`${o}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o="undefined"===typeof r?"offset":`${r}.offset`,a="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:o=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${s};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}t.default=a},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},443:(e,t,n)=>{e.exports=n(717)},461:(e,t,n)=>{e.exports=n(330)},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>i,Request:()=>s,Response:()=>l,default:()=>a,fetch:()=>o});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const o=r.fetch,a=r.fetch.bind(r),i=r.Headers,s=r.Request,l=r.Response},717:(e,t,n)=>{var r=n(43),o=n(461);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=o.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var u=s(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=c(function(){function e(e){if(!l){if(l=!0,i=e,e=r(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return s=t}return s=e}if(t=s,a(i,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(i=e,t):(i=e,s=n)}var i,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,o]);var p=i(e,u[0],u[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),d(p),p}},730:(e,t,n)=>{var r=n(43),o=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,o,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function y(e,t,n,r){var o=g.hasOwnProperty(t)?g[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var z,I=Object.assign;function $(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var D=!1;function B(e,t){if(!e||D)return"";D=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),a=r.stack.split("\n"),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(1!==i||1!==s)do{if(i--,0>--s||o[i]!==a[s]){var l="\n"+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{D=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$(e):""}function F(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case k:return"Portal";case N:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ae(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,je=null,Se=null;function Ne(e){if(e=bo(e)){if("function"!==typeof ke)throw Error(a(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Ce(e){je?Se?Se.push(e):Se=[e]:je=e}function _e(){if(je){var e=je,t=Se;if(Se=je=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Te=!1;function Me(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ee(e,t,n)}finally{Te=!1,(null!==je||null!==Se)&&(Pe(),_e())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Le=!1;if(d)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(de){Le=!1}function Oe(e,t,n,r,o,a,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var ze=!1,Ie=null,$e=!1,De=null,Be={onError:function(e){ze=!0,Ie=e}};function Fe(e,t,n,r,o,a,i,s,l){ze=!1,Ie=null,Oe.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(He(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return qe(o),e;if(i===r)return qe(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ye=o.unstable_scheduleCallback,Ke=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Ge=o.unstable_requestPaint,Je=o.unstable_now,Ze=o.unstable_getCurrentPriorityLevel,Qe=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~o;0!==s?r=ut(s):0!==(a&=i)&&(r=ut(a))}else 0!==(i=n&~o)?r=ut(i):0!==a&&(r=ut(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||16===o&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-it(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,jt,St,Nt,Ct=!1,_t=[],Et=null,Pt=null,Tt=null,Mt=new Map,Rt=new Map,Lt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function zt(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function It(e){var t=yo(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void Nt(e.priority,function(){jt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Dt(e,t,n){$t(e)&&n.delete(t)}function Bt(){Ct=!1,null!==Et&&$t(Et)&&(Et=null),null!==Pt&&$t(Pt)&&(Pt=null),null!==Tt&&$t(Tt)&&(Tt=null),Mt.forEach(Dt),Rt.forEach(Dt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return Ft(t,e)}if(0<_t.length){Ft(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Ft(Et,e),null!==Pt&&Ft(Pt,e),null!==Tt&&Ft(Tt,e),Mt.forEach(t),Rt.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)It(n),null===n.blockedOn&&Lt.shift()}var Ut=b.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,r){var o=yt,a=Ut.transition;Ut.transition=null;try{yt=1,Yt(e,t,n,r)}finally{yt=o,Ut.transition=a}}function Vt(e,t,n,r){var o=yt,a=Ut.transition;Ut.transition=null;try{yt=4,Yt(e,t,n,r)}finally{yt=o,Ut.transition=a}}function Yt(e,t,n,r){if(qt){var o=Xt(e,t,n,r);if(null===o)qr(e,t,r,Kt,n),Ot(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Et=zt(Et,e,t,n,r,o),!0;case"dragenter":return Pt=zt(Pt,e,t,n,r,o),!0;case"mouseover":return Tt=zt(Tt,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Mt.set(a,zt(Mt.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Rt.set(a,zt(Rt.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<At.indexOf(e)){for(;null!==o;){var a=bo(o);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&qr(e,t,r,Kt,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Kt=null;function Xt(e,t,n,r){if(Kt=null,null!==(e=yo(e=we(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Zt,r=n.length,o="value"in Jt?Jt.value:Jt.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return Qt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(cn),un=I({},cn,{view:0,detail:0}),hn=on(un),pn=I({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),mn=on(pn),fn=on(I({},pn,{dataTransfer:0})),gn=on(I({},un,{relatedTarget:0})),vn=on(I({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=I({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(xn),bn=on(I({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function Nn(){return Sn}var Cn=I({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=on(Cn),En=on(I({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(I({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Tn=on(I({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=I({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Mn),Ln=[9,13,27,32],An=d&&"CompositionEvent"in window,On=null;d&&"documentMode"in document&&(On=document.documentMode);var zn=d&&"TextEvent"in window&&!On,In=d&&(!An||On&&8<On&&11>=On),$n=String.fromCharCode(32),Dn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Vr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Yn=null;function Kn(e){$r(e,0)}function Xn(e){if(Y(wo(e)))return e}function Gn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Zn;if(d){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Zn=Qn}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Yn=Vn=null)}function nr(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];Wn(t,Yn,e,we(e)),Me(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function ar(e,t){if("click"===e)return Xn(t)}function ir(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!u.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=void 0===r.end?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=dr(n,a);var i=dr(n,r);o&&i&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,xr=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=Vr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},jr={},Sr={};function Nr(e){if(jr[e])return jr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return jr[e]=n[t];return e}d&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=Nr("animationend"),_r=Nr("animationiteration"),Er=Nr("animationstart"),Pr=Nr("transitionend"),Tr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Tr.set(e,t),l(t,[e])}for(var Lr=0;Lr<Mr.length;Lr++){var Ar=Mr[Lr];Rr(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(_r,"onAnimationIteration"),Rr(Er,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,s,l,c){if(Fe.apply(this,arguments),ze){if(!ze)throw Error(a(198));var d=Ie;ze=!1,Ie=null,$e||($e=!0,De=d)}}(r,t,void 0,e),e.currentTarget=null}function $r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&o.isPropagationStopped())break e;Ir(o,s,c),a=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==a&&o.isPropagationStopped())break e;Ir(o,s,c),a=l}}}if($e)throw e=De,$e=!1,De=null,e}function Dr(e,t){var n=t[go];void 0===n&&(n=t[go]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Fr]){e[Fr]=!0,i.forEach(function(t){"selectionchange"!==t&&(zr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Br("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Gt(t)){case 1:var o=Wt;break;case 4:o=Vt;break;default:o=Yt}n=o.bind(null,t,n,e),o=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,o){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;i=i.return}for(;null!==s;){if(null===(i=yo(s)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}s=s.parentNode}}r=r.return}Me(function(){var r=a,o=we(n),i=[];e:{var s=Tr.get(e);if(void 0!==s){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Cr:case _r:case Er:l=vn;break;case Pr:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==s?s+"Capture":null:s;d=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Re(m,h))&&d.push(Wr(m,f,p)))),u)break;m=m.return}0<d.length&&(s=new l(s,c,null,n,o),i.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yo(c)&&!c[fo])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yo(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=En,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?s:wo(l),p=null==c?s:wo(c),(s=new d(f,m+"leave",l,n,o)).target=u,s.relatedTarget=p,f=null,yo(o)===r&&((d=new d(h,m+"enter",c,n,o)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Yr(p))m++;for(p=0,f=h;f;f=Yr(f))p++;for(;0<m-p;)d=Yr(d),m--;for(;0<p-m;)h=Yr(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Yr(d),h=Yr(h)}d=null}else d=null;null!==l&&Kr(i,s,l,d,!1),null!==c&&null!==u&&Kr(i,u,c,d,!0)}if("select"===(l=(s=r?wo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Gn;else if(qn(s))if(Jn)g=ir;else{g=or;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(i,g,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wo(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,xr=null);break;case"focusout":xr=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(i,n,o);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(i,n,o)}var x;if(An)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(In&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hn&&(x=en()):(Zt="value"in(Jt=o)?Jt.value:Jt.textContent,Hn=!0)),0<(v=Vr(r,y)).length&&(y=new bn(y,e,null,n,o),i.push({event:y,listeners:v}),x?y.data=x:null!==(x=Fn(n))&&(y.data=x))),(x=zn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Dn=!0,$n);case"textInput":return(e=t.data)===$n&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!An&&Bn(e,t)?(e=en(),Qt=Zt=Jt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),i.push({event:o,listeners:r}),o.data=x))}$r(i,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;5===o.tag&&null!==a&&(o=a,null!=(a=Re(e,n))&&r.unshift(Wr(e,a,o)),null!=(a=Re(e,t))&&r.push(Wr(e,a,o))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Re(n,a))&&i.unshift(Wr(n,l,s)):o||null!=(l=Re(n,a))&&i.push(Wr(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Xr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Gr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Qr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,ao="function"===typeof Promise?Promise:void 0,io="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ao?function(e){return ao.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Ht(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,mo="__reactProps$"+ho,fo="__reactContainer$"+ho,go="__reactEvents$"+ho,vo="__reactListeners$"+ho,xo="__reactHandles$"+ho;function yo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[po])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[po]||e[fo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ko(e){return e[mo]||null}var jo=[],So=-1;function No(e){return{current:e}}function Co(e){0>So||(e.current=jo[So],jo[So]=null,So--)}function _o(e,t){So++,jo[So]=e.current,e.current=t}var Eo={},Po=No(Eo),To=No(!1),Mo=Eo;function Ro(e,t){var n=e.type.contextTypes;if(!n)return Eo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in n)a[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ao(){Co(To),Co(Po)}function Oo(e,t,n){if(Po.current!==Eo)throw Error(a(168));_o(Po,t),_o(To,n)}function zo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,U(e)||"Unknown",o));return I({},n,r)}function Io(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,Mo=Po.current,_o(Po,e),_o(To,To.current),!0}function $o(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=zo(e,t,Mo),r.__reactInternalMemoizedMergedChildContext=e,Co(To),Co(Po),_o(Po,e)):Co(To),_o(To,n)}var Do=null,Bo=!1,Fo=!1;function Ho(e){null===Do?Do=[e]:Do.push(e)}function Uo(){if(!Fo&&null!==Do){Fo=!0;var e=0,t=yt;try{var n=Do;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Do=null,Bo=!1}catch(o){throw null!==Do&&(Do=Do.slice(e+1)),Ye(Qe,Uo),o}finally{yt=t,Fo=!1}}return null}var qo=[],Wo=0,Vo=null,Yo=0,Ko=[],Xo=0,Go=null,Jo=1,Zo="";function Qo(e,t){qo[Wo++]=Yo,qo[Wo++]=Vo,Vo=e,Yo=t}function ea(e,t,n){Ko[Xo++]=Jo,Ko[Xo++]=Zo,Ko[Xo++]=Go,Go=e;var r=Jo;e=Zo;var o=32-it(r)-1;r&=~(1<<o),n+=1;var a=32-it(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Jo=1<<32-it(t)+o|n<<o|r,Zo=a+e}else Jo=1<<a|n<<o|r,Zo=e}function ta(e){null!==e.return&&(Qo(e,1),ea(e,1,0))}function na(e){for(;e===Vo;)Vo=qo[--Wo],qo[Wo]=null,Yo=qo[--Wo],qo[Wo]=null;for(;e===Go;)Go=Ko[--Xo],Ko[Xo]=null,Zo=Ko[--Xo],Ko[Xo]=null,Jo=Ko[--Xo],Ko[Xo]=null}var ra=null,oa=null,aa=!1,ia=null;function sa(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function la(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,oa=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,oa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Go?{id:Jo,overflow:Zo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ra=e,oa=null,!0);default:return!1}}function ca(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function da(e){if(aa){var t=oa;if(t){var n=t;if(!la(e,t)){if(ca(e))throw Error(a(418));t=co(n.nextSibling);var r=ra;t&&la(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,aa=!1,ra=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,aa=!1,ra=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ha(e){if(e!==ra)return!1;if(!aa)return ua(e),aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oa)){if(ca(e))throw pa(),Error(a(418));for(;t;)sa(e,t),t=co(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oa=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oa=null}}else oa=ra?co(e.stateNode.nextSibling):null;return!0}function pa(){for(var e=oa;e;)e=co(e.nextSibling)}function ma(){oa=ra=null,aa=!1}function fa(e){null===ia?ia=[e]:ia.push(e)}var ga=b.ReactCurrentBatchConfig;function va(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ic(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===j?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&ya(a)===t.type)?((r=o(t,n.props)).ref=va(e,t,n),r.return=e,r):((r=Ac(n.type,n.key,n.props,null,e.mode,r)).ref=va(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$c(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ac(t.type,t.key,t.props,null,e.mode,n)).ref=va(e,null,t),n.return=e,n;case k:return(t=$c(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case k:return n.key===o?d(e,t,n,r):null;case R:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||O(n))return null!==o?null:u(e,t,n,r,null);xa(e,n)}return null}function m(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return d(t,e=e.get(null===r.key?n:r.key)||null,r,o);case R:return m(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||O(r))return u(t,e=e.get(n)||null,r,o,null);xa(t,r)}return null}function f(o,a,s,l){for(var c=null,d=null,u=a,f=a=0,g=null;null!==u&&f<s.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=p(o,u,s[f],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(o,u),a=i(v,a,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===s.length)return n(o,u),aa&&Qo(o,f),c;if(null===u){for(;f<s.length;f++)null!==(u=h(o,s[f],l))&&(a=i(u,a,f),null===d?c=u:d.sibling=u,d=u);return aa&&Qo(o,f),c}for(u=r(o,u);f<s.length;f++)null!==(g=m(u,o,f,s[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),a=i(g,a,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(o,e)}),aa&&Qo(o,f),c}function g(o,s,l,c){var d=O(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,f=s,g=s=0,v=null,x=l.next();null!==f&&!x.done;g++,x=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var y=p(o,f,x.value,c);if(null===y){null===f&&(f=v);break}e&&f&&null===y.alternate&&t(o,f),s=i(y,s,g),null===u?d=y:u.sibling=y,u=y,f=v}if(x.done)return n(o,f),aa&&Qo(o,g),d;if(null===f){for(;!x.done;g++,x=l.next())null!==(x=h(o,x.value,c))&&(s=i(x,s,g),null===u?d=x:u.sibling=x,u=x);return aa&&Qo(o,g),d}for(f=r(o,f);!x.done;g++,x=l.next())null!==(x=m(f,o,g,x.value,c))&&(e&&null!==x.alternate&&f.delete(null===x.key?g:x.key),s=i(x,s,g),null===u?d=x:u.sibling=x,u=x);return e&&f.forEach(function(e){return t(o,e)}),aa&&Qo(o,g),d}return function e(r,a,i,l){if("object"===typeof i&&null!==i&&i.type===j&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===j){if(7===d.tag){n(r,d.sibling),(a=o(d,i.props.children)).return=r,r=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ya(c)===d.type){n(r,d.sibling),(a=o(d,i.props)).ref=va(r,d,i),a.return=r,r=a;break e}n(r,d);break}t(r,d),d=d.sibling}i.type===j?((a=Oc(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Ac(i.type,i.key,i.props,null,r.mode,l)).ref=va(r,a,i),l.return=r,r=l)}return s(r);case k:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=o(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=$c(i,r.mode,l)).return=r,r=a}return s(r);case R:return e(r,a,(d=i._init)(i._payload),l)}if(te(i))return f(r,a,i,l);if(O(i))return g(r,a,i,l);xa(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=o(a,i)).return=r,r=a):(n(r,a),(a=Ic(i,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var wa=ba(!0),ka=ba(!1),ja=No(null),Sa=null,Na=null,Ca=null;function _a(){Ca=Na=Sa=null}function Ea(e){var t=ja.current;Co(ja),e._currentValue=t}function Pa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){Sa=e,Ca=Na=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ys=!0),e.firstContext=null)}function Ma(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===Na){if(null===Sa)throw Error(a(308));Na=e,Sa.dependencies={lanes:0,firstContext:e}}else Na=Na.next=e;return t}var Ra=null;function La(e){null===Ra?Ra=[e]:Ra.push(e)}function Aa(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,La(t)):(n.next=o.next,o.next=n),t.interleaved=n,Oa(e,r)}function Oa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var za=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $a(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Oa(e,n)}return null===(o=r.interleaved)?(t.next=t,La(r)):(t.next=o.next,o.next=t),r.interleaved=t,Oa(e,n)}function Fa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var o=e.updateQueue;za=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=o.baseState;for(i=0,d=c=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,f=s;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=I({},u,h);break e;case 2:za=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,i|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===d&&(l=u),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=d,null!==(t=o.shared.interleaved)){o=t;do{i|=o.lane,o=o.next}while(o!==t)}else null===a&&(o.shared.lanes=0);zl|=i,e.lanes=i,e.memoizedState=u}}function qa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(a(191,o));o.call(r)}}}var Wa={},Va=No(Wa),Ya=No(Wa),Ka=No(Wa);function Xa(e){if(e===Wa)throw Error(a(174));return e}function Ga(e,t){switch(_o(Ka,t),_o(Ya,e),_o(Va,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co(Va),_o(Va,t)}function Ja(){Co(Va),Co(Ya),Co(Ka)}function Za(e){Xa(Ka.current);var t=Xa(Va.current),n=le(t,e.type);t!==n&&(_o(Ya,e),_o(Va,n))}function Qa(e){Ya.current===e&&(Co(Va),Co(Ya))}var ei=No(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var oi=b.ReactCurrentDispatcher,ai=b.ReactCurrentBatchConfig,ii=0,si=null,li=null,ci=null,di=!1,ui=!1,hi=0,pi=0;function mi(){throw Error(a(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,o,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oi.current=null===e||null===e.memoizedState?Qi:es,e=n(r,o),ui){i=0;do{if(ui=!1,hi=0,25<=i)throw Error(a(301));i+=1,ci=li=null,t.updateQueue=null,oi.current=ts,e=n(r,o)}while(ui)}if(oi.current=Zi,t=null!==li&&null!==li.next,ii=0,ci=li=si=null,di=!1,t)throw Error(a(300));return e}function vi(){var e=0!==hi;return hi=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?si.memoizedState=ci=e:ci=ci.next=e,ci}function yi(){if(null===li){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?si.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(a(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?si.memoizedState=ci=e:ci=ci.next=e}return ci}function bi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=yi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=li,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var l=s=null,c=null,d=i;do{var u=d.lane;if((ii&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,si.lanes|=u,zl|=u}d=d.next}while(null!==d&&d!==i);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(ys=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{i=o.lane,si.lanes|=i,zl|=i,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ki(e){var t=yi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);sr(i,t.memoizedState)||(ys=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ji(){}function Si(e,t){var n=si,r=yi(),o=t(),i=!sr(r.memoizedState,o);if(i&&(r.memoizedState=o,ys=!0),r=r.queue,zi(_i.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,Mi(9,Ci.bind(null,n,r,o,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&ii)||Ni(n,t,o)}return o}function Ni(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ci(e,t,n,r){t.value=n,t.getSnapshot=r,Ei(t)&&Pi(e)}function _i(e,t,n){return n(function(){Ei(t)&&Pi(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Pi(e){var t=Oa(e,1);null!==t&&nc(t,e,1,-1)}function Ti(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,si,e),[t.memoizedState,e]}function Mi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ri(){return yi().memoizedState}function Li(e,t,n,r){var o=xi();si.flags|=e,o.memoizedState=Mi(1|t,n,void 0,void 0===r?null:r)}function Ai(e,t,n,r){var o=yi();r=void 0===r?null:r;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==r&&fi(r,i.deps))return void(o.memoizedState=Mi(t,n,a,r))}si.flags|=e,o.memoizedState=Mi(1|t,n,a,r)}function Oi(e,t){return Li(8390656,8,e,t)}function zi(e,t){return Ai(2048,8,e,t)}function Ii(e,t){return Ai(4,2,e,t)}function $i(e,t){return Ai(4,4,e,t)}function Di(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ai(4,4,Di.bind(null,t,e),n)}function Fi(){}function Hi(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ui(e,t){var n=yi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=n):(sr(n,t)||(n=ft(),si.lanes|=n,zl|=n,e.baseState=!0),t)}function Wi(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ai.transition;ai.transition={};try{e(!1),t()}finally{yt=n,ai.transition=r}}function Vi(){return yi().memoizedState}function Yi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xi(e))Gi(t,n);else if(null!==(n=Aa(e,t,n,r))){nc(n,e,r,ec()),Ji(n,t,r)}}function Ki(e,t,n){var r=tc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xi(e))Gi(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,i)){var l=t.interleaved;return null===l?(o.next=o,La(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Aa(e,t,o,r))&&(nc(n,e,r,o=ec()),Ji(n,t,r))}}function Xi(e){var t=e.alternate;return e===si||null!==t&&t===si}function Gi(e,t){ui=di=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ji(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Zi={readContext:Ma,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Qi={readContext:Ma,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Oi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Li(4194308,4,Di.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){return Li(4,2,e,t)},useMemo:function(e,t){var n=xi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yi.bind(null,si,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Ti,useDebugValue:Fi,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Ti(!1),t=e[0];return e=Wi.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=si,o=xi();if(aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&ii)||Ni(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Oi(_i.bind(null,r,i,e),[e]),r.flags|=2048,Mi(9,Ci.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=xi(),t=Pl.identifierPrefix;if(aa){var n=Zo;t=":"+t+"R"+(n=(Jo&~(1<<32-it(Jo)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ma,useCallback:Hi,useContext:Ma,useEffect:zi,useImperativeHandle:Bi,useInsertionEffect:Ii,useLayoutEffect:$i,useMemo:Ui,useReducer:wi,useRef:Ri,useState:function(){return wi(bi)},useDebugValue:Fi,useDeferredValue:function(e){return qi(yi(),li.memoizedState,e)},useTransition:function(){return[wi(bi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Si,useId:Vi,unstable_isNewReconciler:!1},ts={readContext:Ma,useCallback:Hi,useContext:Ma,useEffect:zi,useImperativeHandle:Bi,useInsertionEffect:Ii,useLayoutEffect:$i,useMemo:Ui,useReducer:ki,useRef:Ri,useState:function(){return ki(bi)},useDebugValue:Fi,useDeferredValue:function(e){var t=yi();return null===li?t.memoizedState=e:qi(t,li.memoizedState,e)},useTransition:function(){return[ki(bi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Si,useId:Vi,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=Da(r,o);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,o))&&(nc(t,e,o,r),Fa(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),o=tc(e),a=Da(r,o);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ba(e,a,o))&&(nc(t,e,o,r),Fa(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),o=Da(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Ba(e,o,r))&&(nc(t,e,r,n),Fa(t,e,r))}};function as(e,t,n,r,o,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,a))}function is(e,t,n){var r=!1,o=Eo,a=t.contextType;return"object"===typeof a&&null!==a?a=Ma(a):(o=Lo(t)?Mo:Po.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ro(e,o):Eo),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ia(e);var a=t.contextType;"object"===typeof a&&null!==a?o.context=Ma(a):(a=Lo(t)?Mo:Po.current,o.context=Ro(e,a)),o.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Ua(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=F(r),r=r.return}while(r);var o=n}catch(a){o="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:o,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function us(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Wl=r),us(0,t)},n}function ms(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){us(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){us(0,t),"function"!==typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Ba(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var xs=b.ReactCurrentOwner,ys=!1;function bs(e,t,n,r){t.child=null===e?ka(t,null,n,r):wa(t,e.child,n,r)}function ws(e,t,n,r,o){n=n.render;var a=t.ref;return Ta(t,o),r=gi(e,t,n,r,a,o),n=vi(),null===e||ys?(aa&&n&&ta(t),t.flags|=1,bs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qs(e,t,o))}function ks(e,t,n,r,o){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ac(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,js(e,t,a,r,o))}if(a=e.child,0===(e.lanes&o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return qs(e,t,o)}return t.flags|=1,(e=Lc(a,r)).ref=t.ref,e.return=t,t.child=e}function js(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(ys=!1,t.pendingProps=r=a,0===(e.lanes&o))return t.lanes=e.lanes,qs(e,t,o);0!==(131072&e.flags)&&(ys=!0)}}return Cs(e,t,n,r,o)}function Ss(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_o(Ll,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_o(Ll,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,_o(Ll,Rl),Rl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_o(Ll,Rl),Rl|=r;return bs(e,t,o,n),t.child}function Ns(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,o){var a=Lo(n)?Mo:Po.current;return a=Ro(t,a),Ta(t,o),n=gi(e,t,n,r,a,o),r=vi(),null===e||ys?(aa&&r&&ta(t),t.flags|=1,bs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,qs(e,t,o))}function _s(e,t,n,r,o){if(Lo(n)){var a=!0;Io(t)}else a=!1;if(Ta(t,o),null===t.stateNode)Us(e,t),is(t,n,r),ls(t,n,r,o),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ma(c):c=Ro(t,c=Lo(n)?Mo:Po.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,i,r,c),za=!1;var h=t.memoizedState;i.state=h,Ua(t,r,i,o),l=t.memoizedState,s!==r||h!==l||To.current||za?("function"===typeof d&&(rs(t,n,d,r),l=t.memoizedState),(s=za||as(t,n,s,r,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,$a(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ma(l):l=Ro(t,l=Lo(n)?Mo:Po.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==u||h!==l)&&ss(t,i,r,l),za=!1,h=t.memoizedState,i.state=h,Ua(t,r,i,o);var m=t.memoizedState;s!==u||h!==m||To.current||za?("function"===typeof p&&(rs(t,n,p,r),m=t.memoizedState),(c=za||as(t,n,c,r,h,m,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Es(e,t,n,r,a,o)}function Es(e,t,n,r,o,a){Ns(e,t);var i=0!==(128&t.flags);if(!r&&!i)return o&&$o(t,n,!1),qs(e,t,a);r=t.stateNode,xs.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,o&&$o(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Oo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oo(0,t.context,!1),Ga(e,t.containerInfo)}function Ts(e,t,n,r,o){return ma(),fa(o),t.flags|=256,bs(e,t,n,r),t.child}var Ms,Rs,Ls,As,Os={dehydrated:null,treeContext:null,retryLane:0};function zs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Is(e,t,n){var r,o=t.pendingProps,i=ei.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),_o(ei,1&i),null===e)return da(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=zc(l,o,0,null),e=Oc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=zs(n),t.memoizedState=Os,e):$s(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,s){if(n)return 256&t.flags?(t.flags&=-257,Ds(e,t,s,r=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=zc({mode:"visible",children:r.children},o,0,null),(i=Oc(i,o,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wa(t,e.child,null,s),t.child.memoizedState=zs(s),t.memoizedState=Os,i);if(0===(1&t.mode))return Ds(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Ds(e,t,s,r=ds(i=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),ys||l){if(null!==(r=Pl)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==i.retryLane&&(i.retryLane=o,Oa(e,o),nc(r,e,o,-1))}return fc(),Ds(e,t,s,r=ds(Error(a(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,oa=co(o.nextSibling),ra=t,aa=!0,ia=null,null!==e&&(Ko[Xo++]=Jo,Ko[Xo++]=Zo,Ko[Xo++]=Go,Jo=e.id,Zo=e.overflow,Go=t),t=$s(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,i,n);if(s){s=o.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Lc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Lc(r,s):(s=Oc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?zs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Os,o}return e=(s=e.child).sibling,o=Lc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function $s(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ds(e,t,n,r){return null!==r&&fa(r),wa(t,e.child,null,n),(e=$s(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Pa(e.return,t,n)}function Fs(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function Hs(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_o(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Fs(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ti(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Fs(t,!0,n,null,a);break;case"together":Fs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ys(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(t),null;case 1:case 17:return Lo(t.type)&&Ao(),Vs(t),null;case 3:return r=t.stateNode,Ja(),Co(To),Co(Po),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ia&&(ic(ia),ia=null))),Rs(e,t),Vs(t),null;case 5:Qa(t);var o=Xa(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)Ls(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Vs(t),null}if(e=Xa(Va.current),ha(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[po]=t,r[mo]=i,e=0!==(1&t.mode),n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(o=0;o<Or.length;o++)Dr(Or[o],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":G(r,i),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Dr("invalid",r);break;case"textarea":oe(r,i),Dr("invalid",r)}for(var l in xe(n,i),o=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Dr("scroll",r)}switch(n){case"input":V(r),Q(r,i,!0);break;case"textarea":V(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Qr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[po]=t,e[mo]=r,Ms(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Dr("cancel",e),Dr("close",e),o=r;break;case"iframe":case"object":case"embed":Dr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Or.length;o++)Dr(Or[o],e);o=r;break;case"source":Dr("error",e),o=r;break;case"img":case"image":case"link":Dr("error",e),Dr("load",e),o=r;break;case"details":Dr("toggle",e),o=r;break;case"input":G(e,r),o=X(e,r),Dr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=I({},r,{value:void 0}),Dr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Dr("invalid",e)}for(i in xe(n,o),c=o)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Dr("scroll",e):null!=d&&y(e,i,d,l))}switch(n){case"input":V(e),Q(e,r,!1);break;case"textarea":V(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vs(t),null;case 6:if(e&&null!=t.stateNode)As(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Xa(Ka.current),Xa(Va.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(i=r.nodeValue!==n)&&null!==(e=ra))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Vs(t),null;case 13:if(Co(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(aa&&null!==oa&&0!==(1&t.mode)&&0===(128&t.flags))pa(),ma(),t.flags|=98560,i=!1;else if(i=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[po]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vs(t),i=!1}else null!==ia&&(ic(ia),ia=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Al&&(Al=3):fc())),null!==t.updateQueue&&(t.flags|=4),Vs(t),null);case 4:return Ja(),Rs(e,t),null===e&&Hr(t.stateNode.containerInfo),Vs(t),null;case 10:return Ea(t.type._context),Vs(t),null;case 19:if(Co(ei),null===(i=t.memoizedState))return Vs(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Ws(i,!1);else{if(0!==Al||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Ws(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _o(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Hl&&(t.flags|=128,r=!0,Ws(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!aa)return Vs(t),null}else 2*Je()-i.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Ws(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=ei.current,_o(ei,r?1&n|2:1&n),t):(Vs(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Vs(t),6&t.subtreeFlags&&(t.flags|=8192)):Vs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ks(e,t){switch(na(t),t.tag){case 1:return Lo(t.type)&&Ao(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),Co(To),Co(Po),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qa(t),null;case 13:if(Co(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(ei),null;case 4:return Ja(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ms=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},Ls=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Xa(Va.current);var a,i=null;switch(n){case"input":o=X(e,o),r=X(e,r),i=[];break;case"select":o=I({},o,{value:void 0}),r=I({},r,{value:void 0}),i=[];break;case"textarea":o=re(e,o),r=re(e,r),i=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(d in xe(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var l=o[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(s.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(s.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Dr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},As=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Gs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function Qs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,void 0!==a&&el(t,n,a)}o=o.next}while(o!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[mo],delete t[go],delete t[vo],delete t[xo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Gs||Qs(n,t);case 6:var r=dl,o=ul;dl=null,hl(e,t,n),ul=o,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Ht(e)):lo(dl,n.stateNode));break;case 4:r=dl,o=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=o;break;case 0:case 11:case 14:case 15:if(!Gs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(n,t,i),o=o.next}while(o!==r)}hl(e,t,n);break;case 1:if(!Gs&&(Qs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Gs=(r=Gs)||null!==n.memoizedState,hl(e,t,n),Gs=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach(function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));pl(i,s,o),dl=null,ul=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(d){Sc(o,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(fl(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(o,i),ye(l,s);var d=ye(l,i);for(s=0;s<c.length;s+=2){var u=c[s],h=c[s+1];"style"===u?ge(o,h):"dangerouslySetInnerHTML"===u?ue(o,h):"children"===u?he(o,h):y(o,u,h,d)}switch(l){case"input":Z(o,i);break;case"textarea":ae(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(o,!!i.multiple,m,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(o,!!i.multiple,i.defaultValue,!0):ne(o,!!i.multiple,i.multiple?[]:"",!1))}o[mo]=i}catch(g){Sc(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(g){Sc(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,!i||null!==o.alternate&&null!==o.alternate.memoizedState||(Fl=Je())),4&r&&ml(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Gs=(d=Gs)||u,fl(t,e),Gs=d):fl(t,e),vl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Zs=e,u=e.child;null!==u;){for(h=Zs=u;null!==Zs;){switch(m=(p=Zs).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Qs(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Qs(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==m?(m.return=p,Zs=m):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{o=h.stateNode,d?"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",s))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),cl(e,sl(e),o);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,sl(e),i);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Zs=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var o=Zs,a=o.child;if(22===o.tag&&r){var i=null!==o.memoizedState||Xs;if(!i){var s=o.alternate,l=null!==s&&null!==s.memoizedState||Gs;s=Xs;var c=Gs;if(Xs=i,(Gs=l)&&!c)for(Zs=o;null!==Zs;)l=(i=Zs).child,22===i.tag&&null!==i.memoizedState?kl(o):null!==l?(l.return=i,Zs=l):kl(o);for(;null!==a;)Zs=a,yl(a,t,n),a=a.sibling;Zs=o,Xs=s,Gs=c}bl(e)}else 0!==(8772&o.subtreeFlags)&&null!==a?(a.return=o,Zs=a):bl(e)}}function bl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Gs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&qa(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qa(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}Gs||512&t.flags&&ol(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function wl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function kl(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){Sc(t,o,l)}}var a=t.return;try{ol(t)}catch(l){Sc(t,a,l)}break;case 5:var i=t.return;try{ol(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var jl,Sl=Math.ceil,Nl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,_l=b.ReactCurrentBatchConfig,El=0,Pl=null,Tl=null,Ml=0,Rl=0,Ll=No(0),Al=0,Ol=null,zl=0,Il=0,$l=0,Dl=null,Bl=null,Fl=0,Hl=1/0,Ul=null,ql=!1,Wl=null,Vl=null,Yl=!1,Kl=null,Xl=0,Gl=0,Jl=null,Zl=-1,Ql=0;function ec(){return 0!==(6&El)?Je():-1!==Zl?Zl:Zl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Ml?Ml&-Ml:null!==ga.transition?(0===Ql&&(Ql=ft()),Ql):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Jl=null,Error(a(185));vt(e,n,r),0!==(2&El)&&e===Pl||(e===Pl&&(0===(2&El)&&(Il|=n),4===Al&&sc(e,Ml)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(Hl=Je()+500,Bo&&Uo()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),s=1<<i,l=o[i];-1===l?0!==(s&n)&&0===(s&r)||(o[i]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Pl?Ml:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Bo=!0,Ho(e)}(lc.bind(null,e)):Ho(lc.bind(null,e)),io(function(){0===(6&El)&&Uo()}),n=null;else{switch(bt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Zl=-1,Ql=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=El;El|=2;var i=mc();for(Pl===e&&Ml===t||(Ul=null,Hl=Je()+500,hc(e,t));;)try{xc();break}catch(l){pc(e,l)}_a(),Nl.current=i,El=o,null!==Tl?t=0:(Pl=null,Ml=0,t=Al)}if(0!==t){if(2===t&&(0!==(o=mt(e))&&(r=o,t=ac(e,o))),1===t)throw n=Ol,hc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!sr(a(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=gc(e,r))&&(0!==(i=mt(e))&&(r=i,t=ac(e,i))),1===t))throw n=Ol,hc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Bl,Ul);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Fl+500-Je())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,Bl,Ul),t);break}wc(e,Bl,Ul);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>o&&(o=s),r&=~i}if(r=o,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ro(wc.bind(null,e,Bl,Ul),r);break}wc(e,Bl,Ul);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=Dl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ic(t)),e}function ic(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~$l,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(a(327));kc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ol,hc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Ul),rc(e,Je()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Hl=Je()+500,Bo&&Uo())}}function dc(e){null!==Kl&&0===Kl.tag&&0===(6&El)&&kc();var t=El;El|=1;var n=_l.transition,r=yt;try{if(_l.transition=null,yt=1,e)return e()}finally{yt=r,_l.transition=n,0===(6&(El=t))&&Uo()}}function uc(){Rl=Ll.current,Co(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ao();break;case 3:Ja(),Co(To),Co(Po),ri();break;case 5:Qa(r);break;case 4:Ja();break;case 13:case 19:Co(ei);break;case 10:Ea(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Pl=e,Tl=e=Lc(e.current,null),Ml=Rl=t,Al=0,Ol=null,$l=Il=zl=0,Bl=Dl=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(r=(n=Ra[t]).interleaved)){n.interleaved=null;var o=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=o,r.next=i}n.pending=r}Ra=null}return e}function pc(e,t){for(;;){var n=Tl;try{if(_a(),oi.current=Zi,di){for(var r=si.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}di=!1}if(ii=0,ci=li=si=null,ui=!1,hi=0,Cl.current=null,null===n||null===n.return){Al=1,Ol=t,Tl=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=gs(s);if(null!==m){m.flags&=-257,vs(m,s,l,0,t),1&m.mode&&fs(i,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fs(i,d,t),fc();break e}c=Error(a(426))}else if(aa&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),fa(cs(c,l));break e}}i=c=cs(c,l),4!==Al&&(Al=2),null===Dl?Dl=[i]:Dl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,ps(0,c,t));break e;case 1:l=c;var x=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Vl||!Vl.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,ms(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function mc(){var e=Nl.current;return Nl.current=Zi,null===e?Zi:e}function fc(){0!==Al&&3!==Al&&2!==Al||(Al=4),null===Pl||0===(268435455&zl)&&0===(268435455&Il)||sc(Pl,Ml)}function gc(e,t){var n=El;El|=2;var r=mc();for(Pl===e&&Ml===t||(Ul=null,hc(e,t));;)try{vc();break}catch(o){pc(e,o)}if(_a(),El=n,Nl.current=r,null!==Tl)throw Error(a(261));return Pl=null,Ml=0,Al}function vc(){for(;null!==Tl;)yc(Tl)}function xc(){for(;null!==Tl&&!Xe();)yc(Tl)}function yc(e){var t=jl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ys(n,t,Rl)))return void(Tl=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Al=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Al&&(Al=5)}function wc(e,t,n){var r=yt,o=_l.transition;try{_l.transition=null,yt=1,function(e,t,n,r){do{kc()}while(null!==Kl);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-it(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}(e,i),e===Pl&&(Tl=Pl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pc(tt,function(){return kc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=_l.transition,_l.transition=null;var s=yt;yt=1;var l=El;El|=4,Cl.current=null,function(e,t){if(eo=qt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==o&&3!==h.nodeType||(l=s+o),h!==i||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===o&&(l=s),p===i&&++u===r&&(c=s),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},qt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(to),qt=!!eo,to=eo=null,e.current=n,xl(n,e,o),Ge(),El=l,yt=s,_l.transition=i}else e.current=n;if(Yl&&(Yl=!1,Kl=e,Xl=o),i=e.pendingLanes,0===i&&(Vl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ql)throw ql=!1,e=Wl,Wl=null,e;0!==(1&Xl)&&0!==e.tag&&kc(),i=e.pendingLanes,0!==(1&i)?e===Jl?Gl++:(Gl=0,Jl=e):Gl=0,Uo()}(e,t,n,r)}finally{_l.transition=o,yt=r}return null}function kc(){if(null!==Kl){var e=bt(Xl),t=_l.transition,n=yt;try{if(_l.transition=null,yt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Xl=0,0!==(6&El))throw Error(a(331));var o=El;for(El|=4,Zs=e.current;null!==Zs;){var i=Zs,s=i.child;if(0!==(16&Zs.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Zs=d;null!==Zs;){var u=Zs;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Zs=h;else for(;null!==Zs;){var p=(u=Zs).sibling,m=u.return;if(al(u),u===d){Zs=null;break}if(null!==p){p.return=m,Zs=p;break}Zs=m}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zs=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(i=Zs).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var x=i.sibling;if(null!==x){x.return=i.return,Zs=x;break e}Zs=i.return}}var y=e.current;for(Zs=y;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=y;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Sc(l,l.return,k)}if(l===s){Zs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zs=w;break e}Zs=l.return}}if(El=o,Uo(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(k){}r=!0}return r}finally{yt=n,_l.transition=t}}return!1}function jc(e,t,n){e=Ba(e,t=ps(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=Ba(t,e=ms(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ml&n)===n&&(4===Al||3===Al&&(130023424&Ml)===Ml&&500>Je()-Fl?hc(e,0):$l|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Oa(e,t))&&(vt(e,t,n),rc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cc(e,n)}function Pc(e,t){return Ye(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Tc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,r,o,i){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case j:return Oc(n.children,o,i,t);case S:s=8,o|=8;break;case N:return(e=Mc(12,n,t,2|o)).elementType=N,e.lanes=i,e;case P:return(e=Mc(13,n,t,o)).elementType=P,e.lanes=i,e;case T:return(e=Mc(19,n,t,o)).elementType=T,e.lanes=i,e;case L:return zc(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case _:s=9;break e;case E:s=11;break e;case M:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Mc(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Oc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function zc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Ic(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function $c(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,o,a,i,s,l){return e=new Dc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Mc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ia(a),e}function Fc(e){if(!e)return Eo;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Lo(n))return zo(e,n,t)}return t}function Hc(e,t,n,r,o,a,i,s,l){return(e=Bc(n,r,!0,e,0,a,0,s,l)).context=Fc(null),n=e.current,(a=Da(r=ec(),o=tc(n))).callback=void 0!==t&&null!==t?t:null,Ba(n,a,o),e.current.lanes=o,vt(e,o,r),rc(e,r),e}function Uc(e,t,n,r){var o=t.current,a=ec(),i=tc(o);return n=Fc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ba(o,t,i))&&(nc(e,o,i,a),Fa(e,o,i)),i}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||To.current)ys=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ys=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),ma();break;case 5:Za(t);break;case 1:Lo(t.type)&&Io(t);break;case 4:Ga(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;_o(ja,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_o(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Is(e,t,n):(_o(ei,1&ei.current),null!==(e=qs(e,t,n))?e.sibling:null);_o(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),_o(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return qs(e,t,n)}(e,t,n);ys=0!==(131072&e.flags)}else ys=!1,aa&&0!==(1048576&t.flags)&&ea(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Us(e,t),e=t.pendingProps;var o=Ro(t,Po.current);Ta(t,n),o=gi(null,t,r,e,o,n);var i=vi();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lo(r)?(i=!0,Io(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ia(t),o.updater=os,t.stateNode=o,o._reactInternals=t,ls(t,r,e,n),t=Es(null,t,r,!0,i,n)):(t.tag=0,aa&&i&&ta(t),bs(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===M)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=_s(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Cs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,_s(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,o=(i=t.memoizedState).element,$a(e,t),Ua(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ts(e,t,r,n,o=cs(Error(a(423)),t));break e}if(r!==o){t=Ts(e,t,r,n,o=cs(Error(a(424)),t));break e}for(oa=co(t.stateNode.containerInfo.firstChild),ra=t,aa=!0,ia=null,n=ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ma(),r===o){t=qs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Za(t),null===e&&da(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==i&&no(r,i)&&(t.flags|=32),Ns(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&da(t),null;case 13:return Is(e,t,n);case 4:return Ga(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,ws(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,_o(ja,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===o.children&&!To.current){t=qs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Da(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Pa(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Pa(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}bs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ta(t,n),r=r(o=Ma(o)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),ks(e,t,r,o=ns(r.type,o),n);case 15:return js(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),Us(e,t),t.tag=1,Lo(r)?(e=!0,Io(t)):e=!1,Ta(t,n),is(t,r,o),ls(t,r,o,n),Es(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Qc(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof o){var s=o;o=function(){var e=qc(i);s.call(e)}}Uc(t,i,e,o)}else i=function(e,t,n,r,o){if(o){if("function"===typeof r){var a=r;r=function(){var e=qc(i);a.call(e)}}var i=Hc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[fo]=i.current,Hr(8===e.nodeType?e.parentNode:e),dc(),i}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=qc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fo]=l.current,Hr(8===e.nodeType?e.parentNode:e),dc(function(){Uc(t,l,n,r)}),l}(n,t,e,o,r);return qc(i)}Xc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Uc(e,t,null,null)},Xc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Uc(null,e,null,null)}),t[fo]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),rc(t,Je()),0===(6&El)&&(Hl=Je()+500,Uo()))}break;case 13:dc(function(){var t=Oa(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Vc(e,1)}},kt=function(e){if(13===e.tag){var t=Oa(e,134217728);if(null!==t)nc(t,e,134217728,ec());Vc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=Oa(e,t);if(null!==n)nc(n,e,t,ec());Vc(e,t)}},St=function(){return yt},Nt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},ke=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(a(90));Y(r),Z(r,o)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[bo,wo,ko,Ce,_e,cc]},td={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{ot=rd.inject(nd),at=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(a(299));var n=!1,r="",o=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,o),e[fo]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",s=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,o,0,i,s),e[fo]=t.current,Hr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[fo]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Qc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(374));class a extends o.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="";"plain"===r?o="pl":"phrase"===r?o="ph":"websearch"===r&&(o="w");const a=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=a},829:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:o}=t;this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=o}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),n&&this.headers.append("Prefer",`count=${n}`),new o.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new o.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer",`count=${t}`),new o.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer",`count=${e}`),new o.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const o=r(n(210));t.PostgrestClient=o.default;const a=r(n(829));t.PostgrestQueryBuilder=a.default;const i=r(n(736));t.PostgrestFilterBuilder=i.default;const s=r(n(374));t.PostgrestTransformBuilder=s.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:o.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(43),o=n(391),a=(n(358),"popstate");function i(){return p(function(e,t){let{pathname:n,search:r,hash:o}=e.location;return d("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:u(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function s(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?h(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function u(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:o=document.defaultView,v5Compat:i=!1}=r,s=o.history,l="POP",u=null,h=p();function p(){return(s.state||{idx:null}).idx}function f(){l="POP";let e=p(),t=null==e?null:e-h;h=e,u&&u({action:l,location:v.location,delta:t})}function g(e){return m(e)}null==h&&(h=0,s.replaceState({...s.state,idx:h},""));let v={get action(){return l},get location(){return e(o,s)},listen(e){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(a,f),u=e,()=>{o.removeEventListener(a,f),u=null}},createHref:e=>t(o,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=d(v.location,e,t);n&&n(r,e),h=p()+1;let a=c(r,h),m=v.createHref(r);try{s.pushState(a,"",m)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;o.location.assign(m)}i&&u&&u({action:l,location:v.location,delta:1})},replace:function(e,t){l="REPLACE";let r=d(v.location,e,t);n&&n(r,e),h=p();let o=c(r,h),a=v.createHref(r);s.replaceState(o,"",a),i&&u&&u({action:l,location:v.location,delta:0})},go:e=>s.go(e)};return v}function m(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),s(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:u(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function f(e,t){return g(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function g(e,t,n,r){let o=M(("string"===typeof t?h(t):t).pathname||"/",n);if(null==o)return null;let a=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let s=0;null==i&&s<a.length;++s){let e=T(o);i=_(a[s],e,r)}return i}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=(e,o,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};i.relativePath.startsWith("/")&&(s(i.relativePath.startsWith(r),`Absolute route path "${i.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),i.relativePath=i.relativePath.slice(r.length));let l=z([r,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(s(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),v(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:C(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of x(e.path))o(e,t,n);else o(e,t)}),t}function x(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return o?[a,""]:[a];let i=x(r.join("/")),s=[];return s.push(...i.map(e=>""===e?a:[a,e].join("/"))),o&&s.push(...i),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var y=/^:[\w-]+$/,b=3,w=2,k=1,j=10,S=-2,N=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=S),t&&(r+=w),n.filter(e=>!N(e)).reduce((e,t)=>e+(y.test(t)?b:""===t?k:j),r)}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,o={},a="/",i=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:z([a,d.pathname]),pathnameBase:I(z([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=z([a,d.pathnameBase]))}return i}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=P(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function P(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];l("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function L(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function A(e){let t=L(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function O(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=h(e):(r={...e},s(!r.pathname||!r.pathname.includes("?"),R("?","pathname","search",r)),s(!r.pathname||!r.pathname.includes("#"),R("#","pathname","hash",r)),s(!r.search||!r.search.includes("#"),R("#","search","hash",r)));let a,i=""===e||""===r.pathname,l=i?"/":r.pathname;if(null==l)a=n;else{let e=t.length-1;if(!o&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:o=""}="string"===typeof e?h(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:$(r),hash:D(o)}}(r,a),d=l&&"/"!==l&&l.endsWith("/"),u=(i||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!u||(c.pathname+="/"),c}var z=e=>e.join("/").replace(/\/\/+/g,"/"),I=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",D=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var F=["POST","PUT","PATCH","DELETE"],H=(new Set(F),["GET",...F]);new Set(H),Symbol("ResetLoaderData");var U=r.createContext(null);U.displayName="DataRouter";var q=r.createContext(null);q.displayName="DataRouterState";var W=r.createContext({isTransitioning:!1});W.displayName="ViewTransition";var V=r.createContext(new Map);V.displayName="Fetchers";var Y=r.createContext(null);Y.displayName="Await";var K=r.createContext(null);K.displayName="Navigation";var X=r.createContext(null);X.displayName="Location";var G=r.createContext({outlet:null,matches:[],isDataRoute:!1});G.displayName="Route";var J=r.createContext(null);J.displayName="RouteError";function Z(){return null!=r.useContext(X)}function Q(){return s(Z(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(X).location}var ee="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function te(e){r.useContext(K).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext(G);return e?function(){let{router:e}=he("useNavigate"),t=me("useNavigate"),n=r.useRef(!1);te(()=>{n.current=!0});let o=r.useCallback(async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(n.current,ee),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))},[e,t]);return o}():function(){s(Z(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(U),{basename:t,navigator:n}=r.useContext(K),{matches:o}=r.useContext(G),{pathname:a}=Q(),i=JSON.stringify(A(o)),c=r.useRef(!1);te(()=>{c.current=!0});let d=r.useCallback(function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l(c.current,ee),!c.current)return;if("number"===typeof r)return void n.go(r);let s=O(r,JSON.parse(i),a,"path"===o.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:z([t,s.pathname])),(o.replace?n.replace:n.push)(s,o.state,o)},[t,n,i,a,e]);return d}()}r.createContext(null);function re(){let{matches:e}=r.useContext(G),t=e[e.length-1];return t?t.params:{}}function oe(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(G),{pathname:o}=Q(),a=JSON.stringify(A(n));return r.useMemo(()=>O(e,JSON.parse(a),o,"path"===t),[e,a,o,t])}function ae(e,t,n,o){s(Z(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=r.useContext(K),{matches:i}=r.useContext(G),c=i[i.length-1],d=c?c.params:{},u=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let e=m&&m.path||"";ve(u,!m||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let g,v=Q();if(t){let e="string"===typeof t?h(t):t;s("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),g=e}else g=v;let x=g.pathname||"/",y=x;if("/"!==p){let e=p.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=f(e,{pathname:y});l(m||null!=b,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),l(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=de(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:z([p,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:z([p,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,n,o);return t&&w?r.createElement(X.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},w):w}function ie(){let e=fe(),t=B(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o},i={padding:"2px 4px",backgroundColor:o},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:i},"ErrorBoundary")," or"," ",r.createElement("code",{style:i},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,s)}var se=r.createElement(ie,null),le=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(G.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ce(e){let{routeContext:t,match:n,children:o}=e,a=r.useContext(U);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(G.Provider,{value:t},o)}function de(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let o=e,a=n?.errors;if(null!=a){let e=o.findIndex(e=>e.route.id&&void 0!==a?.[e.route.id]);s(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,e+1))}let i=!1,l=-1;if(n)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){i=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}return o.reduceRight((e,s,c)=>{let d,u=!1,h=null,p=null;n&&(d=a&&s.route.id?a[s.route.id]:void 0,h=s.route.errorElement||se,i&&(l<0&&0===c?(ve("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,p=null):l===c&&(u=!0,p=s.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,c+1)),f=()=>{let t;return t=d?h:u?p:s.route.Component?r.createElement(s.route.Component,null):s.route.element?s.route.element:e,r.createElement(ce,{match:s,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===c)?r.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()},null)}function ue(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function he(e){let t=r.useContext(U);return s(t,ue(e)),t}function pe(e){let t=r.useContext(q);return s(t,ue(e)),t}function me(e){let t=function(e){let t=r.useContext(G);return s(t,ue(e)),t}(e),n=t.matches[t.matches.length-1];return s(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function fe(){let e=r.useContext(J),t=pe("useRouteError"),n=me("useRouteError");return void 0!==e?e:t.errors?.[n]}var ge={};function ve(e,t,n){t||ge[e]||(ge[e]=!0,l(!1,n))}r.memo(function(e){let{routes:t,future:n,state:r}=e;return ae(t,void 0,r,n)});function xe(e){s(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ye(e){let{basename:t="/",children:n=null,location:o,navigationType:a="POP",navigator:i,static:c=!1}=e;s(!Z(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:d,navigator:i,static:c,future:{}}),[d,i,c]);"string"===typeof o&&(o=h(o));let{pathname:p="/",search:m="",hash:f="",state:g=null,key:v="default"}=o,x=r.useMemo(()=>{let e=M(p,d);return null==e?null:{location:{pathname:e,search:m,hash:f,state:g,key:v},navigationType:a}},[d,p,m,f,g,v,a]);return l(null!=x,`<Router basename="${d}"> is not able to match the URL "${p}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),null==x?null:r.createElement(K.Provider,{value:u},r.createElement(X.Provider,{children:n,value:x}))}function be(e){let{children:t,location:n}=e;return ae(we(t),n)}r.Component;function we(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,o)=>{if(!r.isValidElement(e))return;let a=[...t,o];if(e.type===r.Fragment)return void n.push.apply(n,we(e.props.children,a));s(e.type===xe,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),s(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=we(e.props.children,a)),n.push(i)}),n}var ke="get",je="application/x-www-form-urlencoded";function Se(e){return null!=e&&"string"===typeof e.tagName}function Ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var Ce=null;var _e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ee(e){return null==e||_e.has(e)?e:(l(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${je}"`),null)}function Pe(e,t){let n,r,o,a,i;if(Se(s=e)&&"form"===s.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?M(i,t):null,n=e.getAttribute("method")||ke,o=Ee(e.getAttribute("enctype"))||je,a=new FormData(e)}else if(function(e){return Se(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Se(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||i.getAttribute("action");if(r=s?M(s,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||ke,o=Ee(e.getAttribute("formenctype"))||Ee(i.getAttribute("enctype"))||je,a=new FormData(i,e),!function(){if(null===Ce)try{new FormData(document.createElement("form"),0),Ce=!1}catch(e){Ce=!0}return Ce}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,r)}}else{if(Se(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ke,r=null,o=je,i=e}var s;return a&&"text/plain"===o&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}function Te(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Me(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Re(e){return null!=e&&"string"===typeof e.page}function Le(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ae(e,t,n,r,o,a){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===a?t.filter((e,t)=>i(e,t)||s(e,t)):"data"===a?t.filter((t,a)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,a)||s(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Oe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1),[...new Set(r)];var r}function ze(e,t){let n=new Set,r=new Set(t);return e.reduce((e,o)=>{if(t&&!Re(o)&&"script"===o.as&&o.href&&r.has(o.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(o));return n.has(a)||(n.add(a),e.push({key:a,link:o})),e},[])}function Ie(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var $e=new Set([100,101,204,205]);function De(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===M(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}r.Component;function Be(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let o,a=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(B(t))return r.createElement(Fe,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),a);if(t instanceof Error)o=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);o=new Error(e)}return r.createElement(Fe,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},o.stack),a)}function Fe(e){let{title:t,renderScripts:n,isOutsideRemixApp:o,children:a}=e,{routeModules:i}=Ve();return i.root?.Layout&&!o?a:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,t)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,n?r.createElement(Qe,null):null)))}function He(e,t){return"lazy"===e.mode&&!0===t}function Ue(){let e=r.useContext(U);return Te(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function qe(){let e=r.useContext(q);return Te(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var We=r.createContext(void 0);function Ve(){let e=r.useContext(We);return Te(e,"You must render this element inside a <HydratedRouter> element"),e}function Ye(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ke(e,t,n){if(n&&!Ze)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}function Xe(e){let{page:t,...n}=e,{router:o}=Ue(),a=r.useMemo(()=>f(o.routes,t,o.basename),[o.routes,t,o.basename]);return a?r.createElement(Je,{page:t,matches:a,...n}):null}function Ge(e){let{manifest:t,routeModules:n}=Ve(),[o,a]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return ze((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Me(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Le).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,t,n).then(e=>{r||a(e)}),()=>{r=!0}},[e,t,n]),o}function Je(e){let{page:t,matches:n,...o}=e,a=Q(),{manifest:i,routeModules:s}=Ve(),{basename:l}=Ue(),{loaderData:c,matches:d}=qe(),u=r.useMemo(()=>Ae(t,n,d,i,a,"data"),[t,n,d,i,a]),h=r.useMemo(()=>Ae(t,n,d,i,a,"assets"),[t,n,d,i,a]),p=r.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{let n=i.routes[t.route.id];n&&n.hasLoader&&(!u.some(e=>e.route.id===t.route.id)&&t.route.id in c&&s[t.route.id]?.shouldRevalidate||n.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let o=De(t,l);return r&&e.size>0&&o.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[o.pathname+o.search]},[l,c,a,i,u,n,t,s]),m=r.useMemo(()=>Oe(h,i),[h,i]),f=Ge(h);return r.createElement(r.Fragment,null,p.map(e=>r.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...o})),m.map(e=>r.createElement("link",{key:e,rel:"modulepreload",href:e,...o})),f.map(e=>{let{key:t,link:n}=e;return r.createElement("link",{key:t,...n})}))}We.displayName="FrameworkContext";var Ze=!1;function Qe(e){let{manifest:t,serverHandoffString:n,isSpaMode:o,renderMeta:a,routeDiscovery:i,ssr:s}=Ve(),{router:l,static:c,staticContext:d}=Ue(),{matches:u}=qe(),h=He(i,s);a&&(a.didRenderScripts=!0);let p=Ke(u,null,o);r.useEffect(()=>{Ze=!0},[]);let m=r.useMemo(()=>{let o=d?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",a=c?`${t.hmr?.runtime?`import ${JSON.stringify(t.hmr.runtime)};`:""}${h?"":`import ${JSON.stringify(t.url)}`};\n${p.map((e,n)=>{let r=`route${n}`,o=t.routes[e.route.id];Te(o,`Route ${e.route.id} not found in manifest`);let{clientActionModule:a,clientLoaderModule:i,clientMiddlewareModule:s,hydrateFallbackModule:l,module:c}=o,d=[...a?[{module:a,varName:`${r}_clientAction`}]:[],...i?[{module:i,varName:`${r}_clientLoader`}]:[],...s?[{module:s,varName:`${r}_clientMiddleware`}]:[],...l?[{module:l,varName:`${r}_HydrateFallback`}]:[],{module:c,varName:`${r}_main`}];return 1===d.length?`import * as ${r} from ${JSON.stringify(c)};`:[d.map(e=>`import * as ${e.varName} from "${e.module}";`).join("\n"),`const ${r} = {${d.map(e=>`...${e.varName}`).join(",")}};`].join("\n")}).join("\n")}\n  ${h?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:n,...r}=e,o=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(a.pop();a.length>0;)i.push(`/${a.join("/")}`),a.pop();i.forEach(e=>{let n=f(t.routes,e,t.basename);n&&n.forEach(e=>o.add(e.route.id))});let s=[...o].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return{...r,routes:s,sri:!!n||void 0}}(t,l),null,2)};`:""}\n  window.__reactRouterRouteModules = {${p.map((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`).join(",")}};\n\nimport(${JSON.stringify(t.entry.module)});`:" ";return r.createElement(r.Fragment,null,r.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ie(o),type:void 0}),r.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ie(a),type:"module",async:!0}))},[]),g=Ze?[]:function(e){return[...new Set(e)]}(t.entry.imports.concat(Oe(p,t,{includeHydrateFallback:!0}))),v="object"===typeof t.sri?t.sri:{};return Ze?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:v})}}):null,h?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:v[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:v[t.entry.module],suppressHydrationWarning:!0}),g.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:v[t],suppressHydrationWarning:!0})),m)}function et(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{tt&&(window.__reactRouterVersion="7.6.3")}catch(Sm){}function nt(e){let{basename:t,children:n,window:o}=e,a=r.useRef();null==a.current&&(a.current=i({window:o,v5Compat:!0}));let s=a.current,[l,c]=r.useState({action:s.action,location:s.location}),d=r.useCallback(e=>{r.startTransition(()=>c(e))},[c]);return r.useLayoutEffect(()=>s.listen(d),[s,d]),r.createElement(ye,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s})}var rt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ot=r.forwardRef(function(e,t){let n,{onClick:o,discover:a="render",prefetch:i="none",relative:c,reloadDocument:d,replace:h,state:p,target:m,to:f,preventScrollReset:g,viewTransition:v,...x}=e,{basename:y}=r.useContext(K),b="string"===typeof f&&rt.test(f),w=!1;if("string"===typeof f&&b&&(n=f,tt))try{let e=new URL(window.location.href),t=f.startsWith("//")?new URL(e.protocol+f):new URL(f),n=M(t.pathname,y);t.origin===e.origin&&null!=n?f=n+t.search+t.hash:w=!0}catch(Sm){l(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(Z(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=r.useContext(K),{hash:a,pathname:i,search:l}=oe(e,{relative:t}),c=i;return"/"!==n&&(c="/"===i?n:z([n,i])),o.createHref({pathname:c,search:l,hash:a})}(f,{relative:c}),[j,S,N]=function(e,t){let n=r.useContext(We),[o,a]=r.useState(!1),[i,s]=r.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,p=r.useRef(null);r.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(o){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[o]);let m=()=>{a(!0)},f=()=>{a(!1),s(!1)};return n?"intent"!==e?[i,p,{}]:[i,p,{onFocus:Ye(l,m),onBlur:Ye(c,f),onMouseEnter:Ye(d,m),onMouseLeave:Ye(u,f),onTouchStart:Ye(h,m)}]:[!1,p,{}]}(i,x),C=function(e){let{target:t,replace:n,state:o,preventScrollReset:a,relative:i,viewTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ne(),c=Q(),d=oe(e,{relative:i});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:u(c)===u(d);l(e,{replace:t,state:o,preventScrollReset:a,relative:i,viewTransition:s})}},[c,l,d,n,o,t,e,a,i,s])}(f,{replace:h,state:p,target:m,preventScrollReset:g,relative:c,viewTransition:v});let _=r.createElement("a",{...x,...N,href:n||k,onClick:w||d?o:function(e){o&&o(e),e.defaultPrevented||C(e)},ref:et(t,S),target:m,"data-discover":b||"render"!==a?void 0:"true"});return j&&!b?r.createElement(r.Fragment,null,_,r.createElement(Xe,{page:k})):_});ot.displayName="Link";var at=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:o=!1,className:a="",end:i=!1,style:l,to:c,viewTransition:d,children:u,...h}=e,p=oe(c,{relative:h.relative}),m=Q(),f=r.useContext(q),{navigator:g,basename:v}=r.useContext(K),x=null!=f&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(W);s(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=lt("useViewTransitionState"),a=oe(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=M(n.currentLocation.pathname,o)||n.currentLocation.pathname,l=M(n.nextLocation.pathname,o)||n.nextLocation.pathname;return null!=E(a.pathname,l)||null!=E(a.pathname,i)}(p)&&!0===d,y=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,b=m.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;o||(b=b.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&v&&(w=M(w,v)||w);const k="/"!==y&&y.endsWith("/")?y.length-1:y.length;let j,S=b===y||!i&&b.startsWith(y)&&"/"===b.charAt(k),N=null!=w&&(w===y||!i&&w.startsWith(y)&&"/"===w.charAt(y.length)),C={isActive:S,isPending:N,isTransitioning:x},_=S?n:void 0;j="function"===typeof a?a(C):[a,S?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P="function"===typeof l?l(C):l;return r.createElement(ot,{...h,"aria-current":_,className:j,ref:t,style:P,to:c,viewTransition:d},"function"===typeof u?u(C):u)});at.displayName="NavLink";var it=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:o,navigate:a,reloadDocument:i,replace:l,state:c,method:d=ke,action:h,onSubmit:p,relative:m,preventScrollReset:f,viewTransition:g,...v}=e,x=ht(),y=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(K),o=r.useContext(G);s(o,"useFormAction must be used inside a RouteContext");let[a]=o.matches.slice(-1),i={...oe(e||".",{relative:t})},l=Q();if(null==e){i.search=l.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();i.search=n?`?${n}`:""}}e&&"."!==e||!a.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(i.pathname="/"===i.pathname?n:z([n,i.pathname]));return u(i)}(h,{relative:m}),b="get"===d.toLowerCase()?"get":"post",w="string"===typeof h&&rt.test(h);return r.createElement("form",{ref:t,method:b,action:y,onSubmit:i?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||d;x(t||e.currentTarget,{fetcherKey:o,method:n,navigate:a,replace:l,state:c,relative:m,preventScrollReset:f,viewTransition:g})},...v,"data-discover":w||"render"!==n?void 0:"true"})});function st(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lt(e){let t=r.useContext(U);return s(t,st(e)),t}function ct(e){l("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=r.useRef(Ne(e)),n=r.useRef(!1),o=Q(),a=r.useMemo(()=>function(e,t){let n=Ne(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(o.search,n.current?null:t.current),[o.search]),i=ne(),s=r.useCallback((e,t)=>{const r=Ne("function"===typeof e?e(a):e);n.current=!0,i("?"+r,t)},[i,a]);return[a,s]}it.displayName="Form";var dt=0,ut=()=>`__${String(++dt)}__`;function ht(){let{router:e}=lt("useSubmit"),{basename:t}=r.useContext(K),n=me("useRouteId");return r.useCallback(async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:i,encType:s,formData:l,body:c}=Pe(r,t);if(!1===o.navigate){let t=o.fetcherKey||ut();await e.fetch(t,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}class pt extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class mt extends pt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ft extends pt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class gt extends pt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vt;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(vt||(vt={}));var xt=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(Sm){a(Sm)}}function s(e){try{l(r.throw(e))}catch(Sm){a(Sm)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};class yt{constructor(e){let{headers:t={},customFetch:r,region:o=vt.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=o,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return xt(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:a}=t;let i={},{region:s}=t;s||(s=this.region);const l=new URL(`${this.url}/${e}`);let c;s&&"any"!==s&&(i["x-region"]=s,l.searchParams.set("forceFunctionRegion",s)),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=a):"string"===typeof a?(i["Content-Type"]="text/plain",c=a):"undefined"!==typeof FormData&&a instanceof FormData?c=a:(i["Content-Type"]="application/json",c=JSON.stringify(a)));const d=yield this.fetch(l.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),r),body:c}).catch(e=>{throw new mt(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new ft(d);if(!d.ok)throw new gt(d);let h,p=(null!==(n=d.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===p?yield d.json():"application/octet-stream"===p?yield d.blob():"text/event-stream"===p?d:"multipart/form-data"===p?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof gt||r instanceof ft?r.context:void 0}}})}}var bt=n(980);const{PostgrestClient:wt,PostgrestQueryBuilder:kt,PostgrestFilterBuilder:jt,PostgrestTransformBuilder:St,PostgrestBuilder:Nt,PostgrestError:Ct}=bt;const _t=function(){if("undefined"!==typeof WebSocket)return WebSocket;if("undefined"!==typeof global.WebSocket)return global.WebSocket;if("undefined"!==typeof window.WebSocket)return window.WebSocket;if("undefined"!==typeof self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var Et,Pt,Tt,Mt,Rt,Lt;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Et||(Et={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Pt||(Pt={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Tt||(Tt={})),function(e){e.websocket="websocket"}(Mt||(Mt={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Rt||(Rt={}));class At{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),o=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=n.decode(e.slice(a,a+r));a+=r;const s=n.decode(e.slice(a,a+o));a+=o;return{ref:null,topic:i,event:s,payload:JSON.parse(n.decode(e.slice(a,e.byteLength)))}}}class Ot{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Lt||(Lt={}));const zt=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,o)=>(n[o]=It(o,e,t,r),n),{})},It=(e,t,n,r)=>{const o=t.find(t=>t.name===e),a=null===o||void 0===o?void 0:o.type,i=n[e];return a&&!r.includes(a)?$t(a,i):Dt(i)},$t=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Ut(t,n)}switch(e){case Lt.bool:return Bt(t);case Lt.float4:case Lt.float8:case Lt.int2:case Lt.int4:case Lt.int8:case Lt.numeric:case Lt.oid:return Ft(t);case Lt.json:case Lt.jsonb:return Ht(t);case Lt.timestamp:return qt(t);case Lt.abstime:case Lt.date:case Lt.daterange:case Lt.int4range:case Lt.int8range:case Lt.money:case Lt.reltime:case Lt.text:case Lt.time:case Lt.timestamptz:case Lt.timetz:case Lt.tsrange:case Lt.tstzrange:default:return Dt(t)}},Dt=e=>e,Bt=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Ft=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ht=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Ut=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,n);try{r=JSON.parse("["+a+"]")}catch(o){r=a?a.split(","):[]}return r.map(e=>$t(t,e))}return e},qt=e=>"string"===typeof e?e.replace(" ","T"):e,Wt=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Vt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Yt,Kt,Xt,Gt;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Yt||(Yt={}));class Jt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jt.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Jt.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Jt.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const o=this.cloneDeep(e),a=this.transformState(t),i={},s={};return this.map(o,(e,t)=>{a[e]||(s[e]=t)}),this.map(a,(e,t)=>{const n=o[e];if(n){const r=t.map(e=>e.presence_ref),o=n.map(e=>e.presence_ref),a=t.filter(e=>o.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(s[e]=l)}else i[e]=t}),this.syncDiff(o,{joins:i,leaves:s},n,r)}static syncDiff(e,t,n,r){const{joins:o,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(o,(t,r)=>{var o;const a=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=this.cloneDeep(r),a.length>0){const n=e[t].map(e=>e.presence_ref),r=a.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,a,r)}),this.map(a,(t,n)=>{let o=e[t];if(!o)return;const a=n.map(e=>e.presence_ref);o=o.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=o,r(t,o,n),0===o.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Kt||(Kt={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Xt||(Xt={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Gt||(Gt={}));class Zt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vt(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new Ot(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Jt(this),this.broadcastEndpointURL=Wt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:o,presence:a,private:i}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(Gt.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(Gt.CLOSED));const s={},l={broadcast:o,presence:a,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],private:i};this.socket.accessTokenValue&&(s.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},s)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,o=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,a=[];for(let r=0;r<o;r++){const o=t[r],{filter:{event:i,schema:s,table:l,filter:c}}=o,d=n&&n[r];if(!d||d.event!==i||d.schema!==s||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=Pt.errored,void(null===e||void 0===e||e(Gt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},o),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(Gt.SUBSCRIBED))}null===e||void 0===e||e(Gt.SUBSCRIBED)}).receive("error",t=>{this.state=Pt.errored,null===e||void 0===e||e(Gt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Gt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,o,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(o=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===o?void 0:o.broadcast)||void 0===a?void 0:a.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:a,payload:i}=e,s={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(o){return"AbortError"===o.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Pt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Vt(this,Tt.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,o=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(o),a}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Vt(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,o;const a=e.toLocaleLowerCase(),{close:i,error:s,leave:l,join:c}=Tt;if(n&&[i,s,l,c].indexOf(a)>=0&&n!==this._joinRef())return;let d=this._onMessage(a,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(d,n)):null===(o=this.bindings[a])||void 0===o||o.filter(e=>{var n,r,o,i,s,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const n=null===(s=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:o,errors:a}=e,i={schema:t,table:n,commit_timestamp:r,eventType:o,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),o={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&Zt.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tt.close,{},e)}_onError(e){this._on(Tt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=zt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=zt(e.columns,e.old_record)),t}}const Qt=()=>{};class en{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Qt,this.ref=0,this.logger=Qt,this.conn=null,this.sendBuffer=[],this.serializer=new At,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint=`${e}/${Mt.websocket}`,this.httpEndpoint=Wt(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const o=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ot(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=_t),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Et.connecting:return Rt.Connecting;case Et.open:return Rt.Open;case Et.closing:return Rt.Closing;default:return Rt.Closed}}isConnected(){return this.connectionState()===Rt.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new Zt(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:o}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${o})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:"realtime-js/2.11.15"};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(Tt.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:o}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${o&&"("+o+")"||""}`,r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,o)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tt.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class tn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function nn(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class rn extends tn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class on extends tn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var an=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(Sm){a(Sm)}}function s(e){try{l(r.throw(e))}catch(Sm){a(Sm)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const sn=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},ln=e=>{if(Array.isArray(e))return e.map(e=>ln(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const o=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[o]=ln(r)}),t};var cn=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(Sm){a(Sm)}}function s(e){try{l(r.throw(e))}catch(Sm){a(Sm)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const dn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),un=(e,t,r)=>cn(void 0,void 0,void 0,function*(){const o=yield an(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof o&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{t(new rn(dn(n),e.status||500))}).catch(e=>{t(new on(dn(e),e))}):t(new on(dn(e),e))});function hn(e,t,n,r,o,a){return cn(this,void 0,void 0,function*(){return new Promise((i,s)=>{e(n,((e,t,n,r)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),n))})(t,r,o,a)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>un(e,s,r))})})}function pn(e,t,n,r){return cn(this,void 0,void 0,function*(){return hn(e,"GET",t,n,r)})}function mn(e,t,n,r,o){return cn(this,void 0,void 0,function*(){return hn(e,"POST",t,r,o,n)})}function fn(e,t,n,r,o){return cn(this,void 0,void 0,function*(){return hn(e,"DELETE",t,r,o,n)})}var gn=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(Sm){a(Sm)}}function s(e){try{l(r.throw(e))}catch(Sm){a(Sm)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const vn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=sn(r)}uploadOrUpdate(e,t,n,r){return gn(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},xn),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const s=a.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),s&&o.append("metadata",this.encodeMetadata(s)),o.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(o=n,o.append("cacheControl",a.cacheControl),s&&o.append("metadata",this.encodeMetadata(s))):(o=n,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,s&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(s)))),(null===r||void 0===r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:o,headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:l,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(o){if(nn(o))return{data:null,error:o};throw o}})}upload(e,t,n){return gn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return gn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:xn.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);const s=yield this.fetch(i.toString(),{method:"PUT",body:e,headers:a}),l=yield s.json();if(s.ok)return{data:{path:o,fullPath:l.Key},error:null};return{data:null,error:l}}catch(s){if(nn(s))return{data:null,error:s};throw s}})}createSignedUploadUrl(e,t){return gn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const o=yield mn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+o.url),i=a.searchParams.get("token");if(!i)throw new tn("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(n){if(nn(n))return{data:null,error:n};throw n}})}update(e,t,n){return gn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return gn(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(nn(r))return{data:null,error:r};throw r}})}copy(e,t,n){return gn(this,void 0,void 0,function*(){try{return{data:{path:(yield mn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(nn(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return gn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),o=yield mn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(r){if(nn(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return gn(this,void 0,void 0,function*(){try{const r=yield mn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${o}`):null})),error:null}}catch(r){if(nn(r))return{data:null,error:r};throw r}})}download(e,t){return gn(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),o=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield pn(this.fetch,`${this.url}/${n}/${t}${o}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(a){if(nn(a))return{data:null,error:a};throw a}})}info(e){return gn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield pn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ln(e),error:null}}catch(n){if(nn(n))return{data:null,error:n};throw n}})}exists(e){return gn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return cn(this,void 0,void 0,function*(){return hn(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(nn(n)&&n instanceof on){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],o=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==o&&r.push(o);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&r.push(i);let s=r.join("&");return""!==s&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${s}`)}}}remove(e){return gn(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(nn(t))return{data:null,error:t};throw t}})}list(e,t,n){return gn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},vn),t),{prefix:e||""});return{data:yield mn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(nn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const bn={"X-Client-Info":"storage-js/2.7.1"};var wn=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(Sm){a(Sm)}}function s(e){try{l(r.throw(e))}catch(Sm){a(Sm)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};class kn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},bn),t),this.fetch=sn(n)}listBuckets(){return wn(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(nn(e))return{data:null,error:e};throw e}})}getBucket(e){return wn(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(nn(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return wn(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(nn(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return wn(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,r,o){return cn(this,void 0,void 0,function*(){return hn(e,"PUT",t,r,o,n)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(nn(n))return{data:null,error:n};throw n}})}emptyBucket(e){return wn(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(nn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return wn(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(nn(t))return{data:null,error:t};throw t}})}}class jn extends kn{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new yn(this.url,this.headers,e,this.fetch)}}let Sn="";Sn="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Nn={headers:{"X-Client-Info":`supabase-js-${Sn}/2.50.4`}},Cn={schema:"public"},_n={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},En={};var Pn=n(630),Tn=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(Sm){a(Sm)}}function s(e){try{l(r.throw(e))}catch(Sm){a(Sm)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const Mn=e=>{let t;return t=e||("undefined"===typeof fetch?Pn.default:fetch),function(){return t(...arguments)}},Rn=(e,t,n)=>{const r=Mn(n),o="undefined"===typeof Headers?Pn.Headers:Headers;return(n,a)=>Tn(void 0,void 0,void 0,function*(){var i;const s=null!==(i=yield t())&&void 0!==i?i:e;let l=new o(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${s}`),r(n,Object.assign(Object.assign({},a),{headers:l}))})};var Ln=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(Sm){a(Sm)}}function s(e){try{l(r.throw(e))}catch(Sm){a(Sm)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const An="2.70.0",On=3e4,zn=9e4,In={"X-Client-Info":`gotrue-js/${An}`},$n="X-Supabase-Api-Version",Dn={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Bn=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Fn extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Hn(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Un extends Fn{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class qn extends Fn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Wn extends Fn{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Vn extends Wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Yn extends Wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kn extends Wn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xn extends Wn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gn extends Wn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jn extends Wn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Zn(e){return Hn(e)&&"AuthRetryableFetchError"===e.name}class Qn extends Wn{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class er extends Wn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nr=" \t\n\r=".split(""),rr=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<nr.length;t+=1)e[nr[t].charCodeAt(0)]=-2;for(let t=0;t<tr.length;t+=1)e[tr[t].charCodeAt(0)]=t;return e})();function or(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(tr[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(tr[e]),t.queuedBits-=6}}function ar(e,t,n){const r=rr[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function ir(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)ar(e.charCodeAt(i),o,a);return t.join("")}function sr(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function lr(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}sr(r,t)}}function cr(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let o=0;o<e.length;o+=1)ar(e.charCodeAt(o),n,r);return new Uint8Array(t)}function dr(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>or(e,n,r)),or(null,n,r),t.join("")}const ur=()=>"undefined"!==typeof window&&"undefined"!==typeof document,hr={tested:!1,writable:!1},pr=()=>{if(!ur())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(Sm){return!1}if(hr.tested)return hr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),hr.tested=!0,hr.writable=!0}catch(Sm){hr.tested=!0,hr.writable=!1}return hr.writable};const mr=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},fr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},gr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},vr=async(e,t)=>{await e.removeItem(t)};class xr{constructor(){this.promise=new xr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function yr(e){const t=e.split(".");if(3!==t.length)throw new er("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Bn.test(t[n]))throw new er("JWT not in base64url format");return{header:JSON.parse(ir(t[0])),payload:JSON.parse(ir(t[1])),signature:cr(t[2]),raw:{header:t[0],payload:t[1]}}}function br(e){return("0"+e.toString(16)).substr(-2)}async function wr(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,br).join("")}();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await fr(e,`${t}-code-verifier`,o);const a=await wr(r);return[a,r===a?"plain":"s256"]}xr.promiseConstructor=Promise;const jr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Sr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nr(e){if(!Sr.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Cr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const _r=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Er=[502,503,504];async function Pr(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Jn(_r(e),0);if(Er.includes(e.status))throw new Jn(_r(e),e.status);let r,o;try{r=await e.json()}catch(Sm){throw new qn(_r(Sm),Sm)}const a=function(e){const t=e.headers.get($n);if(!t)return null;if(!t.match(jr))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Sm){return null}}(e);if(a&&a.getTime()>=Dn.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?o=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(o=r.error_code),o){if("weak_password"===o)throw new Qn(_r(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===o)throw new Vn}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Qn(_r(r),e.status,r.weak_password.reasons);throw new Un(_r(r),e.status||500,o)}async function Tr(e,t,n,r){var o;const a=Object.assign({},null===r||void 0===r?void 0:r.headers);a[$n]||(a[$n]=Dn.name),(null===r||void 0===r?void 0:r.jwt)&&(a.Authorization=`Bearer ${r.jwt}`);const i=null!==(o=null===r||void 0===r?void 0:r.query)&&void 0!==o?o:{};(null===r||void 0===r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const s=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,o,a){const i=((e,t,n,r)=>{const o={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))})(t,r,o,a);let s;try{s=await e(n,Object.assign({},i))}catch(Sm){throw console.error(Sm),new Jn(_r(Sm),0)}s.ok||await Pr(s);if(null===r||void 0===r?void 0:r.noResolveJson)return s;try{return await s.json()}catch(Sm){await Pr(Sm)}}(e,t,n+s,{headers:a,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Mr(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Rr(e){const t=Mr(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Lr(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ar(e){return{data:e,error:null}}function Or(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a}=e,i=Cr(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a},user:Object.assign({},i)},error:null}}function zr(e){return e}const Ir=["global","local","others"];var $r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};class Dr{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=mr(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ir[0];if(Ir.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ir.join(", ")}`);try{return await Tr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Hn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Tr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Lr})}catch(n){if(Hn(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=$r(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Tr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Or,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Hn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Tr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lr})}catch(t){if(Hn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,o,a,i,s;try{const l={nextPage:null,lastPage:0,total:0},c=await Tr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(o=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==o?o:""},xform:zr});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(s=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==s?s:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Hn(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Nr(e);try{return await Tr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lr})}catch(t){if(Hn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Nr(e);try{return await Tr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Lr})}catch(n){if(Hn(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Nr(e);try{return await Tr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Lr})}catch(n){if(Hn(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Nr(e.userId);try{const{data:t,error:n}=await Tr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Hn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Nr(e.userId),Nr(e.id);try{return{data:await Tr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Hn(t))return{data:null,error:t};throw t}}}const Br={getItem:e=>pr()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{pr()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{pr()&&globalThis.localStorage.removeItem(e)}};function Fr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Hr=!!(globalThis&&pr()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Ur extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class qr extends Ur{}async function Wr(e,t,n){Hr&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Hr&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw Hr&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new qr(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Hr)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(Sm){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",Sm)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Hr&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Hr&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Sm){"undefined"!==typeof self&&(self.globalThis=self)}}();const Vr={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:In,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yr(e,t,n){return await n()}class Kr{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kr.nextInstanceID,Kr.nextInstanceID+=1,this.instanceID>0&&ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Vr),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Dr({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=mr(r.fetch),this.lock=r.lock||Yr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:ur()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Wr:this.lock=Yr,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:pr()?this.storage=Br:(this.memoryStorage={},this.storage=Fr(this.memoryStorage)):(this.memoryStorage={},this.storage=Fr(this.memoryStorage)),ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Sm){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Sm)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(`GoTrueClient@${this.instanceID} (${An}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(Sm){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),ur()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:o}=await this._getSessionFromURL(t,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),function(e){return Hn(e)&&"AuthImplicitGrantRedirectError"===e.name}(o)){const t=null===(e=o.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Hn(t)?{error:t}:{error:new qn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const o=await Tr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Mr}),{data:a,error:i}=o;if(i||!a)return{data:{user:null,session:null},error:i};const s=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(o){if(Hn(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,n,r;try{let o;if("email"in e){const{email:n,password:r,options:a}=e;let i=null,s=null;"pkce"===this.flowType&&([i,s]=await kr(this.storage,this.storageKey)),o=await Tr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:s},xform:Mr})}else{if(!("phone"in e))throw new Kn("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;o=await Tr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null===i||void 0===i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Mr})}}const{data:a,error:i}=o;if(i||!a)return{data:{user:null,session:null},error:i};const s=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(o){if(Hn(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:o}=e;t=await Tr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:Rr})}else{if(!("phone"in e))throw new Kn("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:o}=e;t=await Tr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:Rr})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Yn}}catch(t){if(Hn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,o;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,o,a,i,s,l,c,d,u,h;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let v;if(ur())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const x=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${x.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:n}=await Tr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:dr(m)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Mr});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Yn}}catch(f){if(Hn(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await gr(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:o}=await Tr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Mr});if(await vr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:o}):{data:{user:null,session:null,redirectType:null},error:new Yn}}catch(o){if(Hn(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:o,nonce:a}=e,i=await Tr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Mr}),{data:s,error:l}=i;return l?{data:{user:null,session:null},error:l}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:l}):{data:{user:null,session:null},error:new Yn}}catch(t){if(Hn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,o,a;try{if("email"in e){const{email:r,options:o}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await kr(this.storage,this.storageKey));const{error:s}=await Tr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},create_user:null===(n=null===o||void 0===o?void 0:o.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:s}=await Tr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(o=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(a=null===n||void 0===n?void 0:n.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:s}}throw new Kn("You must provide either an email or phone number.")}catch(i){if(Hn(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let r,o;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,o=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:i}=await Tr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:Mr});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const s=a.session,l=a.user;return(null===s||void 0===s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(r){if(Hn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let o=null,a=null;return"pkce"===this.flowType&&([o,a]=await kr(this.storage,this.storageKey)),await Tr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Ar})}catch(o){if(Hn(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Vn;const{error:r}=await Tr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Hn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:o}=e,{error:a}=await Tr(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:n,type:r,options:o}=e,{data:a,error:i}=await Tr(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new Kn("You must provide either an email or phone number and a type")}catch(t){if(Hn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(Sm){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Sm){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<zn;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Tr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lr}):await this._useSession(async e=>{var t,n,r;const{data:o,error:a}=e;if(a)throw a;return(null===(t=o.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Tr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Lr}):{data:{user:null},error:new Vn}})}catch(t){if(Hn(t))return function(e){return Hn(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:o}=n;if(o)throw o;if(!r.session)throw new Vn;const a=r.session;let i=null,s=null;"pkce"===this.flowType&&null!=e.email&&([i,s]=await kr(this.storage,this.storageKey));const{data:l,error:c}=await Tr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:s}),jwt:a.access_token,xform:Lr});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(Hn(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Vn;const t=Date.now()/1e3;let n=t,r=!0,o=null;const{payload:a}=yr(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};o=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;o={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Hn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:o}=t;if(o)throw o;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Vn;const{session:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Hn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ur())throw new Xn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Gn("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Xn("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Gn("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:o,refresh_token:a,expires_in:i,expires_at:s,token_type:l}=e;if(!o||!i||!a||!l)throw new Xn("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;s&&(u=parseInt(s));const h=u-c;1e3*h<=On&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=u-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,c);const{data:m,error:f}=await this._getUser(o);if(f)throw f;const g={provider_token:n,provider_refresh_token:r,access_token:o,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(Hn(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gr(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:o}=t;if(o)return{error:o};const a=null===(n=r.session)||void 0===n?void 0:n.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return Hn(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:o}=t;if(o)throw o;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(o){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await kr(this.storage,this.storageKey,!0));try{return await Tr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Hn(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Hn(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,o,a,i;const{data:s,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(o=e.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:!0});return await Tr(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=s.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return ur()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Hn(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:o,error:a}=t;if(a)throw a;return await Tr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Hn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const o=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Tr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Mr})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Zn(t)&&Date.now()+n-o<On},new Promise((e,t)=>{(async()=>{for(let o=0;o<1/0;o++)try{const t=await n(o);if(!r(o,null,t))return void e(t)}catch(Sm){if(!r(o,Sm))return void t(Sm)}})()}))}catch(o){if(this._debug(t,"error",o),Hn(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),ur()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await gr(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<zn;if(this._debug(t,`session has${r?"":" not"} expired with margin of 90000s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Zn(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new xr;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Vn;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(o){if(this._debug(r,"error",o),Hn(o)){const e={session:null,error:o};return Zn(o)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(Sm){r.push(Sm)}});if(await Promise.all(o),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await fr(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ur()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Sm){console.error("removing visibilitychange callback failed",Sm)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),On);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/On);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(Sm){console.error("Auto refresh tick failed with error. This is likely a transient error.",Sm)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Sm){if(!(Sm.isAcquireTimeout||Sm instanceof Ur))throw Sm;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ur()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null===n||void 0===n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await kr(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;return o?{data:null,error:o}:await Tr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Hn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:o,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:s,error:l}=await Tr(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(n=null===o||void 0===o?void 0:o.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===s||void 0===s?void 0:s.totp)||void 0===r?void 0:r.qr_code)&&(s.totp.qr_code=`data:image/svg+xml;utf-8,${s.totp.qr_code}`),{data:s,error:null})})}catch(t){if(Hn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:i}=await Tr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(Hn(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:o}=t;return o?{data:null,error:o}:await Tr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Hn(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),o=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:o}=e;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=yr(r.access_token);let i=null;a.aal&&(i=a.aal);let s=i;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:i,nextLevel:s,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>Date.now())return t;const{data:n,error:r}=await Tr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;if(!n.keys||0===n.keys.length)throw new er("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),t=n.keys.find(t=>t.kid===e),!t)throw new er("No matching signing key found in JWKS");return t}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:o,signature:a,raw:{header:i,payload:s}}=yr(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(o.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:o,header:r,signature:a},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await this.fetchJwk(r.kid,t),d=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,a,function(e){const t=[];return lr(e,e=>t.push(e)),new Uint8Array(t)}(`${i}.${s}`)))throw new er("Invalid JWT signature");return{data:{claims:o,header:r,signature:a},error:null}}catch(n){if(Hn(n))return{data:null,error:n};throw n}}}Kr.nextInstanceID=0;const Xr=Kr;class Gr extends Xr{constructor(e){super(e)}}var Jr=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(Sm){a(Sm)}}function s(e){try{l(r.throw(e))}catch(Sm){a(Sm)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};class Zr{constructor(e,t,n){var r,o,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(s=e).endsWith("/")?s:s+"/";var s;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var n,r;const{db:o,auth:a,realtime:i,global:s}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),o),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign(Object.assign({},u),s),{headers:Object.assign(Object.assign({},null!==(n=null===u||void 0===u?void 0:u.headers)&&void 0!==n?n:{}),null!==(r=null===s||void 0===s?void 0:s.headers)&&void 0!==r?r:{})}),accessToken:()=>Ln(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:Cn,realtime:En,auth:Object.assign(Object.assign({},_n),{storageKey:c}),global:Nn});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(o=d.global.headers)&&void 0!==o?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,d.global.fetch),this.fetch=Rn(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new wt(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new yt(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new jn(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Jr(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:o,detectSessionInUrl:a,storage:i,storageKey:s,flowType:l,lock:c,debug:d}=e;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gr({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:s,autoRefreshToken:r,persistSession:o,detectSessionInUrl:a,storage:i,flowType:l,lock:c,debug:d,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new en(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Qr=((e,t,n)=>new Zr(e,t,n))("https://tu-proyecto.supabase.co","tu-anon-key-aqui"),eo={async createRoadmap(e,t){const{data:n,error:r}=await Qr.from("roadmaps").insert({user_id:e,title:t.title,description:t.description,emoji:t.emoji,is_public:!1}).select().single();if(r)throw r;return n},async getUserRoadmaps(e){const{data:t,error:n}=await Qr.from("roadmaps").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw n;return t},async getPublicRoadmap(e){const{data:t,error:n}=await Qr.from("roadmaps").select("\n        *,\n        nodes (\n          *,\n          resources (*)\n        )\n      ").eq("id",e).eq("is_public",!0).single();if(n)throw n;return t},async getRoadmapVersions(e){const{data:t,error:n}=await Qr.from("roadmap_versions").select("\n        *,\n        user_id,\n        created_at,\n        description,\n        is_public,\n        total_votes\n      ").eq("roadmap_type",e).eq("is_public",!0).order("created_at",{ascending:!1});if(n)throw n;return t},async getRoadmapVersion(e){const{data:t,error:n}=await Qr.from("roadmap_versions").select("*").eq("id",e).single();if(n)throw n;return t},async getUserRoadmapVersions(e,t){const{data:n,error:r}=await Qr.from("roadmap_versions").select("*").eq("user_id",e).eq("roadmap_type",t).order("created_at",{ascending:!1});if(r)throw r;return n},async getUserLatestVersion(e,t){const{data:n,error:r}=await Qr.from("roadmap_versions").select("*").eq("user_id",e).eq("roadmap_type",t).order("created_at",{ascending:!1}).limit(1).single();if(r&&"PGRST116"!==r.code)throw r;return n||null},async createNode(e,t){const{data:n,error:r}=await Qr.from("nodes").insert({roadmap_id:e,label:t.label,description:t.description,icon:t.icon,position_x:t.position_x||0,position_y:t.position_y||0}).select().single();if(r)throw r;return n}};var to={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},no=r.createContext&&r.createContext(to),ro=["attr","size","title"];function oo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ao(){return ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ao.apply(this,arguments)}function io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?io(Object(n),!0).forEach(function(t){lo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):io(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function co(e){return e&&e.map((e,t)=>r.createElement(e.tag,so({key:t},e.attr),co(e.child)))}function uo(e){return t=>r.createElement(ho,ao({attr:so({},e.attr)},t),co(e.child))}function ho(e){var t=t=>{var n,{attr:o,size:a,title:i}=e,s=oo(e,ro),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",ao({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,s,{className:n,style:so(so({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==no?r.createElement(no.Consumer,null,e=>t(e)):t(to)}function po(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function mo(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(e)}function fo(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function go(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function vo(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function xo(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function yo(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(e)}function bo(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function wo(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(e)}function ko(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function jo(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"},child:[]},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"},child:[]},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"},child:[]}]})(e)}function So(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function No(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(e)}function Co(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function _o(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function Eo(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Po(e){return uo({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}var To=n(579);const Mo=(0,r.createContext)();function Ro(e){let{children:t}=e;const[n,o]=(0,r.useState)(null),[a,i]=(0,r.useState)(!0),[s,l]=(0,r.useState)(null),c=(0,r.useMemo)(()=>({user:n,setUser:o,loading:a,session:s}),[n,a,s]),d=(0,r.useCallback)((e,t)=>{var n;l(t),o(null!==(n=null===t||void 0===t?void 0:t.user)&&void 0!==n?n:null),i(!1)},[]);return(0,r.useEffect)(()=>{let e=!0;(async()=>{try{const{data:{session:n}}=await Qr.auth.getSession();var t;if(e)l(n),o(null!==(t=null===n||void 0===n?void 0:n.user)&&void 0!==t?t:null),i(!1);const{data:{subscription:r}}=Qr.auth.onAuthStateChange(d);return()=>{e=!1,r.unsubscribe()}}catch(n){console.error("Error initializing auth:",n),e&&i(!1)}})()},[d]),(0,To.jsx)(Mo.Provider,{value:c,children:t})}function Lo(){const e=(0,r.useContext)(Mo);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e}function Ao(){const[e,t]=(0,r.useState)(!1),{user:n}=Lo(),o=async()=>{const{error:e}=await Qr.auth.signOut();e&&alert(e.message)};var a,i,s,l;return n?(0,To.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,To.jsx)("span",{className:"text-white text-sm font-medium",children:(null===(a=n.user_metadata)||void 0===a||null===(i=a.name)||void 0===i?void 0:i.charAt(0))||(null===(s=n.email)||void 0===s?void 0:s.charAt(0))})}),(0,To.jsx)("span",{className:"text-sm text-gray-700 hidden sm:block",children:(null===(l=n.user_metadata)||void 0===l?void 0:l.name)||n.email})]}),(0,To.jsxs)("button",{onClick:o,className:"flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:[(0,To.jsx)(yo,{className:"mr-1"}),(0,To.jsx)("span",{className:"hidden sm:inline",children:"Cerrar sesi\xf3n"})]})]}):(0,To.jsxs)(To.Fragment,{children:[(0,To.jsx)("h2",{className:"text-xl sm:text-2xl font-bold mb-1 text-gray-900 text-center",children:"Iniciar sesi\xf3n"}),(0,To.jsx)("p",{className:"text-gray-500 text-sm mb-6 text-center",children:"Inicia sesi\xf3n con tu cuenta de Google"}),(0,To.jsxs)("button",{onClick:async()=>{t(!0);try{const{error:e}=await Qr.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e}catch(e){alert(e.message)}finally{t(!1)}},disabled:e,className:"flex items-center justify-center w-full mb-4 px-6 py-3 text-base bg-white border border-gray-300 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 hover:bg-gray-50 disabled:bg-gray-100 disabled:cursor-not-allowed font-medium text-gray-700",children:[(0,To.jsx)("span",{className:"flex items-center mr-3",children:(0,To.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 48 48",style:{display:"block"},children:[(0,To.jsx)("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),(0,To.jsx)("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),(0,To.jsx)("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),(0,To.jsx)("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),(0,To.jsx)("path",{fill:"none",d:"M0 0h48v48H0z"})]})}),e?"Cargando...":"Continuar con Google"]}),(0,To.jsxs)("p",{className:"text-xs text-gray-400 mt-4 text-center",children:["Al continuar, aceptas nuestros ",(0,To.jsx)("a",{href:"/privacidad",className:"underline hover:text-blue-600",children:"T\xe9rminos de Servicio"})," y ",(0,To.jsx)("a",{href:"/privacidad",className:"underline hover:text-blue-600",children:"Pol\xedtica de Privacidad"}),"."]})]})}const Oo={termodinamica:{title:"Termodin\xe1mica",icon:"\ud83d\udd25",description:"Ciencia que estudia las transformaciones de energ\xeda en sistemas f\xedsicos",nodes:[{id:"termodinamica",label:"Termodin\xe1mica",description:"Ciencia que estudia las transformaciones de energ\xeda en sistemas f\xedsicos",icon:"\ud83d\udd25",position:{x:0,y:0}}],edges:[]}},zo={async createProposal(e,t,n,r){const{data:o,error:a}=await Qr.from("edit_proposals").insert({roadmap_type:e,user_id:t,changes:n,description:r,status:"pending",votes:[],comments:[]}).select().single();if(a)throw a;return o},async getProposals(e){const{data:t,error:n}=await Qr.from("edit_proposals").select("*").eq("roadmap_type",e).order("created_at",{ascending:!1});if(n)throw n;return t},async voteOnProposal(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const{data:o,error:a}=await Qr.from("proposal_votes").upsert({proposal_id:e,user_id:t,vote:n,comment:r}).select().single();if(a)throw a;const{data:i,error:s}=await Qr.from("edit_proposals").select("votes").eq("id",e).single();if(s)throw s;const l=i.votes.length,c=i.votes.filter(e=>"approve"===e.vote).length,d=i.votes.filter(e=>"reject"===e.vote).length;let u="pending";if(l>=5&&(c>d&&c>=.6*l?u="approved":d>c&&(u="rejected")),"pending"!==u){const{error:t}=await Qr.from("edit_proposals").update({status:u}).eq("id",e);if(t)throw t}return o},async applyApprovedProposal(e){const{data:t,error:n}=await Qr.from("edit_proposals").select("*").eq("id",e).eq("status","approved").single();if(n)throw n;for(const r of t.changes)"node"===r.type?await Qr.from("roadmap_customizations").upsert({roadmap_type:t.roadmap_type,node_data:{[r.nodeId]:r.after}}):"connection"===r.type&&await Qr.from("roadmap_customizations").upsert({roadmap_type:t.roadmap_type,custom_connections:[r.after]});return await Qr.from("edit_proposals").update({status:"applied"}).eq("id",e),t}},Io=(e,t,n)=>{try{const r={nodes:t,edges:n,lastModified:(new Date).toISOString(),version:"1.0"},o=JSON.stringify(r),a=`roadmap_${e}`;if(localStorage.getItem(a)===o)return;localStorage.setItem(a,o),console.log(`Roadmap ${e} guardado en localStorage`)}catch(r){console.error("Error guardando roadmap en localStorage:",r)}},$o=e=>{try{const t=`roadmap_${e}`,n=localStorage.getItem(t);if(!n)return null;const r=JSON.parse(n);return r.nodes&&r.edges?(console.log(`Roadmap ${e} cargado desde localStorage`),r):(console.warn("Datos de roadmap corruptos, eliminando..."),localStorage.removeItem(t),null)}catch(t){console.error("Error cargando roadmap desde localStorage:",t);const n=`roadmap_${e}`;return localStorage.removeItem(n),null}},Do=e=>{try{const t=`roadmap_${e}`;localStorage.removeItem(t),console.log(`Roadmap ${e} eliminado de localStorage`)}catch(t){console.error("Error eliminando roadmap de localStorage:",t)}},Bo={async saveProgress(e,t,n){const{data:r,error:o}=await Qr.from("user_progress").upsert({user_id:e,roadmap_type:t,completed_nodes:n.completedNodes||[],current_node:n.currentNode||null,time_spent:n.timeSpent||0,last_accessed:(new Date).toISOString(),progress_percentage:n.progressPercentage||0,notes:n.notes||{},bookmarks:n.bookmarks||[],updated_at:(new Date).toISOString()});if(o)throw o;return r},async getProgress(e,t){const{data:n,error:r}=await Qr.from("user_progress").select("*").eq("user_id",e).eq("roadmap_type",t).single();if(r&&"PGRST116"!==r.code)throw r;return n||{completed_nodes:[],current_node:null,time_spent:0,progress_percentage:0,notes:{},bookmarks:[]}},async getAllProgress(e){const{data:t,error:n}=await Qr.from("user_progress").select("*").eq("user_id",e).order("last_accessed",{ascending:!1});if(n)throw n;return t||[]},async markNodeCompleted(e,t,n){const r=await this.getProgress(e,t),o=[...new Set([...r.completed_nodes,n])];return await this.saveProgress(e,t,{...r,completed_nodes:o,progress_percentage:this.calculateProgressPercentage(o,t)})},async markNodeIncomplete(e,t,n){const r=await this.getProgress(e,t),o=r.completed_nodes.filter(e=>e!==n);return await this.saveProgress(e,t,{...r,completed_nodes:o,progress_percentage:this.calculateProgressPercentage(o,t)})},async addNodeNote(e,t,n,r){const o=await this.getProgress(e,t),a={...o.notes,[n]:r};return await this.saveProgress(e,t,{...o,notes:a})},async addBookmark(e,t,n){const r=await this.getProgress(e,t),o=[...new Set([...r.bookmarks,n])];return await this.saveProgress(e,t,{...r,bookmarks:o})},async removeBookmark(e,t,n){const r=await this.getProgress(e,t),o=r.bookmarks.filter(e=>e!==n);return await this.saveProgress(e,t,{...r,bookmarks:o})},calculateProgressPercentage(e,t){const n=Oo[t];if(!n||!n.nodes)return 0;const r=n.nodes.length;return r>0?Math.round(e.length/r*100):0},async getProgressStats(e){const t=await this.getAllProgress(e);return{totalRoadmaps:t.length,completedRoadmaps:t.filter(e=>100===e.progress_percentage).length,inProgressRoadmaps:t.filter(e=>e.progress_percentage>0&&e.progress_percentage<100).length,totalTimeSpent:t.reduce((e,t)=>e+(t.time_spent||0),0),averageProgress:t.length>0?Math.round(t.reduce((e,t)=>e+(t.progress_percentage||0),0)/t.length):0,recentActivity:t.sort((e,t)=>new Date(t.last_accessed)-new Date(e.last_accessed)).slice(0,5)}}},Fo=(0,To.jsxs)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,To.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),(0,To.jsx)("path",{d:"M8 8h8M8 12h8M8 16h4"})]}),Ho=(0,To.jsx)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,To.jsx)("circle",{cx:"12",cy:"12",r:"8"})}),Uo=(0,To.jsx)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,To.jsx)("circle",{cx:"12",cy:"12",r:"6"})}),qo=(0,To.jsxs)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,To.jsx)("rect",{x:"6",y:"8",width:"12",height:"8",rx:"2"}),(0,To.jsx)("path",{d:"M8 12h8"})]}),Wo=(0,To.jsx)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,To.jsx)("rect",{x:"6",y:"10",width:"12",height:"4",rx:"2"})}),Vo=(0,To.jsxs)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,To.jsx)("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"}),(0,To.jsx)("path",{d:"M9 12l2 2 4-4"})]}),Yo=(0,To.jsx)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,To.jsx)("line",{x1:"4",y1:"12",x2:"20",y2:"12"})}),Ko=(0,To.jsx)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,To.jsx)("line",{x1:"12",y1:"4",x2:"12",y2:"20"})}),Xo=[{id:"title",name:"T\xedtulo",icon:Fo,description:"T\xedtulo principal del concepto",type:"title",defaultData:{label:"Nuevo T\xedtulo",description:"Descripci\xf3n del t\xedtulo",icon:Fo,backgroundColor:"#3B82F6",fontSize:"24px",fontWeight:"bold",nodeType:"title"}},{id:"topic",name:"Tema",icon:Ho,description:"Tema o concepto principal",type:"topic",defaultData:{label:"Nuevo Tema",description:"Descripci\xf3n del tema",icon:Ho,backgroundColor:"#fdff00",fontSize:"18px",fontWeight:"semibold",nodeType:"topic"}},{id:"subtopic",name:"Subtema",icon:Uo,description:"Subtema o subconcepto",type:"subtopic",defaultData:{label:"Nuevo Subtema",description:"Descripci\xf3n del subtema",icon:Uo,backgroundColor:"#F59E0B",fontSize:"16px",fontWeight:"normal",nodeType:"subtopic"}},{id:"paragraph",name:"P\xe1rrafo",icon:qo,description:"Texto descriptivo o explicativo",type:"paragraph",defaultData:{label:"Nuevo P\xe1rrafo",description:"Contenido del p\xe1rrafo",icon:qo,backgroundColor:"#8B5CF6",fontSize:"14px",fontWeight:"normal",nodeType:"paragraph"}},{id:"button",name:"Bot\xf3n",icon:Wo,description:"Enlace o bot\xf3n de acci\xf3n",type:"button",defaultData:{label:"Nuevo Bot\xf3n",description:"Descripci\xf3n del bot\xf3n",icon:Wo,backgroundColor:"#1e40af",fontSize:"14px",fontWeight:"normal",nodeType:"button",url:""}},{id:"todo",name:"Tarea",icon:Vo,description:"Tarea pendiente",type:"todo",defaultData:{label:"Nueva Tarea",description:"Descripci\xf3n de la tarea",icon:Vo,backgroundColor:"#ffffff",fontSize:"14px",fontWeight:"normal",nodeType:"todo",completed:!1}},{id:"horizontal-line",name:"L\xednea Horizontal",icon:Yo,description:"Separador horizontal",type:"horizontal-line",defaultData:{label:"",description:"Separador",icon:Yo,backgroundColor:"#6B7280",fontSize:"12px",fontWeight:"normal",nodeType:"horizontal-line"}},{id:"vertical-line",name:"L\xednea Vertical",icon:Ko,description:"Separador vertical",type:"vertical-line",defaultData:{label:"",description:"Separador",icon:Ko,backgroundColor:"#6B7280",fontSize:"12px",fontWeight:"normal",nodeType:"vertical-line"}}],Go=[{id:"termodinamica",title:"Termodin\xe1mica Metal\xfargica",description:"Mapa mental interactivo de conceptos fundamentales de termodin\xe1mica aplicada a procesos metal\xfargicos",icon:"\ud83d\udd25",path:"/termodinamica",isCurrent:!0,category:"ciencias-basicas",difficulty:"intermedio",estimatedTime:"40-60 horas",prerequisites:["matematicas","fisica"],tags:["termodin\xe1mica","energ\xeda","procesos","fundamentos"],lastUpdated:"2024-01-15",version:"1.2.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:25,totalConnections:18},{id:"quimica",title:"Qu\xedmica Metal\xfargica",description:"Procesos qu\xedmicos en metalurgia y reacciones fundamentales",icon:"\u2697\ufe0f",path:"/quimica",isCurrent:!1,category:"ciencias-basicas",difficulty:"intermedio",estimatedTime:"30-50 horas",prerequisites:["quimica"],tags:["qu\xedmica","reacciones","procesos","fundamentos"],lastUpdated:"2024-01-10",version:"1.0.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:20,totalConnections:15},{id:"analisis",title:"An\xe1lisis de Materiales",description:"T\xe9cnicas de caracterizaci\xf3n y an\xe1lisis de materiales",icon:"\ud83d\udd2c",path:"/analisis",isCurrent:!1,category:"tecnicas-analiticas",difficulty:"avanzado",estimatedTime:"50-70 horas",prerequisites:["cienciaMateriales","fisica"],tags:["an\xe1lisis","caracterizaci\xf3n","t\xe9cnicas","laboratorio"],lastUpdated:"2024-01-12",version:"1.1.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:30,totalConnections:22},{id:"procesos",title:"Procesos Industriales",description:"Aplicaciones industriales y procesos de producci\xf3n",icon:"\ud83c\udfed",path:"/procesos",isCurrent:!1,category:"procesos-industriales",difficulty:"avanzado",estimatedTime:"60-80 horas",prerequisites:["termodinamica","quimica"],tags:["procesos","industria","producci\xf3n","aplicaciones"],lastUpdated:"2024-01-08",version:"1.0.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:35,totalConnections:28},{id:"fundicion",title:"Fundici\xf3n y Colada",description:"Procesos de fundici\xf3n y t\xe9cnicas de colada",icon:"\ud83c\udf0b",path:"/fundicion",isCurrent:!1,category:"procesos-industriales",difficulty:"intermedio",estimatedTime:"40-60 horas",prerequisites:["termodinamica","transferenciaCalor"],tags:["fundici\xf3n","colada","procesos","manufactura"],lastUpdated:"2024-01-05",version:"1.0.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:28,totalConnections:20},{id:"tratamiento",title:"Tratamiento T\xe9rmico",description:"T\xe9cnicas de tratamiento t\xe9rmico de materiales",icon:"\u26a1",path:"/tratamiento",isCurrent:!1,category:"procesos-industriales",difficulty:"intermedio",estimatedTime:"35-55 horas",prerequisites:["termodinamica","transformacionesFase"],tags:["tratamiento","t\xe9rmico","propiedades","materiales"],lastUpdated:"2024-01-03",version:"1.0.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:22,totalConnections:16},{id:"corrosion",title:"Corrosi\xf3n y Protecci\xf3n",description:"Mecanismos de corrosi\xf3n y m\xe9todos de protecci\xf3n",icon:"\ud83d\udee1\ufe0f",path:"/corrosion",isCurrent:!1,category:"ciencias-aplicadas",difficulty:"intermedio",estimatedTime:"30-50 horas",prerequisites:["electroquimica","quimica"],tags:["corrosi\xf3n","protecci\xf3n","durabilidad","materiales"],lastUpdated:"2024-01-01",version:"1.0.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:25,totalConnections:18},{id:"metalurgia",title:"Metalurgia F\xedsica",description:"Propiedades f\xedsicas y mec\xe1nicas de los materiales",icon:"\u2699\ufe0f",path:"/metalurgia",isCurrent:!1,category:"ciencias-aplicadas",difficulty:"avanzado",estimatedTime:"45-65 horas",prerequisites:["propiedadesMecanicas","estructuraCristalina"],tags:["metalurgia","f\xedsica","propiedades","mec\xe1nicas"],lastUpdated:"2023-12-28",version:"1.0.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:32,totalConnections:24},{id:"polimeros",title:"Pol\xedmeros y Compuestos",description:"Materiales polim\xe9ricos y compuestos avanzados",icon:"\ud83e\uddec",path:"/polimeros",isCurrent:!1,category:"materiales-avanzados",difficulty:"avanzado",estimatedTime:"50-70 horas",prerequisites:["cienciaMateriales","quimica"],tags:["pol\xedmeros","compuestos","materiales","avanzados"],lastUpdated:"2023-12-25",version:"1.0.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:30,totalConnections:22},{id:"ceramicos",title:"Materiales Cer\xe1micos",description:"Cer\xe1micas y materiales inorg\xe1nicos",icon:"\ud83c\udffa",path:"/ceramicos",isCurrent:!1,category:"materiales-avanzados",difficulty:"intermedio",estimatedTime:"35-55 horas",prerequisites:["cienciaMateriales"],tags:["cer\xe1micos","materiales","inorg\xe1nicos","propiedades"],lastUpdated:"2023-12-20",version:"1.0.0",author:"Equipo MetalRoadmap",isPublic:!0,totalNodes:26,totalConnections:19}],Jo=[{id:"ciencias-basicas",name:"Ciencias B\xe1sicas",description:"Fundamentos cient\xedficos necesarios para la ingenier\xeda metal\xfargica",icon:"\ud83d\udcda",color:"#3B82F6"},{id:"tecnicas-analiticas",name:"T\xe9cnicas Anal\xedticas",description:"M\xe9todos y t\xe9cnicas de an\xe1lisis y caracterizaci\xf3n de materiales",icon:"\ud83d\udd2c",color:"#10B981"},{id:"procesos-industriales",name:"Procesos Industriales",description:"Aplicaciones industriales y procesos de producci\xf3n metal\xfargica",icon:"\ud83c\udfed",color:"#F59E0B"},{id:"ciencias-aplicadas",name:"Ciencias Aplicadas",description:"Aplicaciones pr\xe1cticas de los principios cient\xedficos",icon:"\u2699\ufe0f",color:"#8B5CF6"},{id:"materiales-avanzados",name:"Materiales Avanzados",description:"Materiales especializados y tecnolog\xedas emergentes",icon:"\ud83d\ude80",color:"#EF4444"}],Zo=[{id:"principiante",name:"Principiante",color:"#10B981",description:"Conceptos b\xe1sicos y fundamentales"},{id:"intermedio",name:"Intermedio",color:"#F59E0B",description:"Conceptos intermedios con aplicaciones"},{id:"avanzado",name:"Avanzado",color:"#EF4444",description:"Conceptos avanzados y especializados"}],Qo=(e,t)=>e.filter(e=>e.category===t),ea=(e,t)=>e.filter(e=>e.difficulty===t),ta=(e,t)=>{const n=t.toLowerCase();return e.filter(e=>e.tags.some(e=>e.toLowerCase().includes(n))||e.title.toLowerCase().includes(n)||e.description.toLowerCase().includes(n))};function na(){var e;const{user:t,loading:n}=Lo(),[o,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(null);(0,r.useEffect)(()=>{t&&l()},[t]),(0,r.useEffect)(()=>{const e=e=>{o&&!e.target.closest(".user-profile-dropdown")&&a(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);const l=async()=>{try{const{data:e}=await Qr.from("profiles").select("*").eq("id",t.id).single();s(e)}catch(e){console.error("Error cargando perfil:",e)}};return n||!t?null:(0,To.jsxs)("div",{className:"relative user-profile-dropdown",children:[(0,To.jsxs)("button",{onClick:()=>a(!o),className:"flex items-center space-x-2 text-blue-200 hover:text-white transition-colors",children:[(0,To.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center",children:null!==i&&void 0!==i&&i.avatar_url?(0,To.jsx)("img",{src:i.avatar_url,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover"}):(0,To.jsx)(Po,{className:"w-4 h-4 text-white"})}),(0,To.jsx)("span",{className:"hidden sm:block text-sm font-medium",children:(null===i||void 0===i?void 0:i.full_name)||(null===(e=t.email)||void 0===e?void 0:e.split("@")[0])})]}),o&&(0,To.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[(0,To.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center",children:null!==i&&void 0!==i&&i.avatar_url?(0,To.jsx)("img",{src:i.avatar_url,alt:"Avatar",className:"w-10 h-10 rounded-full object-cover"}):(0,To.jsx)(Po,{className:"w-5 h-5 text-white"})}),(0,To.jsxs)("div",{children:[(0,To.jsx)("p",{className:"font-medium text-gray-900",children:(null===i||void 0===i?void 0:i.full_name)||"Usuario"}),(0,To.jsx)("p",{className:"text-sm text-gray-500",children:t.email})]})]})}),(0,To.jsxs)("div",{className:"p-2",children:[(0,To.jsxs)("button",{disabled:!0,className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-gray-400 cursor-not-allowed opacity-50",children:[(0,To.jsx)(Po,{className:"w-4 h-4"}),(0,To.jsx)("span",{className:"line-through",children:"Mi Perfil"}),(0,To.jsx)("span",{className:"text-xs text-gray-500",children:"(No disponible)"})]}),(0,To.jsxs)("button",{disabled:!0,className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-gray-400 cursor-not-allowed opacity-50",children:[(0,To.jsx)(mo,{className:"w-4 h-4"}),(0,To.jsx)("span",{className:"line-through",children:"Mis Roadmaps"}),(0,To.jsx)("span",{className:"text-xs text-gray-500",children:"(No disponible)"})]}),(0,To.jsx)("hr",{className:"my-2"}),(0,To.jsxs)("button",{onClick:async()=>{try{await Qr.auth.signOut(),a(!1)}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}},className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[(0,To.jsx)(yo,{className:"w-4 h-4"}),(0,To.jsx)("span",{children:"Cerrar Sesi\xf3n"})]})]})]})]})}const ra=JSON.parse('[{"title":"Matem\xe1ticas","description":"Fundamentos matem\xe1ticos necesarios para la ingenier\xeda metal\xfargica. \xc1lgebra, c\xe1lculo, ecuaciones diferenciales.","icon":"\ud83d\udcd0","status":"active","link":"/roadmap/matematicas","category":"Ciencias B\xe1sicas"},{"title":"F\xedsica","description":"Principios f\xedsicos fundamentales aplicados a procesos metal\xfargicos. Mec\xe1nica, electromagnetismo, \xf3ptica.","icon":"\u269b\ufe0f","status":"active","link":"/roadmap/fisica","category":"Ciencias B\xe1sicas"},{"title":"Qu\xedmica","description":"Fundamentos qu\xedmicos para entender reacciones y transformaciones en metalurgia.","icon":"\ud83e\uddea","status":"active","link":"/roadmap/quimica","category":"Ciencias B\xe1sicas"},{"title":"Ciencia de Materiales","description":"Estudio de la estructura, propiedades y comportamiento de los materiales.","icon":"\ud83d\udd2c","status":"active","link":"/roadmap/cienciaMateriales","category":"Ciencias B\xe1sicas"},{"title":"Estad\xedstica y Probabilidad","description":"M\xe9todos estad\xedsticos para an\xe1lisis de datos y control de calidad en metalurgia.","icon":"\ud83d\udcca","status":"active","link":"/roadmap/estadistica","category":"Ciencias B\xe1sicas"},{"title":"M\xe9todos Num\xe9ricos","description":"T\xe9cnicas computacionales para resolver problemas complejos en metalurgia.","icon":"\ud83d\udcbb","status":"active","link":"/roadmap/metodosNumericos","category":"Ciencias B\xe1sicas"},{"title":"Termodin\xe1mica","description":"Fundamentos de termodin\xe1mica aplicada a procesos metal\xfargicos.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/termodinamica","category":"Ciencias B\xe1sicas"},{"title":"Mec\xe1nica","description":"Principios mec\xe1nicos aplicados a procesos de conformado y deformaci\xf3n.","icon":"\u2699\ufe0f","status":"active","link":"/roadmap/mecanica","category":"Ciencias B\xe1sicas"},{"title":"Transferencia de Calor","description":"Mecanismos de transferencia de calor en procesos metal\xfargicos.","icon":"\ud83c\udf21\ufe0f","status":"active","link":"/roadmap/transferenciaCalor","category":"Ciencias B\xe1sicas"},{"title":"Electromagnetismo","description":"Principios electromagn\xe9ticos aplicados a procesos metal\xfargicos.","icon":"\u26a1","status":"active","link":"/roadmap/electromagnetismo","category":"Ciencias B\xe1sicas"},{"title":"Fisicoqu\xedmica","description":"Interfase entre f\xedsica y qu\xedmica en procesos metal\xfargicos.","icon":"\ud83d\udd2c","status":"active","link":"/roadmap/fisicoquimica","category":"Ciencias B\xe1sicas"},{"title":"Electroqu\xedmica","description":"Procesos electroqu\xedmicos en metalurgia y corrosi\xf3n.","icon":"\u26a1","status":"active","link":"/roadmap/electroquimica","category":"Ciencias B\xe1sicas"},{"title":"Estructura Cristalina","description":"Organizaci\xf3n at\xf3mica y estructura cristalina de materiales met\xe1licos.","icon":"\ud83d\udc8e","status":"active","link":"/roadmap/estructuraCristalina","category":"Ciencias B\xe1sicas"},{"title":"Diagramas de Fase","description":"Representaci\xf3n gr\xe1fica de fases en equilibrio en sistemas met\xe1licos.","icon":"\ud83d\udcc8","status":"active","link":"/roadmap/diagramasFase","category":"Ciencias B\xe1sicas"},{"title":"Difusi\xf3n","description":"Procesos de difusi\xf3n at\xf3mica en materiales met\xe1licos.","icon":"\ud83d\udd04","status":"active","link":"/roadmap/difusion","category":"Ciencias B\xe1sicas"},{"title":"Transformaciones de Fase","description":"Cambios de fase y transformaciones microestructurales en metales.","icon":"\ud83d\udd04","status":"active","link":"/roadmap/transformacionesFase","category":"Ciencias B\xe1sicas"},{"title":"Propiedades Mec\xe1nicas","description":"Caracter\xedsticas mec\xe1nicas de materiales met\xe1licos.","icon":"\ud83d\udcaa","status":"active","link":"/roadmap/propiedadesMecanicas","category":"Ciencias B\xe1sicas"},{"title":"Mineralog\xeda de Menas","description":"Identificaci\xf3n y caracterizaci\xf3n de minerales en menas met\xe1licas.","icon":"\u26cf\ufe0f","status":"active","link":"/roadmap/mineralogiaMenas","category":"Extractiva"},{"title":"Preparaci\xf3n de Minerales","description":"Procesos de preparaci\xf3n y acondicionamiento de minerales.","icon":"\ud83c\udfd4\ufe0f","status":"active","link":"/roadmap/preparacionMinerales","category":"Extractiva"},{"title":"Conminuci\xf3n","description":"Reducci\xf3n de tama\xf1o de part\xedculas minerales.","icon":"\ud83d\udd28","status":"active","link":"/roadmap/conminucion","category":"Extractiva"},{"title":"Concentraci\xf3n por Flotaci\xf3n","description":"Separaci\xf3n de minerales por flotaci\xf3n espumosa.","icon":"\ud83e\udee7","status":"active","link":"/roadmap/concentracionFlotacion","category":"Extractiva"},{"title":"Separaci\xf3n Magn\xe9tica","description":"Concentraci\xf3n de minerales magn\xe9ticos.","icon":"\ud83e\uddf2","status":"active","link":"/roadmap/separacionMagnetica","category":"Extractiva"},{"title":"Separaci\xf3n Gravim\xe9trica","description":"Concentraci\xf3n por diferencias de densidad.","icon":"\u2696\ufe0f","status":"active","link":"/roadmap/separacionGravim\xe9trica","category":"Extractiva"},{"title":"Pirometalurgia","description":"Procesos metal\xfargicos a altas temperaturas.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/pirometalurgia","category":"Extractiva"},{"title":"Calcinaci\xf3n y Tostaci\xf3n","description":"Procesos de calentamiento en presencia de aire.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/calcinacionTostacion","category":"Extractiva"},{"title":"Fusi\xf3n de Matas","description":"Procesos de fusi\xf3n para separaci\xf3n de metales.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/fusionMatas","category":"Extractiva"},{"title":"Reducci\xf3n Carbot\xe9rmica","description":"Reducci\xf3n de \xf3xidos met\xe1licos con carbono.","icon":"\u26a1","status":"active","link":"/roadmap/reduccionCarbotermica","category":"Extractiva"},{"title":"Refinaci\xf3n Pirometal\xfargica","description":"Purificaci\xf3n de metales por procesos t\xe9rmicos.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/refinacionPirometalurgica","category":"Extractiva"},{"title":"Hidrometalurgia","description":"Procesos metal\xfargicos en medio acuoso.","icon":"\ud83d\udca7","status":"active","link":"/roadmap/hidrometalurgia","category":"Extractiva"},{"title":"Lixiviaci\xf3n","description":"Disoluci\xf3n selectiva de metales en soluciones acuosas.","icon":"\ud83d\udca7","status":"active","link":"/roadmap/lixiviacion","category":"Extractiva"},{"title":"Separaci\xf3n L\xedquido-S\xf3lido","description":"T\xe9cnicas de separaci\xf3n de fases l\xedquidas y s\xf3lidas.","icon":"\ud83d\udd0d","status":"active","link":"/roadmap/separacionLiquidoSolido","category":"Extractiva"},{"title":"Purificaci\xf3n de Soluciones","description":"Limpieza y purificaci\xf3n de soluciones metal\xfargicas.","icon":"\ud83e\uddea","status":"active","link":"/roadmap/purificacionSoluciones","category":"Extractiva"},{"title":"Precipitaci\xf3n","description":"Separaci\xf3n de metales por precipitaci\xf3n qu\xedmica.","icon":"\ud83c\udf0a","status":"active","link":"/roadmap/precipitacion","category":"Extractiva"},{"title":"Electrometalurgia","description":"Procesos metal\xfargicos que involucran electricidad.","icon":"\u26a1","status":"active","link":"/roadmap/electrometalurgia","category":"Extractiva"},{"title":"Electrodeposici\xf3n","description":"Deposici\xf3n de metales por procesos electrol\xedticos.","icon":"\u26a1","status":"active","link":"/roadmap/electrodeposicion","category":"Extractiva"},{"title":"Electr\xf3lisis","description":"Descomposici\xf3n de compuestos por corriente el\xe9ctrica.","icon":"\u26a1","status":"active","link":"/roadmap/electrolisis","category":"Extractiva"},{"title":"Corrosi\xf3n Electroqu\xedmica","description":"Mecanismos de corrosi\xf3n en medios electroqu\xedmicos.","icon":"\ud83d\udee1\ufe0f","status":"active","link":"/roadmap/corrosionElectroquimica","category":"Extractiva"},{"title":"Fundici\xf3n","description":"Procesos de fundici\xf3n y colada de metales.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/fundicion","category":"Transformativa"},{"title":"Dise\xf1o de Aleaciones","description":"Desarrollo y dise\xf1o de aleaciones met\xe1licas.","icon":"\ud83d\udd27","status":"active","link":"/roadmap/disenoAleaciones","category":"Transformativa"},{"title":"Procesos de Fundici\xf3n","description":"T\xe9cnicas y procesos de fundici\xf3n metal\xfargica.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/procesosFundicion","category":"Transformativa"},{"title":"Defectos de Fundici\xf3n","description":"Identificaci\xf3n y control de defectos en piezas fundidas.","icon":"\ud83d\udd0d","status":"active","link":"/roadmap/defectosFundicion","category":"Transformativa"},{"title":"Tratamientos de Modificaci\xf3n","description":"Modificaci\xf3n de microestructuras en metales fundidos.","icon":"\ud83d\udd27","status":"active","link":"/roadmap/tratamientosModificacion","category":"Transformativa"},{"title":"Conformado Mec\xe1nico","description":"Procesos de deformaci\xf3n pl\xe1stica de metales.","icon":"\ud83d\udd28","status":"active","link":"/roadmap/conformadoMecanico","category":"Transformativa"},{"title":"Laminaci\xf3n","description":"Proceso de conformado por laminaci\xf3n.","icon":"\ud83d\udccf","status":"active","link":"/roadmap/laminacion","category":"Transformativa"},{"title":"Forja","description":"Conformado por deformaci\xf3n pl\xe1stica a alta temperatura.","icon":"\ud83d\udd28","status":"active","link":"/roadmap/forja","category":"Transformativa"},{"title":"Extrusi\xf3n","description":"Proceso de conformado por extrusi\xf3n.","icon":"\ud83d\udd27","status":"active","link":"/roadmap/extrusion","category":"Transformativa"},{"title":"Trefilado","description":"Reducci\xf3n de di\xe1metro de alambres y barras.","icon":"\ud83d\udd27","status":"active","link":"/roadmap/trefilado","category":"Transformativa"},{"title":"Conformado de Chapas","description":"Procesos de conformado de l\xe1minas met\xe1licas.","icon":"\ud83d\udccb","status":"active","link":"/roadmap/conformadoChapas","category":"Transformativa"},{"title":"Tratamientos T\xe9rmicos","description":"Procesos de calentamiento y enfriamiento controlado.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/tratamientosTermicos","category":"Transformativa"},{"title":"Recocido","description":"Tratamiento t\xe9rmico de recocido para ablandamiento.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/recocido","category":"Transformativa"},{"title":"Normalizado","description":"Tratamiento t\xe9rmico de normalizado.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/normalizado","category":"Transformativa"},{"title":"Temple","description":"Tratamiento t\xe9rmico de temple para endurecimiento.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/temple","category":"Transformativa"},{"title":"Revenido","description":"Tratamiento t\xe9rmico de revenido para ajuste de propiedades.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/revenido","category":"Transformativa"},{"title":"Tratamientos Termoqu\xedmicos","description":"Procesos de difusi\xf3n de elementos en superficie.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/tratamientosTermoquimicos","category":"Transformativa"},{"title":"Soldadura y Uni\xf3n","description":"T\xe9cnicas de uni\xf3n de materiales met\xe1licos.","icon":"\ud83d\udd17","status":"active","link":"/roadmap/soldaduraUnion","category":"Transformativa"},{"title":"Procesos de Soldadura","description":"Diferentes procesos y t\xe9cnicas de soldadura.","icon":"\ud83d\udd17","status":"active","link":"/roadmap/procesosSoldadura","category":"Transformativa"},{"title":"Metalurgia de la Soldadura","description":"Cambios metal\xfargicos durante procesos de soldadura.","icon":"\ud83d\udd17","status":"active","link":"/roadmap/metalurgiaSoldadura","category":"Transformativa"},{"title":"MATLAB","description":"Software de computaci\xf3n num\xe9rica y an\xe1lisis de datos para ingenier\xeda metal\xfargica.","icon":"\ud83d\udcbb","status":"active","link":"/roadmap/matlab","category":"Herramientas Extractivas"},{"title":"Python","description":"Lenguaje de programaci\xf3n para an\xe1lisis de datos y modelado en metalurgia.","icon":"\ud83d\udc0d","status":"active","link":"/roadmap/python","category":"Herramientas Extractivas"},{"title":"R","description":"Lenguaje de programaci\xf3n para an\xe1lisis estad\xedstico y visualizaci\xf3n de datos.","icon":"\ud83d\udcca","status":"active","link":"/roadmap/r","category":"Herramientas Extractivas"},{"title":"Minitab","description":"Software estad\xedstico para control de calidad y dise\xf1o de experimentos.","icon":"\ud83d\udcc8","status":"active","link":"/roadmap/minitab","category":"Herramientas Extractivas"},{"title":"JMP","description":"Software de an\xe1lisis estad\xedstico y visualizaci\xf3n de datos.","icon":"\ud83d\udcca","status":"active","link":"/roadmap/jmp","category":"Herramientas Extractivas"},{"title":"Excel Avanzado","description":"Herramientas avanzadas de Excel para an\xe1lisis de datos metal\xfargicos.","icon":"\ud83d\udcca","status":"active","link":"/roadmap/excelAvanzado","category":"Herramientas Extractivas"},{"title":"HSC Chemistry","description":"Software para c\xe1lculos termodin\xe1micos y equilibrios qu\xedmicos.","icon":"\ud83e\uddea","status":"active","link":"/roadmap/hscChemistry","category":"Herramientas Extractivas"},{"title":"METSIM","description":"Software de simulaci\xf3n de procesos metal\xfargicos.","icon":"\ud83c\udfed","status":"active","link":"/roadmap/metsim","category":"Herramientas Extractivas"},{"title":"USIM PAC","description":"Software de simulaci\xf3n y optimizaci\xf3n de procesos metal\xfargicos.","icon":"\u2699\ufe0f","status":"active","link":"/roadmap/usimPac","category":"Herramientas Extractivas"},{"title":"LIMN","description":"Software de simulaci\xf3n de flujos de fluidos en procesos metal\xfargicos.","icon":"\ud83c\udf0a","status":"active","link":"/roadmap/limn","category":"Herramientas Extractivas"},{"title":"Whittle","description":"Software de optimizaci\xf3n de pit mining y planificaci\xf3n minera.","icon":"\u26cf\ufe0f","status":"active","link":"/roadmap/whittle","category":"Herramientas Extractivas"},{"title":"An\xe1lisis Multivariante","description":"T\xe9cnicas estad\xedsticas para an\xe1lisis de m\xfaltiples variables en metalurgia.","icon":"\ud83d\udcca","status":"active","link":"/roadmap/analisisMultivariante","category":"Herramientas Extractivas"},{"title":"Optimizaci\xf3n Lineal","description":"M\xe9todos de optimizaci\xf3n lineal aplicados a procesos metal\xfargicos.","icon":"\ud83d\udcd0","status":"active","link":"/roadmap/optimizacionLineal","category":"Herramientas Extractivas"},{"title":"Redes Neuronales","description":"Inteligencia artificial para modelado y predicci\xf3n en metalurgia.","icon":"\ud83e\udde0","status":"active","link":"/roadmap/redesNeuronales","category":"Herramientas Extractivas"},{"title":"Algoritmos Gen\xe9ticos","description":"Algoritmos de optimizaci\xf3n inspirados en evoluci\xf3n biol\xf3gica.","icon":"\ud83e\uddec","status":"active","link":"/roadmap/algoritmosGeneticos","category":"Herramientas Extractivas"},{"title":"Control Estad\xedstico","description":"T\xe9cnicas de control estad\xedstico de procesos metal\xfargicos.","icon":"\ud83d\udcca","status":"active","link":"/roadmap/controlEstadistico","category":"Herramientas Extractivas"},{"title":"Sistemas SCADA","description":"Sistemas de supervisi\xf3n, control y adquisici\xf3n de datos.","icon":"\ud83d\udda5\ufe0f","status":"active","link":"/roadmap/sistemasScada","category":"Herramientas Extractivas"},{"title":"DCS","description":"Sistemas de control distribuido para procesos industriales.","icon":"\u2699\ufe0f","status":"active","link":"/roadmap/dcs","category":"Herramientas Extractivas"},{"title":"Sensores","description":"Tecnolog\xedas de sensores para monitoreo de procesos metal\xfargicos.","icon":"\ud83d\udce1","status":"active","link":"/roadmap/sensores","category":"Herramientas Extractivas"},{"title":"Analizadores en L\xednea","description":"Equipos de an\xe1lisis autom\xe1tico en procesos metal\xfargicos.","icon":"\ud83d\udd2c","status":"active","link":"/roadmap/analizadoresLinea","category":"Herramientas Extractivas"},{"title":"Controladores PID","description":"Controladores proporcional-integral-derivativo para procesos metal\xfargicos.","icon":"\ud83c\udf9b\ufe0f","status":"active","link":"/roadmap/controladoresPid","category":"Herramientas Extractivas"},{"title":"AutoCAD","description":"Software de dise\xf1o asistido por computadora para ingenier\xeda metal\xfargica.","icon":"\ud83d\udcd0","status":"active","link":"/roadmap/autocad","category":"Herramientas Transformativas"},{"title":"SolidWorks","description":"Software de dise\xf1o 3D y modelado param\xe9trico.","icon":"\ud83d\udd27","status":"active","link":"/roadmap/solidworks","category":"Herramientas Transformativas"},{"title":"CATIA","description":"Software de dise\xf1o y fabricaci\xf3n asistida por computadora.","icon":"\ud83c\udfed","status":"active","link":"/roadmap/catia","category":"Herramientas Transformativas"},{"title":"Inventor","description":"Software de dise\xf1o 3D y simulaci\xf3n de productos.","icon":"\ud83d\udd27","status":"active","link":"/roadmap/inventor","category":"Herramientas Transformativas"},{"title":"Fusion 360","description":"Software de dise\xf1o 3D y fabricaci\xf3n en la nube.","icon":"\u2601\ufe0f","status":"active","link":"/roadmap/fusion360","category":"Herramientas Transformativas"},{"title":"ANSYS","description":"Software de an\xe1lisis por elementos finitos para ingenier\xeda.","icon":"\u26a1","status":"active","link":"/roadmap/ansys","category":"Herramientas Transformativas"},{"title":"ABAQUS","description":"Software de an\xe1lisis por elementos finitos y simulaci\xf3n.","icon":"\ud83d\udd2c","status":"active","link":"/roadmap/abaqus","category":"Herramientas Transformativas"},{"title":"COMSOL","description":"Software de simulaci\xf3n multiphysics para ingenier\xeda.","icon":"\ud83c\udf10","status":"active","link":"/roadmap/comsol","category":"Herramientas Transformativas"},{"title":"LS-DYNA","description":"Software de an\xe1lisis din\xe1mico no lineal por elementos finitos.","icon":"\ud83d\udca5","status":"active","link":"/roadmap/lsDyna","category":"Herramientas Transformativas"},{"title":"DEFORM","description":"Software de simulaci\xf3n de conformado de metales.","icon":"\ud83d\udd28","status":"active","link":"/roadmap/deform","category":"Herramientas Transformativas"},{"title":"ProCAST","description":"Software de simulaci\xf3n de procesos de fundici\xf3n.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/procast","category":"Herramientas Transformativas"},{"title":"MAGMA","description":"Software de simulaci\xf3n de fundici\xf3n y solidificaci\xf3n.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/magma","category":"Herramientas Transformativas"},{"title":"FLOW-3D","description":"Software de simulaci\xf3n de flujos de fluidos y metal fundido.","icon":"\ud83c\udf0a","status":"active","link":"/roadmap/flow3d","category":"Herramientas Transformativas"},{"title":"AnyCasting","description":"Software de simulaci\xf3n de procesos de fundici\xf3n.","icon":"\ud83d\udd25","status":"active","link":"/roadmap/anycasting","category":"Herramientas Transformativas"},{"title":"NovaFlow","description":"Software de simulaci\xf3n de flujos en procesos metal\xfargicos.","icon":"\ud83c\udf0a","status":"active","link":"/roadmap/novaflow","category":"Herramientas Transformativas"},{"title":"DICTRA","description":"Software de simulaci\xf3n de difusi\xf3n en materiales.","icon":"\ud83d\udd04","status":"active","link":"/roadmap/dictra","category":"Herramientas Transformativas"},{"title":"Thermo-Calc","description":"Software de c\xe1lculos termodin\xe1micos y diagramas de fase.","icon":"\ud83d\udcc8","status":"active","link":"/roadmap/thermocalc","category":"Herramientas Transformativas"},{"title":"JMatPro","description":"Software de c\xe1lculo de propiedades de materiales.","icon":"\ud83d\udd2c","status":"active","link":"/roadmap/jmatpro","category":"Herramientas Transformativas"},{"title":"MTDATA","description":"Software de bases de datos termodin\xe1micas.","icon":"\ud83d\udcca","status":"active","link":"/roadmap/mtdata","category":"Herramientas Transformativas"},{"title":"PANDAT","description":"Software de c\xe1lculo de diagramas de fase multicomponente.","icon":"\ud83d\udcc8","status":"active","link":"/roadmap/pandat","category":"Herramientas Transformativas"},{"title":"Metalograf\xeda Digital","description":"T\xe9cnicas digitales de an\xe1lisis microestructural de metales.","icon":"\ud83d\udd2c","status":"active","link":"/roadmap/metalografiaDigital","category":"Herramientas Transformativas"},{"title":"Ensayos Mec\xe1nicos","description":"T\xe9cnicas de caracterizaci\xf3n mec\xe1nica de materiales met\xe1licos.","icon":"\ud83d\udcaa","status":"active","link":"/roadmap/ensayosMecanicos","category":"Herramientas Transformativas"},{"title":"Ensayos No Destructivos","description":"T\xe9cnicas de inspecci\xf3n sin da\xf1ar el material.","icon":"\ud83d\udd0d","status":"active","link":"/roadmap/ensayosNoDestructivos","category":"Herramientas Transformativas"},{"title":"MES","description":"Sistemas de ejecuci\xf3n de manufactura para control de producci\xf3n.","icon":"\ud83c\udfed","status":"active","link":"/roadmap/mes","category":"Herramientas Transformativas"},{"title":"ERP","description":"Sistemas de planificaci\xf3n de recursos empresariales.","icon":"\ud83d\udcbc","status":"active","link":"/roadmap/erp","category":"Herramientas Transformativas"},{"title":"Lean Manufacturing","description":"Metodolog\xedas de manufactura esbelta para optimizaci\xf3n de procesos.","icon":"\u26a1","status":"active","link":"/roadmap/leanManufacturing","category":"Herramientas Transformativas"},{"title":"Six Sigma","description":"Metodolog\xeda de mejora de procesos y control de calidad.","icon":"\ud83d\udcca","status":"active","link":"/roadmap/sixSigma","category":"Herramientas Transformativas"}]'),oa=e=>{let{isOpen:t,onClose:n}=e;const o=ne(),{user:a}=Lo(),[i,s]=(0,r.useState)(""),[l,c]=(0,r.useState)("all"),[d,u]=(0,r.useState)([]),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)({}),[g,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&a&&(x(),y())},[t,a]);const x=async()=>{if(a){p(!0);try{const e=await eo.getUserRoadmaps(a.id);u(e)}catch(e){console.error("Error cargando roadmaps del usuario:",e)}finally{p(!1)}}},y=async()=>{if(a){v(!0);try{const t={};for(const n of ra)if("active"===n.status)try{const e=n.link.replace("/roadmap/","");console.log(`Cargando versiones para roadmap: ${e}`);const r=await eo.getUserRoadmapVersions(a.id,e);console.log(`Versiones del usuario para ${e}:`,r);const o=await eo.getRoadmapVersions(e);console.log(`Versiones p\xfablicas para ${e}:`,o);const i=[...r,...o];t[e]=i,console.log(`Total de versiones para ${e}:`,i.length)}catch(e){console.error(`Error cargando versiones para ${n.title}:`,e),t[n.link.replace("/roadmap/","")]=[]}console.log("Todas las versiones cargadas:",t),f(t)}catch(e){console.error("Error cargando versiones:",e)}finally{v(!1)}}};if(!t)return null;(()=>{const e={};ra.forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)})})();const b=ra.filter(e=>{const t=e.title.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase()),n="all"===l||e.category===l;return t&&n&&"active"===e.status}),w=e=>m[e]||[];return(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,To.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[(0,To.jsx)("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white p-6",children:(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"flex-1",children:[(0,To.jsx)("h2",{className:"text-xl font-bold mb-1",children:"Gestionar Roadmaps"}),(0,To.jsx)("p",{className:"text-blue-100 text-xs",children:"Edita versiones existentes o crea nuevas versiones"})]}),(0,To.jsx)("button",{onClick:n,className:"text-white hover:text-blue-100 transition-colors p-2 rounded-full hover:bg-white hover:bg-opacity-10",children:(0,To.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,To.jsxs)("div",{className:"p-6",children:[(0,To.jsx)("div",{className:"mb-6",children:(0,To.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,To.jsxs)("div",{className:"relative",children:[(0,To.jsx)("input",{type:"text",placeholder:"Buscar roadmaps...",value:i,onChange:e=>s(e.target.value),className:"w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,To.jsx)("svg",{className:"absolute left-3 top-3 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,To.jsx)("div",{children:(0,To.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,To.jsx)("option",{value:"all",children:"Todas las categor\xedas"}),(0,To.jsx)("option",{value:"Ciencias B\xe1sicas",children:"Ciencias B\xe1sicas"}),(0,To.jsx)("option",{value:"Extractiva",children:"Extractiva"}),(0,To.jsx)("option",{value:"Transformativa",children:"Transformativa"}),(0,To.jsx)("option",{value:"Herramientas Extractivas",children:"Herramientas Extractivas"}),(0,To.jsx)("option",{value:"Herramientas Transformativas",children:"Herramientas Transformativas"})]})})]})}),g?(0,To.jsxs)("div",{className:"text-center py-12",children:[(0,To.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,To.jsx)("p",{className:"text-gray-500",children:"Cargando roadmaps..."})]}):(0,To.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 max-h-[60vh] overflow-y-auto",children:b.map(e=>{const t=w(e.link.replace("/roadmap/",""));var r;const i=!!(r=e.link.replace("/roadmap/",""),w(r).find(e=>e.user_id===a.id));return(0,To.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,To.jsx)("div",{className:"bg-gray-50 p-3 border-b border-gray-200",children:(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("div",{className:"flex-shrink-0",children:(0,To.jsx)("span",{className:"text-2xl",children:e.icon})}),(0,To.jsxs)("div",{className:"flex-1",children:[(0,To.jsx)("h3",{className:"text-base font-bold text-gray-900 mb-1",children:e.title}),(0,To.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.description}),(0,To.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full font-medium",children:e.category})]})]})}),(0,To.jsxs)("div",{className:"p-3",children:[!i&&(0,To.jsx)("div",{className:"mb-3",children:(0,To.jsx)("button",{onClick:()=>(e=>{o(`/edit/${e}`),n()})(e.link.replace("/roadmap/","")),className:"w-full p-2 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all duration-200 cursor-pointer group",children:(0,To.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,To.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:(0,To.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("span",{className:"text-sm font-semibold text-blue-600 block",children:"Crear Nueva Versi\xf3n"}),(0,To.jsx)("span",{className:"text-xs text-gray-500",children:"Comienza desde cero"})]})]})})}),0===t.length?(0,To.jsxs)("div",{className:"text-center py-4 bg-gray-50 rounded-lg",children:[(0,To.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\udcda"}),(0,To.jsx)("p",{className:"text-gray-500 font-medium text-sm",children:"No hay versiones existentes"}),!i&&(0,To.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Usa el bot\xf3n de arriba para crear la primera versi\xf3n"})]}):(0,To.jsxs)("div",{children:[(0,To.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 mb-2 flex items-center",children:[(0,To.jsx)("svg",{className:"w-4 h-4 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Versiones (",t.length,")"]}),(0,To.jsx)("div",{className:"space-y-2",children:t.map(t=>{var r;const i=t.user_id===a.id;return(0,To.jsxs)("div",{onClick:()=>((e,t)=>{console.log("handleVersionSelect llamado con:",{roadmapType:e,version:t});const r=t.user_id===a.id;if(console.log("\xbfEs versi\xf3n del usuario?",r),r){const n=`/edit/${e}?version=${t.id}`;console.log("Navegando a:",n),o(n)}else{const n=`/edit/${e}?version=${t.id}&mode=proposal`;console.log("Navegando a (modo propuesta):",n),o(n)}n()})(e.link.replace("/roadmap/",""),t),className:"flex items-center justify-between p-2 border border-gray-200 rounded-lg hover:border-blue-300 hover:shadow-sm transition-all duration-200 cursor-pointer bg-white group",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("div",{className:"flex-shrink-0",children:i?(0,To.jsx)("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:(0,To.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}):(0,To.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:(0,To.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),(0,To.jsxs)("div",{className:"flex-1",children:[(0,To.jsx)("div",{className:"flex items-center space-x-2 mb-1",children:i?(0,To.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full font-medium",children:"Mi Versi\xf3n"}):(0,To.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full font-medium",children:"Versi\xf3n de Otro"})}),(0,To.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.description||`Versi\xf3n creada el ${new Date(t.created_at).toLocaleDateString()}`}),(0,To.jsx)("p",{className:"text-xs text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),(0,To.jsxs)("p",{className:"text-xs text-blue-900 font-semibold mt-1",children:["Votos: ",null!==(r=t.total_votes)&&void 0!==r?r:0]})]})]}),(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("span",{className:"text-xs font-medium text-gray-500 group-hover:text-blue-600 transition-colors",children:i?"Editar":"Proponer Cambios"}),(0,To.jsx)("svg",{className:"w-3 h-3 text-gray-400 group-hover:text-blue-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},t.id)})})]})]})]},e.link)})}),0===b.length&&(0,To.jsxs)("div",{className:"text-center py-12",children:[(0,To.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,To.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33"})})}),(0,To.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"No se encontraron roadmaps que coincidan con tu b\xfasqueda"}),(0,To.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Intenta ajustar los filtros de b\xfasqueda"})]})]})]})})};function aa(){Q();const e=ne(),{user:t,loading:n}=Lo(),[o,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1);return n?null:(0,To.jsxs)("nav",{className:"w-full bg-blue-950 z-[1000]",children:[(0,To.jsxs)("div",{className:"flex justify-between items-center w-full py-4 sm:py-6 px-4 sm:px-6",children:[(0,To.jsxs)(ot,{to:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity min-h-[4rem]",children:[(0,To.jsx)("img",{src:"/assets/logo.png",alt:"MetalRoadmap",className:"filter brightness-0 invert",style:{height:"4rem",width:"auto",objectFit:"contain",padding:"0.3rem"}}),(0,To.jsx)("h1",{className:"hidden sm:block text-4xl font-bold transition-all duration-500 cursor-pointer",style:{fontFamily:"'Great Vibes', cursive",fontSize:"1.5rem",lineHeight:"2rem",color:"#ffffff",padding:"0.3rem"},children:"San Antonio Abad"})]}),(0,To.jsx)("div",{className:"hidden md:block",children:(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("span",{className:"text-2xl filter grayscale",children:"\ud83e\udd16"}),(0,To.jsx)("span",{className:"text-blue-200 text-sm font-medium underline",children:"IA Tutor Pronto"})]})}),t&&(0,To.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,To.jsx)("span",{className:"text-xs sm:text-sm text-gray-400 cursor-not-allowed opacity-50 line-through",children:"Mis Roadmaps"}),(0,To.jsxs)("button",{onClick:()=>f(!0),className:"inline-flex items-center px-3 sm:px-5 py-2 bg-blue-800 text-white rounded-lg shadow-sm hover:shadow-md transition-all duration-300 border border-blue-700 hover:border-blue-600 hover:bg-blue-700 text-xs sm:text-sm font-medium whitespace-nowrap",style:{minWidth:"120px",justifyContent:"center"},children:[(0,To.jsx)("span",{className:"mr-1 sm:mr-2",children:"\ud83d\uddc2\ufe0f"}),(0,To.jsx)("span",{className:"hidden sm:inline",children:"Gestionar Roadmaps"}),(0,To.jsx)("span",{className:"sm:hidden",children:"Gestionar"})]}),(0,To.jsx)(na,{})]}),!t&&(0,To.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,To.jsxs)("button",{onClick:()=>a(!0),className:"px-2 sm:px-3 md:px-4 lg:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium bg-white text-gray-700 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 border border-gray-200 hover:border-gray-300 hover:bg-gray-50 whitespace-nowrap min-w-[80px] sm:min-w-[100px] md:min-w-[120px] lg:min-w-[140px]",children:[(0,To.jsx)("span",{className:"hidden sm:inline",children:"Iniciar sesi\xf3n"}),(0,To.jsx)("span",{className:"sm:hidden",children:"Iniciar"})]}),(0,To.jsxs)("button",{onClick:()=>a(!0),className:"px-2 sm:px-3 md:px-4 lg:px-6 py-2 sm:py-3 text-xs sm:text-sm font-medium bg-gray-900 text-white rounded-lg shadow-sm hover:shadow-md transition-all duration-300 hover:bg-gray-800 whitespace-nowrap min-w-[80px] sm:min-w-[100px] md:min-w-[120px] lg:min-w-[140px]",children:[(0,To.jsx)("span",{className:"hidden sm:inline",children:"Registrarse"}),(0,To.jsx)("span",{className:"sm:hidden",children:"Registro"})]})]})]}),o&&(0,To.jsx)("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40 p-4",children:(0,To.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-sm sm:max-w-md relative mx-4",children:[(0,To.jsx)("button",{onClick:()=>a(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-xl",children:"\xd7"}),(0,To.jsx)(Ao,{})]})}),m&&(0,To.jsx)(oa,{isOpen:m,onClose:()=>f(!1)}),i&&(0,To.jsx)("div",{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black bg-opacity-40",children:(0,To.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-md relative",children:[(0,To.jsx)("button",{onClick:()=>s(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-xl",children:"\xd7"}),(0,To.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Crear nuevo Roadmap"}),(0,To.jsx)("input",{type:"text",placeholder:"T\xedtulo",value:l,onChange:e=>c(e.target.value),className:"w-full mb-3 px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,To.jsx)("textarea",{placeholder:"Descripci\xf3n",value:d,onChange:e=>u(e.target.value),className:"w-full mb-4 px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,To.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,To.jsx)("button",{onClick:()=>s(!1),className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 text-gray-700",children:"Cancelar"}),(0,To.jsx)("button",{onClick:async()=>{if(l){p(!0);try{const n=t.id,{data:r,error:o}=await Qr.from("roadmaps").insert([{title:l,description:d,user_id:n}]).select();if(o)throw o;r&&r[0]&&(s(!1),c(""),u(""),e(`/edit/${r[0].id}`))}catch(n){alert("Error al crear roadmap: "+n.message)}finally{p(!1)}}},disabled:h||!l,className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white font-semibold disabled:bg-gray-300",children:h?"Creando...":"Crear"})]})]})}),(0,To.jsx)("style",{jsx:!0,children:"\n        h1:hover {\n          background: linear-gradient(270deg, #6e7b8b, #bfa14c, #6e7b8b);\n          background-size: 1000% 1000%;\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n          animation: shine 3s linear infinite;\n        }\n\n        @keyframes shine {\n          0% {\n            background-position: 0% 50%;\n          }\n          50% {\n            background-position: 100% 50%;\n          }\n          100% {\n            background-position: 0% 50%;\n          }\n        }\n      "})]})}function ia(){return(0,To.jsx)("div",{})}function sa(){return(0,To.jsx)("section",{className:"max-w-5xl mx-auto px-6 sm:px-8 lg:px-20 mb-12 mt-12",children:(0,To.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 border border-gray-100 text-center",children:[(0,To.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\xbfQu\xe9 es un Roadmap?"}),(0,To.jsx)("p",{className:"text-gray-700 mb-2 max-w-3xl mx-auto",children:"Un roadmap es una gu\xeda visual que te ayuda a entender y organizar los conceptos clave de una disciplina. Aqu\xed encontrar\xe1s mapas mentales interactivos para cada \xe1rea de la ingenier\xeda metal\xfargica."}),(0,To.jsxs)("ul",{className:"list-disc pl-6 text-gray-700 max-w-2xl mx-auto text-left",children:[(0,To.jsx)("li",{children:"Visualiza relaciones entre conceptos."}),(0,To.jsx)("li",{children:"Accede a recursos recomendados."}),(0,To.jsx)("li",{children:"Descubre rutas de aprendizaje sugeridas."})]})]})})}function la(){return null}function ca(){const e=ne(),{user:t}=Lo(),[n,o]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&s&&(o(!1),i(!0),l(!1))},[t,s]);const c=(()=>{const e={};return ra.forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)}),e})(),d=(n,r)=>(0,To.jsxs)("div",{children:[(0,To.jsxs)("div",{className:"relative mb-6",children:[(0,To.jsx)("div",{className:"absolute top-1/2 left-0 right-0 border-t border-indigo-400",style:{left:"calc(-50vw + 50%)",right:"calc(-50vw + 50%)"}}),(0,To.jsx)("div",{className:"text-center",children:(0,To.jsx)("h2",{className:"text-sm font-bold text-indigo-800 border border-indigo-400 rounded-xl px-3 py-1 bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 inline-block relative z-10",children:n})})]}),(0,To.jsxs)("div",{className:"mb-6",children:[(0,To.jsx)("div",{className:"grid grid-cols-1 gap-2 px-4 sm:grid-cols-2 sm:px-8 lg:grid-cols-3 lg:px-32 xl:grid-cols-4 xl:px-40 2xl:grid-cols-5 2xl:px-48 3xl:grid-cols-5 3xl:px-56",children:r.map((t,r)=>(0,To.jsxs)("div",{onClick:()=>(t=>{"active"===t.status?e(t.link):alert(`Pr\xf3ximamente: ${t.title} - Esta funcionalidad estar\xe1 disponible pronto!`)})(t),className:"p-2 rounded-lg shadow-md hover:shadow-lg transition cursor-pointer transform hover:scale-102 duration-200 border hover:border-indigo-700 "+("coming-soon"===t.status?"bg-slate-100 border-slate-300 opacity-90":"bg-white border-indigo-200"),children:[(0,To.jsxs)("h3",{className:"text-sm font-semibold mb-1 "+("coming-soon"===t.status?"text-slate-600":"text-slate-900"),children:[(0,To.jsx)("span",{className:"coming-soon"===t.status?"grayscale":"",children:t.icon})," ",t.title]}),(0,To.jsx)("p",{className:"text-xs mb-1 "+("coming-soon"===t.status?"text-slate-500":"text-slate-600"),style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:t.description})]},`${n}-${r}`))}),(0,To.jsx)("div",{className:"flex justify-center mt-4",children:(0,To.jsxs)("button",{onClick:()=>{t?i(!0):(l(!0),o(!0))},className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold rounded-lg shadow-lg hover:from-green-600 hover:to-blue-600 transition-all duration-200 transform hover:scale-105 text-sm",children:[(0,To.jsx)("span",{className:"mr-2",children:"\u2728"}),(0,To.jsx)("span",{className:"hidden sm:inline",children:"Gestionar Roadmaps"}),(0,To.jsx)("span",{className:"sm:hidden",children:"Gestionar"})]})})]})]},n);return(0,To.jsxs)("div",{className:"w-full min-h-screen bg-gradient-to-r from-blue-100 via-indigo-100 to-blue-200",children:[(0,To.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 lg:px-32 xl:px-40 2xl:px-48 3xl:px-56",children:[(0,To.jsx)(la,{}),(0,To.jsxs)("div",{className:"pt-4 pb-4 lg:mb-12 xl:mb-16 2xl:mb-20 3xl:mb-24",children:[(0,To.jsx)("div",{className:"text-left sm:text-center lg:text-center xl:text-center 2xl:text-center 3xl:text-center px-4 sm:px-8 lg:px-32 xl:px-40 2xl:px-48 3xl:px-56",children:(0,To.jsxs)("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold mb-4 bg-gradient-to-r from-purple-600 via-yellow-500 to-blue-800 bg-clip-text text-transparent animate-gradient-x select-none pointer-events-none lg:py-4 xl:py-6 2xl:py-8 3xl:py-10",children:[(0,To.jsx)("span",{className:"block sm:hidden",children:"MetalRoad Ing. Metalurgistas"}),(0,To.jsx)("span",{className:"hidden sm:block",children:"MetalRoadmap para Ingenieros Metal\xfargicos"})]})}),(0,To.jsx)("div",{className:"text-left sm:text-center px-4 sm:px-8 lg:px-32 xl:px-40 2xl:px-48 3xl:px-56",children:(0,To.jsx)("p",{className:"text-xs sm:text-sm md:text-base text-slate-700",children:"Explora los mejores recursos y gu\xedas para convertirte en un experto en ingenier\xeda metal\xfargica. Cada tarjeta representa un roadmap \xfanico con recursos valiosos."})})]})]}),(0,To.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 lg:px-32 xl:px-40 2xl:px-48 3xl:px-56",children:(0,To.jsxs)("div",{className:"p-0 pb-4",children:[d("Ciencias B\xe1sicas",c["Ciencias B\xe1sicas"]||[]),d("Extractiva",c.Extractiva||[]),d("Transformativa",c.Transformativa||[]),d("Herramientas Extractivas",c["Herramientas Extractivas"]||[]),d("Herramientas Transformativas",c["Herramientas Transformativas"]||[])]})}),n&&(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,To.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md relative",children:[(0,To.jsx)("button",{onClick:()=>{o(!1),l(!1)},className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-3xl font-bold leading-none focus:outline-none",style:{lineHeight:"1",width:"2.5rem",height:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"}),(0,To.jsx)(Ao,{onClose:()=>{o(!1),l(!1)}})]})}),(0,To.jsx)(oa,{isOpen:a,onClose:()=>i(!1)})]})}function da(e){if("string"===typeof e||"number"===typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=da(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ua=n(443);const ha=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"===typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!==typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,o,a);return a},pa=e=>e?ha(e):ha;const{useDebugValue:ma}=r,{useSyncExternalStoreWithSelector:fa}=ua,ga=e=>e;function va(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ga,n=arguments.length>2?arguments[2]:void 0;const r=fa(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ma(r),r}const xa=(e,t)=>{const n=pa(e),r=function(e){return va(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(r,n),r};function ya(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var ba={value:()=>{}};function wa(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new ka(r)}function ka(e){this._=e}function ja(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function Sa(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=ba,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}ka.prototype=wa.prototype={constructor:ka,on:function(e,t){var n,r,o=this._,a=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),i=-1,s=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++i<s;)if(n=(e=a[i]).type)o[n]=Sa(o[n],e.name,t);else if(null==t)for(n in o)o[n]=Sa(o[n],e.name,null);return this}for(;++i<s;)if((n=(e=a[i]).type)&&(n=ja(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ka(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};const Na=wa;function Ca(){}function _a(e){return null==e?Ca:function(){return this.querySelector(e)}}function Ea(){return[]}function Pa(e){return null==e?Ea:function(){return this.querySelectorAll(e)}}function Ta(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function Ma(e){return function(){return this.matches(e)}}function Ra(e){return function(t){return t.matches(e)}}var La=Array.prototype.find;function Aa(){return this.firstElementChild}var Oa=Array.prototype.filter;function za(){return Array.from(this.children)}function Ia(e){return new Array(e.length)}function $a(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Da(e,t,n,r,o,a){for(var i,s=0,l=t.length,c=a.length;s<c;++s)(i=t[s])?(i.__data__=a[s],r[s]=i):n[s]=new $a(e,a[s]);for(;s<l;++s)(i=t[s])&&(o[s]=i)}function Ba(e,t,n,r,o,a,i){var s,l,c,d=new Map,u=t.length,h=a.length,p=new Array(u);for(s=0;s<u;++s)(l=t[s])&&(p[s]=c=i.call(l,l.__data__,s,t)+"",d.has(c)?o[s]=l:d.set(c,l));for(s=0;s<h;++s)c=i.call(e,a[s],s,a)+"",(l=d.get(c))?(r[s]=l,l.__data__=a[s],d.delete(c)):n[s]=new $a(e,a[s]);for(s=0;s<u;++s)(l=t[s])&&d.get(p[s])===l&&(o[s]=l)}function Fa(e){return e.__data__}function Ha(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Ua(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}$a.prototype={constructor:$a,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var qa="http://www.w3.org/1999/xhtml";const Wa={svg:"http://www.w3.org/2000/svg",xhtml:qa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Va(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Wa.hasOwnProperty(t)?{space:Wa[t],local:e}:e}function Ya(e){return function(){this.removeAttribute(e)}}function Ka(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xa(e,t){return function(){this.setAttribute(e,t)}}function Ga(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ja(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Za(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ei(e){return function(){this.style.removeProperty(e)}}function ti(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ni(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ri(e,t){return e.style.getPropertyValue(t)||Qa(e).getComputedStyle(e,null).getPropertyValue(t)}function oi(e){return function(){delete this[e]}}function ai(e,t){return function(){this[e]=t}}function ii(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function si(e){return e.trim().split(/^|\s+/)}function li(e){return e.classList||new ci(e)}function ci(e){this._node=e,this._names=si(e.getAttribute("class")||"")}function di(e,t){for(var n=li(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function ui(e,t){for(var n=li(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function hi(e){return function(){di(this,e)}}function pi(e){return function(){ui(this,e)}}function mi(e,t){return function(){(t.apply(this,arguments)?di:ui)(this,e)}}function fi(){this.textContent=""}function gi(e){return function(){this.textContent=e}}function vi(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function xi(){this.innerHTML=""}function yi(e){return function(){this.innerHTML=e}}function bi(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function wi(){this.nextSibling&&this.parentNode.appendChild(this)}function ki(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ji(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===qa&&t.documentElement.namespaceURI===qa?t.createElement(e):t.createElementNS(n,e)}}function Si(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ni(e){var t=Va(e);return(t.local?Si:ji)(t)}function Ci(){return null}function _i(){var e=this.parentNode;e&&e.removeChild(this)}function Ei(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pi(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ti(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function Mi(e,t,n){return function(){var r,o=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var i=0,s=o.length;i<s;++i)if((r=o[i]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function Ri(e,t,n){var r=Qa(e),o=r.CustomEvent;"function"===typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Li(e,t){return function(){return Ri(this,e,t)}}function Ai(e,t){return function(){return Ri(this,e,t.apply(this,arguments))}}ci.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Oi=[null];function zi(e,t){this._groups=e,this._parents=t}function Ii(){return new zi([[document.documentElement]],Oi)}zi.prototype=Ii.prototype={constructor:zi,select:function(e){"function"!==typeof e&&(e=_a(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i,s=t[o],l=s.length,c=r[o]=new Array(l),d=0;d<l;++d)(a=s[d])&&(i=e.call(a,a.__data__,d,s))&&("__data__"in a&&(i.__data__=a.__data__),c[d]=i);return new zi(r,this._parents)},selectAll:function(e){e="function"===typeof e?Ta(e):Pa(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i,s=t[a],l=s.length,c=0;c<l;++c)(i=s[c])&&(r.push(e.call(i,i.__data__,c,s)),o.push(i));return new zi(r,o)},selectChild:function(e){return this.select(null==e?Aa:function(e){return function(){return La.call(this.children,e)}}("function"===typeof e?e:Ra(e)))},selectChildren:function(e){return this.selectAll(null==e?za:function(e){return function(){return Oa.call(this.children,e)}}("function"===typeof e?e:Ra(e)))},filter:function(e){"function"!==typeof e&&(e=Ma(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],s=i.length,l=r[o]=[],c=0;c<s;++c)(a=i[c])&&e.call(a,a.__data__,c,i)&&l.push(a);return new zi(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Fa);var n,r=t?Ba:Da,o=this._parents,a=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var i=a.length,s=new Array(i),l=new Array(i),c=new Array(i),d=0;d<i;++d){var u=o[d],h=a[d],p=h.length,m=Ha(e.call(u,u&&u.__data__,d,o)),f=m.length,g=l[d]=new Array(f),v=s[d]=new Array(f);r(u,h,g,v,c[d]=new Array(p),m,t);for(var x,y,b=0,w=0;b<f;++b)if(x=g[b]){for(b>=w&&(w=b+1);!(y=v[w])&&++w<f;);x._next=y||null}}return(s=new zi(s,o))._enter=l,s._exit=c,s},enter:function(){return new zi(this._enter||this._groups.map(Ia),this._parents)},exit:function(){return new zi(this._exit||this._groups.map(Ia),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,a=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?a.remove():n(a),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),l=0;l<i;++l)for(var c,d=n[l],u=r[l],h=d.length,p=s[l]=new Array(h),m=0;m<h;++m)(c=d[m]||u[m])&&(p[m]=c);for(;l<o;++l)s[l]=n[l];return new zi(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,i=o[a];--a>=0;)(r=o[a])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ua);for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i,s=n[a],l=s.length,c=o[a]=new Array(l),d=0;d<l;++d)(i=s[d])&&(c[d]=i);c.sort(t)}return new zi(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],i=0,s=a.length;i<s;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this},attr:function(e,t){var n=Va(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Ka:Ya:"function"===typeof t?n.local?Za:Ja:n.local?Ga:Xa)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ei:"function"===typeof t?ni:ti)(e,t,null==n?"":n)):ri(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?oi:"function"===typeof t?ii:ai)(e,t)):this.node()[e]},classed:function(e,t){var n=si(e+"");if(arguments.length<2){for(var r=li(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"===typeof t?mi:t?hi:pi)(n,t))},text:function(e){return arguments.length?this.each(null==e?fi:("function"===typeof e?vi:gi)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?xi:("function"===typeof e?bi:yi)(e)):this.node().innerHTML},raise:function(){return this.each(wi)},lower:function(){return this.each(ki)},append:function(e){var t="function"===typeof e?e:Ni(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"===typeof e?e:Ni(e),r=null==t?Ci:"function"===typeof t?t:_a(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(_i)},clone:function(e){return this.select(e?Pi:Ei)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),i=a.length;if(!(arguments.length<2)){for(s=t?Mi:Ti,r=0;r<i;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,d=s.length;c<d;++c)for(r=0,l=s[c];r<i;++r)if((o=a[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?Ai:Li)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],a=0,i=o.length;a<i;++a)(r=o[a])&&(yield r)}};const $i=Ii;function Di(e){return"string"===typeof e?new zi([[document.querySelector(e)]],[document.documentElement]):new zi([[e]],Oi)}const Bi={passive:!1},Fi={capture:!0,passive:!1};function Hi(e){e.stopImmediatePropagation()}function Ui(e){e.preventDefault(),e.stopImmediatePropagation()}function qi(e){var t=e.document.documentElement,n=Di(e).on("dragstart.drag",Ui,Fi);"onselectstart"in t?n.on("selectstart.drag",Ui,Fi):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Wi(e,t){var n=e.document.documentElement,r=Di(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ui,Fi),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Vi(e){return((e=Math.exp(e))+1/e)/2}const Yi=function e(t,n,r){function o(e,o){var a,i,s=e[0],l=e[1],c=e[2],d=o[0],u=o[1],h=o[2],p=d-s,m=u-l,f=p*p+m*m;if(f<1e-12)i=Math.log(h/c)/t,a=function(e){return[s+e*p,l+e*m,c*Math.exp(t*e*i)]};else{var g=Math.sqrt(f),v=(h*h-c*c+r*f)/(2*c*n*g),x=(h*h-c*c-r*f)/(2*h*n*g),y=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(x*x+1)-x);i=(b-y)/t,a=function(e){var r,o=e*i,a=Vi(y),d=c/(n*g)*(a*(r=t*o+y,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(y));return[s+d*p,l+d*m,c*a/Vi(t*o+y)]}}return a.duration=1e3*i*t/Math.SQRT2,a}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);function Ki(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}var Xi,Gi,Ji=0,Zi=0,Qi=0,es=0,ts=0,ns=0,rs="object"===typeof performance&&performance.now?performance:Date,os="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function as(){return ts||(os(is),ts=rs.now()+ns)}function is(){ts=0}function ss(){this._call=this._time=this._next=null}function ls(e,t,n){var r=new ss;return r.restart(e,t,n),r}function cs(){ts=(es=rs.now())+ns,Ji=Zi=0;try{!function(){as(),++Ji;for(var e,t=Xi;t;)(e=ts-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ji}()}finally{Ji=0,function(){var e,t,n=Xi,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Xi=t);Gi=e,us(r)}(),ts=0}}function ds(){var e=rs.now(),t=e-es;t>1e3&&(ns-=t,es=e)}function us(e){Ji||(Zi&&(Zi=clearTimeout(Zi)),e-ts>24?(e<1/0&&(Zi=setTimeout(cs,e-rs.now()-ns)),Qi&&(Qi=clearInterval(Qi))):(Qi||(es=rs.now(),Qi=setInterval(ds,1e3)),Ji=1,os(cs)))}function hs(e,t,n){var r=new ss;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}ss.prototype=ls.prototype={constructor:ss,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?as():+n)+(null==t?0:+t),this._next||Gi===this||(Gi?Gi._next=this:Xi=this,Gi=this),this._call=e,this._time=n,us()},stop:function(){this._call&&(this._call=null,this._time=1/0,us())}};var ps=Na("start","end","cancel","interrupt"),ms=[];function fs(e,t,n,r,o,a){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function a(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}function i(a){var c,d,u,h;if(1!==n.state)return l();for(c in o)if((h=o[c]).name===n.name){if(3===h.state)return hs(i);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(hs(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,i=r.length;++a<i;)r[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=ls(a,0,n.time)}(e,n,{name:t,index:r,group:o,on:ps,tween:ms,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function gs(e,t){var n=xs(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function vs(e,t){var n=xs(e,t);if(n.state>3)throw new Error("too late; already running");return n}function xs(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ys(e,t){var n,r,o,a=e.__transition,i=!0;if(a){for(o in t=null==t?null:t+"",a)(n=a[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]):i=!1;i&&delete e.__transition}}function bs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ws,ks=180/Math.PI,js={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ss(e,t,n,r,o,a){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*ks,skewX:Math.atan(l)*ks,scaleX:i,scaleY:s}}function Ns(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(a,i){var s=[],l=[];return a=e(a),i=e(i),function(e,r,o,a,i,s){if(e!==o||r!==a){var l=i.push("translate(",null,t,null,n);s.push({i:l-4,x:bs(e,o)},{i:l-2,x:bs(r,a)})}else(o||a)&&i.push("translate("+o+t+a+n)}(a.translateX,a.translateY,i.translateX,i.translateY,s,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:bs(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(a.rotate,i.rotate,s,l),function(e,t,n,a){e!==t?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:bs(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(a.skewX,i.skewX,s,l),function(e,t,n,r,a,i){if(e!==n||t!==r){var s=a.push(o(a)+"scale(",null,",",null,")");i.push({i:s-4,x:bs(e,n)},{i:s-2,x:bs(t,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,i.scaleX,i.scaleY,s,l),a=i=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var Cs=Ns(function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?js:Ss(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),_s=Ns(function(e){return null==e?js:(ws||(ws=document.createElementNS("http://www.w3.org/2000/svg","g")),ws.setAttribute("transform",e),(e=ws.transform.baseVal.consolidate())?Ss((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):js)},", ",")",")");function Es(e,t){var n,r;return function(){var o=vs(this,e),a=o.tween;if(a!==n)for(var i=0,s=(r=n=a).length;i<s;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}o.tween=r}}function Ps(e,t,n){var r,o;if("function"!==typeof n)throw new Error;return function(){var a=vs(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=s;break}l===c&&o.push(s)}a.tween=o}}function Ts(e,t,n){var r=e._id;return e.each(function(){var e=vs(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return xs(e,r).value[t]}}function Ms(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rs(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ls(){}var As=.7,Os=1/As,zs="\\s*([+-]?\\d+)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ds=/^#([0-9a-f]{3,8})$/,Bs=new RegExp(`^rgb\\(${zs},${zs},${zs}\\)$`),Fs=new RegExp(`^rgb\\(${$s},${$s},${$s}\\)$`),Hs=new RegExp(`^rgba\\(${zs},${zs},${zs},${Is}\\)$`),Us=new RegExp(`^rgba\\(${$s},${$s},${$s},${Is}\\)$`),qs=new RegExp(`^hsl\\(${Is},${$s},${$s}\\)$`),Ws=new RegExp(`^hsla\\(${Is},${$s},${$s},${Is}\\)$`),Vs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ys(){return this.rgb().formatHex()}function Ks(){return this.rgb().formatRgb()}function Xs(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ds.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Gs(t):3===n?new Qs(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Js(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Js(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Bs.exec(e))?new Qs(t[1],t[2],t[3],1):(t=Fs.exec(e))?new Qs(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Hs.exec(e))?Js(t[1],t[2],t[3],t[4]):(t=Us.exec(e))?Js(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=qs.exec(e))?al(t[1],t[2]/100,t[3]/100,1):(t=Ws.exec(e))?al(t[1],t[2]/100,t[3]/100,t[4]):Vs.hasOwnProperty(e)?Gs(Vs[e]):"transparent"===e?new Qs(NaN,NaN,NaN,0):null}function Gs(e){return new Qs(e>>16&255,e>>8&255,255&e,1)}function Js(e,t,n,r){return r<=0&&(e=t=n=NaN),new Qs(e,t,n,r)}function Zs(e,t,n,r){return 1===arguments.length?((o=e)instanceof Ls||(o=Xs(o)),o?new Qs((o=o.rgb()).r,o.g,o.b,o.opacity):new Qs):new Qs(e,t,n,null==r?1:r);var o}function Qs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function el(){return`#${ol(this.r)}${ol(this.g)}${ol(this.b)}`}function tl(){const e=nl(this.opacity);return`${1===e?"rgb(":"rgba("}${rl(this.r)}, ${rl(this.g)}, ${rl(this.b)}${1===e?")":`, ${e})`}`}function nl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ol(e){return((e=rl(e))<16?"0":"")+e.toString(16)}function al(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new sl(e,t,n,r)}function il(e){if(e instanceof sl)return new sl(e.h,e.s,e.l,e.opacity);if(e instanceof Ls||(e=Xs(e)),!e)return new sl;if(e instanceof sl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,l=(a+o)/2;return s?(i=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+o:2-a-o,i*=60):s=l>0&&l<1?0:i,new sl(i,s,l,e.opacity)}function sl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ll(e){return(e=(e||0)%360)<0?e+360:e}function cl(e){return Math.max(0,Math.min(1,e||0))}function dl(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function ul(e,t,n,r,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*n+(1+3*e+3*a-3*i)*r+i*o)/6}Ms(Ls,Xs,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ys,formatHex:Ys,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return il(this).formatHsl()},formatRgb:Ks,toString:Ks}),Ms(Qs,Zs,Rs(Ls,{brighter(e){return e=null==e?Os:Math.pow(Os,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?As:Math.pow(As,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qs(rl(this.r),rl(this.g),rl(this.b),nl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:el,formatHex:el,formatHex8:function(){return`#${ol(this.r)}${ol(this.g)}${ol(this.b)}${ol(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:tl,toString:tl})),Ms(sl,function(e,t,n,r){return 1===arguments.length?il(e):new sl(e,t,n,null==r?1:r)},Rs(Ls,{brighter(e){return e=null==e?Os:Math.pow(Os,e),new sl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?As:Math.pow(As,e),new sl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Qs(dl(e>=240?e-240:e+120,o,r),dl(e,o,r),dl(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new sl(ll(this.h),cl(this.s),cl(this.l),nl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nl(this.opacity);return`${1===e?"hsl(":"hsla("}${ll(this.h)}, ${100*cl(this.s)}%, ${100*cl(this.l)}%${1===e?")":`, ${e})`}`}}));const hl=e=>()=>e;function pl(e,t){return function(n){return e+n*t}}function ml(e){return 1===(e=+e)?fl:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):hl(isNaN(t)?n:t)}}function fl(e,t){var n=t-e;return n?pl(e,n):hl(isNaN(e)?t:e)}const gl=function e(t){var n=ml(t);function r(e,t){var r=n((e=Zs(e)).r,(t=Zs(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),i=fl(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=a(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function vl(e){return function(t){var n,r,o=t.length,a=new Array(o),i=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=Zs(t[n]),a[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return a=e(a),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=i(e),r.b=s(e),r+""}}}vl(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],a=e[r+1],i=r>0?e[r-1]:2*o-a,s=r<t-1?e[r+2]:2*a-o;return ul((n-r/t)*t,i,o,a,s)}}),vl(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],a=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return ul((n-r/t)*t,o,a,i,s)}});var xl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yl=new RegExp(xl.source,"g");function bl(e,t){var n,r,o,a=xl.lastIndex=yl.lastIndex=0,i=-1,s=[],l=[];for(e+="",t+="";(n=xl.exec(e))&&(r=yl.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,l.push({i:i,x:bs(n,r)})),a=yl.lastIndex;return a<t.length&&(o=t.slice(a),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function wl(e,t){var n;return("number"===typeof t?bs:t instanceof Xs?gl:(n=Xs(t))?(t=n,gl):bl)(e,t)}function kl(e){return function(){this.removeAttribute(e)}}function jl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sl(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function Nl(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function Cl(e,t,n){var r,o,a;return function(){var i,s,l=n(this);if(null!=l)return(i=this.getAttribute(e))===(s=l+"")?null:i===r&&s===o?a:(o=s,a=t(r=i,l));this.removeAttribute(e)}}function _l(e,t,n){var r,o,a;return function(){var i,s,l=n(this);if(null!=l)return(i=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:i===r&&s===o?a:(o=s,a=t(r=i,l));this.removeAttributeNS(e.space,e.local)}}function El(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Pl(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Tl(e,t){return function(){gs(this,e).delay=+t.apply(this,arguments)}}function Ml(e,t){return t=+t,function(){gs(this,e).delay=t}}function Rl(e,t){return function(){vs(this,e).duration=+t.apply(this,arguments)}}function Ll(e,t){return t=+t,function(){vs(this,e).duration=t}}var Al=$i.prototype.constructor;function Ol(e){return function(){this.style.removeProperty(e)}}var zl=0;function Il(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function $l(){return++zl}var Dl=$i.prototype;Il.prototype=function(e){return $i().transition(e)}.prototype={constructor:Il,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=_a(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s,l,c=r[i],d=c.length,u=a[i]=new Array(d),h=0;h<d;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),u[h]=l,fs(u[h],t,n,h,u,xs(s,n)));return new Il(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Pa(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var l,c=r[s],d=c.length,u=0;u<d;++u)if(l=c[u]){for(var h,p=e.call(l,l.__data__,u,c),m=xs(l,n),f=0,g=p.length;f<g;++f)(h=p[f])&&fs(h,t,n,f,p,m);a.push(p),i.push(l)}return new Il(a,i,t,n)},selectChild:Dl.selectChild,selectChildren:Dl.selectChildren,filter:function(e){"function"!==typeof e&&(e=Ma(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],s=i.length,l=r[o]=[],c=0;c<s;++c)(a=i[c])&&e.call(a,a.__data__,c,i)&&l.push(a);return new Il(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var l,c=t[s],d=n[s],u=c.length,h=i[s]=new Array(u),p=0;p<u;++p)(l=c[p]||d[p])&&(h[p]=l);for(;s<r;++s)i[s]=t[s];return new Il(i,this._parents,this._name,this._id)},selection:function(){return new Al(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=$l(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i,s=r[a],l=s.length,c=0;c<l;++c)if(i=s[c]){var d=xs(i,t);fs(i,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Il(r,this._parents,e,n)},call:Dl.call,nodes:Dl.nodes,node:Dl.node,size:Dl.size,empty:Dl.empty,each:Dl.each,on:function(e,t){var n=this._id;return arguments.length<2?xs(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,a=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?gs:vs;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}(n,e,t))},attr:function(e,t){var n=Va(e),r="transform"===n?_s:wl;return this.attrTween(e,"function"===typeof t?(n.local?_l:Cl)(n,r,Ts(this,"attr."+e,t)):null==t?(n.local?jl:kl)(n):(n.local?Nl:Sl)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Va(e);return this.tween(n,(r.local?El:Pl)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?Cs:wl;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var a=ri(this,e),i=(this.style.removeProperty(e),ri(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}(e,r)).on("end.style."+e,Ol(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,o,a;return function(){var i=ri(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=ri(this,e)),i===l?null:i===r&&l===o?a:(o=l,a=t(r=i,s))}}(e,r,Ts(this,"style."+e,t))).each(function(e,t){var n,r,o,a,i="style."+t,s="end."+i;return function(){var l=vs(this,e),c=l.on,d=null==l.value[i]?a||(a=Ol(t)):void 0;c===n&&o===d||(r=(n=c).copy()).on(s,o=d),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,a=n+"";return function(){var i=ri(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function a(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Ts(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=xs(this.node(),n).tween,a=0,i=o.length;a<i;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((null==t?Es:Ps)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Tl:Ml)(t,e)):xs(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Rl:Ll)(t,e)):xs(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){vs(this,e).ease=t}}(t,e)):xs(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;vs(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},l={value:function(){0===--o&&a()}};n.each(function(){var n=vs(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===o&&a()})},[Symbol.iterator]:Dl[Symbol.iterator]};var Bl={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Fl(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}$i.prototype.interrupt=function(e){return this.each(function(){ys(this,e)})},$i.prototype.transition=function(e){var t,n;e instanceof Il?(t=e._id,e=e._name):(t=$l(),(n=Bl).time=as(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i,s=r[a],l=s.length,c=0;c<l;++c)(i=s[c])&&fs(i,e,t,c,s,n||Fl(i,t));return new Il(r,this._parents,e,t)};const Hl=e=>()=>e;function Ul(e,t){let{sourceEvent:n,target:r,transform:o,dispatch:a}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function ql(e,t,n){this.k=e,this.x=t,this.y=n}ql.prototype={constructor:ql,scale:function(e){return 1===e?this:new ql(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ql(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Wl=new ql(1,0,0);function Vl(e){e.stopImmediatePropagation()}function Yl(e){e.preventDefault(),e.stopImmediatePropagation()}function Kl(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function Xl(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Gl(){return this.__zoom||Wl}function Jl(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Zl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ql(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function ec(){var e,t,n,r=Kl,o=Xl,a=Ql,i=Jl,s=Zl,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=Yi,h=Na("start","zoom","end"),p=0,m=10;function f(e){e.property("__zoom",Gl).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",S).filter(s).on("touchstart.zoom",N).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",_).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new ql(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new ql(e.k,r,o)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function y(e,t,n,r){e.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,a=arguments,i=b(e,a).event(r),s=o.apply(e,a),l=null==n?x(s):"function"===typeof n?n.apply(e,a):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),d=e.__zoom,h="function"===typeof t?t.apply(e,a):t,p=u(d.invert(l).concat(c/d.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=p(e),n=c/t[2];e=new ql(n,l[0]-t[0]*n,l[1]-t[1]*n)}i.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.apply(this,arguments)){var s=b(this,n).event(e),d=this.__zoom,u=Math.max(l[0],Math.min(l[1],d.k*Math.pow(2,i.apply(this,arguments)))),h=Ki(e);if(s.wheel)s.mouse[0][0]===h[0]&&s.mouse[0][1]===h[1]||(s.mouse[1]=d.invert(s.mouse[0]=h)),clearTimeout(s.wheel);else{if(d.k===u)return;s.mouse=[h,d.invert(h)],ys(this),s.start()}Yl(e),s.wheel=setTimeout(function(){s.wheel=null,s.end()},150),s.zoom("mouse",a(v(g(d,u),s.mouse[0],s.mouse[1]),s.extent,c))}}function j(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];if(!n&&r.apply(this,arguments)){var s=e.currentTarget,l=b(this,o,!0).event(e),d=Di(e.view).on("mousemove.zoom",function(e){if(Yl(e),!l.moved){var t=e.clientX-h,n=e.clientY-m;l.moved=t*t+n*n>p}l.event(e).zoom("mouse",a(v(l.that.__zoom,l.mouse[0]=Ki(e,s),l.mouse[1]),l.extent,c))},!0).on("mouseup.zoom",function(e){d.on("mousemove.zoom mouseup.zoom",null),Wi(e.view,l.moved),Yl(e),l.event(e).end()},!0),u=Ki(e,s),h=e.clientX,m=e.clientY;qi(e.view),Vl(e),l.mouse=[u,this.__zoom.invert(u)],ys(this),l.start()}}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var s=this.__zoom,l=Ki(e.changedTouches?e.changedTouches[0]:e,this),u=s.invert(l),h=s.k*(e.shiftKey?.5:2),p=a(v(g(s,h),l,u),o.apply(this,n),c);Yl(e),d>0?Di(this).transition().duration(d).call(y,p,l,e):Di(this).call(f.transform,p,l,e)}}function N(n){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];if(r.apply(this,arguments)){var s,l,c,d,u=n.touches,h=u.length,p=b(this,a,n.changedTouches.length===h).event(n);for(Vl(n),l=0;l<h;++l)d=[d=Ki(c=u[l],this),this.__zoom.invert(d),c.identifier],p.touch0?p.touch1||p.touch0[2]===d[2]||(p.touch1=d,p.taps=0):(p.touch0=d,s=!0,p.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(p.taps<2&&(t=d[0],e=setTimeout(function(){e=null},500)),ys(this),p.start())}}function C(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,i,s,l,d=b(this,n).event(e),u=e.changedTouches,h=u.length;for(Yl(e),o=0;o<h;++o)s=Ki(i=u[o],this),d.touch0&&d.touch0[2]===i.identifier?d.touch0[0]=s:d.touch1&&d.touch1[2]===i.identifier&&(d.touch1[0]=s);if(i=d.that.__zoom,d.touch1){var p=d.touch0[0],m=d.touch0[1],f=d.touch1[0],x=d.touch1[1],y=(y=f[0]-p[0])*y+(y=f[1]-p[1])*y,w=(w=x[0]-m[0])*w+(w=x[1]-m[1])*w;i=g(i,Math.sqrt(y/w)),s=[(p[0]+f[0])/2,(p[1]+f[1])/2],l=[(m[0]+x[0])/2,(m[1]+x[1])/2]}else{if(!d.touch0)return;s=d.touch0[0],l=d.touch0[1]}d.zoom("touch",a(v(i,s,l),d.extent,c))}}function _(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(this.__zooming){var i,s,l=b(this,o).event(e),c=e.changedTouches,d=c.length;for(Vl(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<d;++i)s=c[i],l.touch0&&l.touch0[2]===s.identifier?delete l.touch0:l.touch1&&l.touch1[2]===s.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(s=Ki(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<m)){var u=Di(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return f.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",Gl),e!==o?y(e,t,n,r):o.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()})},f.scaleBy=function(e,t,n,r){f.scaleTo(e,function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)},n,r)},f.scaleTo=function(e,t,n,r){f.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?x(e):"function"===typeof n?n.apply(this,arguments):n,s=r.invert(i),l="function"===typeof t?t.apply(this,arguments):t;return a(v(g(r,l),i,s),e,c)},n,r)},f.translateBy=function(e,t,n,r){f.transform(e,function(){return a(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)},null,r)},f.translateTo=function(e,t,n,r,i){f.transform(e,function(){var e=o.apply(this,arguments),i=this.__zoom,s=null==r?x(e):"function"===typeof r?r.apply(this,arguments):r;return a(Wl.translate(s[0],s[1]).scale(i.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)},r,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Di(this.that).datum();h.call(e,this.that,new Ul(e,{sourceEvent:this.sourceEvent,target:f,type:e,transform:this.that.__zoom,dispatch:h}),t)}},f.wheelDelta=function(e){return arguments.length?(i="function"===typeof e?e:Hl(+e),f):i},f.filter=function(e){return arguments.length?(r="function"===typeof e?e:Hl(!!e),f):r},f.touchable=function(e){return arguments.length?(s="function"===typeof e?e:Hl(!!e),f):s},f.extent=function(e){return arguments.length?(o="function"===typeof e?e:Hl([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),f):o},f.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],f):[l[0],l[1]]},f.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],f):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},f.constrain=function(e){return arguments.length?(a=e,f):a},f.duration=function(e){return arguments.length?(d=+e,f):d},f.interpolate=function(e){return arguments.length?(u=e,f):u},f.on=function(){var e=h.on.apply(h,arguments);return e===h?f:e},f.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,f):Math.sqrt(p)},f.tapDistance=function(e){return arguments.length?(m=+e,f):m},f}ql.prototype;const tc=e=>()=>e;function nc(e,t){let{sourceEvent:n,subject:r,target:o,identifier:a,active:i,x:s,y:l,dx:c,dy:d,dispatch:u}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}function rc(e){return!e.ctrlKey&&!e.button}function oc(){return this.parentNode}function ac(e,t){return null==t?{x:e.x,y:e.y}:t}function ic(){return navigator.maxTouchPoints||"ontouchstart"in this}nc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};n(950);const sc=(0,r.createContext)(null),lc=sc.Provider,cc=e=>`Node type "${e}" not found. Using fallback type "default".`,dc=()=>"The React Flow parent container needs a width and a height to render the graph.",uc=()=>"Only child nodes can use a parent extent.",hc=()=>"Can't create edge. An edge needs a source and a target.",pc=e=>`Marker type "${e}" doesn't exist.`,mc=(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,fc=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",gc=e=>`Edge type "${e}" not found. Using fallback type "default".`,vc=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,xc=(()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001")();function yc(e,t){const n=(0,r.useContext)(sc);if(null===n)throw new Error(xc);return va(n,e,t)}const bc=()=>{const e=(0,r.useContext)(sc);if(null===e)throw new Error(xc);return(0,r.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},wc=e=>e.userSelectionActive?"none":"all";function kc(e){let{position:t,children:n,className:o,style:a,...i}=e;const s=yc(wc),l=`${t}`.split("-");return r.createElement("div",{className:da(["react-flow__panel",o,...l]),style:{...a,pointerEvents:s},...i},n)}function jc(e){let{proOptions:t,position:n="bottom-right"}=e;return t?.hideAttribution?null:r.createElement(kc,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},r.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var Sc=(0,r.memo)(e=>{let{x:t,y:n,label:o,labelStyle:a={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:d,className:u,...h}=e;const p=(0,r.useRef)(null),[m,f]=(0,r.useState)({x:0,y:0,width:0,height:0}),g=da(["react-flow__edge-textwrapper",u]);return(0,r.useEffect)(()=>{if(p.current){const e=p.current.getBBox();f({x:e.x,y:e.y,width:e.width,height:e.height})}},[o]),"undefined"!==typeof o&&o?r.createElement("g",{transform:`translate(${t-m.width/2} ${n-m.height/2})`,className:g,visibility:m.width?"visible":"hidden",...h},i&&r.createElement("rect",{width:m.width+2*l[0],x:-l[0],y:-l[1],height:m.height+2*l[1],className:"react-flow__edge-textbg",style:s,rx:c,ry:c}),r.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:p,style:a},o),d):null});const Nc=e=>({width:e.offsetWidth,height:e.offsetHeight}),Cc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},_c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1?arguments[1]:void 0;return{x:Cc(e.x,t[0][0],t[1][0]),y:Cc(e.y,t[0][1],t[1][1])}},Ec=(e,t,n)=>e<t?Cc(Math.abs(e-t),1,50)/50:e>n?-Cc(Math.abs(e-n),1,50)/50:0,Pc=(e,t)=>[20*Ec(e.x,35,t.width-35),20*Ec(e.y,35,t.height-35)],Tc=e=>e.getRootNode?.()||window?.document,Mc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Rc=e=>{let{x:t,y:n,width:r,height:o}=e;return{x:t,y:n,x2:t+r,y2:n+o}},Lc=e=>{let{x:t,y:n,x2:r,y2:o}=e;return{x:t,y:n,width:r-t,height:o-n}},Ac=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Oc=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},zc=e=>!isNaN(e)&&isFinite(e),Ic=Symbol.for("internals"),$c=["Enter"," ","Escape"],Dc=(e,t)=>{0};function Bc(e){const t=(e=>"nativeEvent"in e)(e)?e.nativeEvent:e,n=t.composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Fc=e=>"clientX"in e,Hc=(e,t)=>{const n=Fc(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},Uc=()=>"undefined"!==typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0,qc=e=>{let{id:t,path:n,labelX:o,labelY:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:p,markerStart:m,interactionWidth:f=20}=e;return r.createElement(r.Fragment,null,r.createElement("path",{id:t,style:h,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:p,markerStart:m}),f&&r.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),i&&zc(o)&&zc(a)?r.createElement(Sc,{x:o,y:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u}):null)};qc.displayName="BaseEdge";function Wc(e,t,n){return void 0===n?n:r=>{const o=t().edges.find(t=>t.id===e);o&&n(r,{...o})}}function Vc(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o}=e;const a=Math.abs(r-t)/2,i=r<t?r+a:r-a,s=Math.abs(o-n)/2;return[i,o<n?o+s:o-s,a,s]}function Yc(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o,sourceControlX:a,sourceControlY:i,targetControlX:s,targetControlY:l}=e;const c=.125*t+.375*a+.375*s+.125*r,d=.125*n+.375*i+.375*l+.125*o;return[c,d,Math.abs(c-t),Math.abs(d-n)]}var Kc,Xc,Gc,Jc,Zc,Qc;function ed(e){let{pos:t,x1:n,y1:r,x2:o,y2:a}=e;return t===Qc.Left||t===Qc.Right?[.5*(n+o),r]:[n,.5*(r+a)]}function td(e){let{sourceX:t,sourceY:n,sourcePosition:r=Qc.Bottom,targetX:o,targetY:a,targetPosition:i=Qc.Top}=e;const[s,l]=ed({pos:r,x1:t,y1:n,x2:o,y2:a}),[c,d]=ed({pos:i,x1:o,y1:a,x2:t,y2:n}),[u,h,p,m]=Yc({sourceX:t,sourceY:n,targetX:o,targetY:a,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${t},${n} C${s},${l} ${c},${d} ${o},${a}`,u,h,p,m]}!function(e){e.Strict="strict",e.Loose="loose"}(Kc||(Kc={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Xc||(Xc={})),function(e){e.Partial="partial",e.Full="full"}(Gc||(Gc={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(Jc||(Jc={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Zc||(Zc={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(Qc||(Qc={}));const nd=(0,r.memo)(e=>{let{sourceX:t,sourceY:n,targetX:o,targetY:a,sourcePosition:i=Qc.Bottom,targetPosition:s=Qc.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:f,markerStart:g,interactionWidth:v}=e;const[x,y,b]=td({sourceX:t,sourceY:n,sourcePosition:i,targetX:o,targetY:a,targetPosition:s});return r.createElement(qc,{path:x,labelX:y,labelY:b,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:f,markerStart:g,interactionWidth:v})});nd.displayName="SimpleBezierEdge";const rd={[Qc.Left]:{x:-1,y:0},[Qc.Right]:{x:1,y:0},[Qc.Top]:{x:0,y:-1},[Qc.Bottom]:{x:0,y:1}},od=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function ad(e){let{source:t,sourcePosition:n=Qc.Bottom,target:r,targetPosition:o=Qc.Top,center:a,offset:i}=e;const s=rd[n],l=rd[o],c={x:t.x+s.x*i,y:t.y+s.y*i},d={x:r.x+l.x*i,y:r.y+l.y*i},u=(e=>{let{source:t,sourcePosition:n=Qc.Bottom,target:r}=e;return n===Qc.Left||n===Qc.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1}})({source:c,sourcePosition:n,target:d}),h=0!==u.x?"x":"y",p=u[h];let m,f,g=[];const v={x:0,y:0},x={x:0,y:0},[y,b,w,k]=Vc({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(s[h]*l[h]===-1){m=a.x??y,f=a.y??b;const e=[{x:m,y:c.y},{x:m,y:d.y}],t=[{x:c.x,y:f},{x:d.x,y:f}];g=s[h]===p?"x"===h?e:t:"x"===h?t:e}else{const e=[{x:c.x,y:d.y}],a=[{x:d.x,y:c.y}];if(g="x"===h?s.x===p?a:e:s.y===p?e:a,n===o){const e=Math.abs(t[h]-r[h]);if(e<=i){const n=Math.min(i-1,i-e);s[h]===p?v[h]=(c[h]>t[h]?-1:1)*n:x[h]=(d[h]>r[h]?-1:1)*n}}if(n!==o){const t="x"===h?"y":"x",n=s[h]===l[t],r=c[t]>d[t],o=c[t]<d[t];(1===s[h]&&(!n&&r||n&&o)||1!==s[h]&&(!n&&o||n&&r))&&(g="x"===h?e:a)}const u={x:c.x+v.x,y:c.y+v.y},y={x:d.x+x.x,y:d.y+x.y};Math.max(Math.abs(u.x-g[0].x),Math.abs(y.x-g[0].x))>=Math.max(Math.abs(u.y-g[0].y),Math.abs(y.y-g[0].y))?(m=(u.x+y.x)/2,f=g[0].y):(m=g[0].x,f=(u.y+y.y)/2)}return[[t,{x:c.x+v.x,y:c.y+v.y},...g,{x:d.x+x.x,y:d.y+x.y},r],m,f,w,k]}function id(e){let{sourceX:t,sourceY:n,sourcePosition:r=Qc.Bottom,targetX:o,targetY:a,targetPosition:i=Qc.Top,borderRadius:s=5,centerX:l,centerY:c,offset:d=20}=e;const[u,h,p,m,f]=ad({source:{x:t,y:n},sourcePosition:r,target:{x:o,y:a},targetPosition:i,center:{x:l,y:c},offset:d}),g=u.reduce((e,t,n)=>{let r="";return r=n>0&&n<u.length-1?function(e,t,n,r){const o=Math.min(od(e,t)/2,od(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i)return`L ${a+o*(e.x<n.x?-1:1)},${i}Q ${a},${i} ${a},${i+o*(e.y<n.y?1:-1)}`;const s=e.x<n.x?1:-1;return`L ${a},${i+o*(e.y<n.y?-1:1)}Q ${a},${i} ${a+o*s},${i}`}(u[n-1],t,u[n+1],s):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=r},"");return[g,h,p,m,f]}const sd=(0,r.memo)(e=>{let{sourceX:t,sourceY:n,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,sourcePosition:p=Qc.Bottom,targetPosition:m=Qc.Top,markerEnd:f,markerStart:g,pathOptions:v,interactionWidth:x}=e;const[y,b,w]=id({sourceX:t,sourceY:n,sourcePosition:p,targetX:o,targetY:a,targetPosition:m,borderRadius:v?.borderRadius,offset:v?.offset});return r.createElement(qc,{path:y,labelX:b,labelY:w,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:f,markerStart:g,interactionWidth:x})});sd.displayName="SmoothStepEdge";const ld=(0,r.memo)(e=>r.createElement(sd,{...e,pathOptions:(0,r.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));function cd(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o}=e;const[a,i,s,l]=Vc({sourceX:t,sourceY:n,targetX:r,targetY:o});return[`M ${t},${n}L ${r},${o}`,a,i,s,l]}ld.displayName="StepEdge";const dd=(0,r.memo)(e=>{let{sourceX:t,sourceY:n,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:p,markerStart:m,interactionWidth:f}=e;const[g,v,x]=cd({sourceX:t,sourceY:n,targetX:o,targetY:a});return r.createElement(qc,{path:g,labelX:v,labelY:x,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:h,markerEnd:p,markerStart:m,interactionWidth:f})});function ud(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function hd(e){let{pos:t,x1:n,y1:r,x2:o,y2:a,c:i}=e;switch(t){case Qc.Left:return[n-ud(n-o,i),r];case Qc.Right:return[n+ud(o-n,i),r];case Qc.Top:return[n,r-ud(r-a,i)];case Qc.Bottom:return[n,r+ud(a-r,i)]}}function pd(e){let{sourceX:t,sourceY:n,sourcePosition:r=Qc.Bottom,targetX:o,targetY:a,targetPosition:i=Qc.Top,curvature:s=.25}=e;const[l,c]=hd({pos:r,x1:t,y1:n,x2:o,y2:a,c:s}),[d,u]=hd({pos:i,x1:o,y1:a,x2:t,y2:n,c:s}),[h,p,m,f]=Yc({sourceX:t,sourceY:n,targetX:o,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:u});return[`M${t},${n} C${l},${c} ${d},${u} ${o},${a}`,h,p,m,f]}dd.displayName="StraightEdge";const md=(0,r.memo)(e=>{let{sourceX:t,sourceY:n,targetX:o,targetY:a,sourcePosition:i=Qc.Bottom,targetPosition:s=Qc.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:f,markerStart:g,pathOptions:v,interactionWidth:x}=e;const[y,b,w]=pd({sourceX:t,sourceY:n,sourcePosition:i,targetX:o,targetY:a,targetPosition:s,curvature:v?.curvature});return r.createElement(qc,{path:y,labelX:b,labelY:w,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:f,markerStart:g,interactionWidth:x})});md.displayName="BezierEdge";const fd=(0,r.createContext)(null),gd=fd.Provider;fd.Consumer;const vd=e=>{let{source:t,sourceHandle:n,target:r,targetHandle:o}=e;return`reactflow__edge-${t}${n||""}-${r}${o||""}`},xd=(e,t)=>{if("undefined"===typeof e)return"";if("string"===typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`},yd=(e,t)=>{if(!e.source||!e.target)return Dc(0,hc()),t;let n;var r;return n="id"in(r=e)&&"source"in r&&"target"in r?{...e}:{...e,id:vd(e)},((e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))(n,t)?t:t.concat(n)},bd=(e,t,n,r)=>{let{x:o,y:a}=e,[i,s,l]=t,[c,d]=r;const u={x:(o-i)/l,y:(a-s)/l};return n?{x:c*Math.round(u.x/c),y:d*Math.round(u.y/d)}:u},wd=(e,t)=>{let{x:n,y:r}=e,[o,a,i]=t;return{x:n*i+o,y:r*i+a}},kd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},jd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const{x:r,y:o}=kd(n,t).positionAbsolute;return Mc(e,Rc({x:r,y:o,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Lc(n)},Sd=function(e,t){let[n,r,o]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0];const l={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},c=[];return e.forEach(e=>{const{width:t,height:n,selectable:r=!0,hidden:o=!1}=e;if(i&&!r||o)return!1;const{positionAbsolute:d}=kd(e,s),u={x:d.x,y:d.y,width:t||0,height:n||0},h=Oc(l,u);("undefined"===typeof t||"undefined"===typeof n||null===t||null===n||a&&h>0||h>=(t||0)*(n||0)||e.dragging)&&c.push(e)}),c},Nd=(e,t)=>{const n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},Cd=function(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1;const i=t/(e.width*(1+a)),s=n/(e.height*(1+a)),l=Math.min(i,s),c=Cc(l,r,o);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},_d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)};function Ed(e,t,n,r){return(t[n]||[]).reduce((t,o)=>(`${e.id}-${o.id}-${n}`!==r&&t.push({id:o.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),t),[])}const Pd={source:null,target:null,sourceHandle:null,targetHandle:null},Td=()=>({handleDomNode:null,isValid:!1,connection:Pd,endHandle:null});function Md(e,t,n,r,o,a,i){const s="target"===o,l=i.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),c={...Td(),handleDomNode:l};if(l){const e=Rd(void 0,l),o=l.getAttribute("data-nodeid"),i=l.getAttribute("data-handleid"),d=l.classList.contains("connectable"),u=l.classList.contains("connectableend"),h={source:s?o:n,sourceHandle:s?i:r,target:s?n:o,targetHandle:s?r:i};c.connection=h;d&&u&&(t===Kc.Strict?s&&"source"===e||!s&&"target"===e:o!==n||i!==r)&&(c.endHandle={nodeId:o,handleId:i,type:e},c.isValid=a(h))}return c}function Rd(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Ld(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Ad(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Od(e){let{event:t,handleId:n,nodeId:r,onConnect:o,isTarget:a,getState:i,setState:s,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:d}=e;const u=Tc(t.target),{connectionMode:h,domNode:p,autoPanOnConnect:m,connectionRadius:f,onConnectStart:g,panBy:v,getNodes:x,cancelConnection:y}=i();let b,w=0;const{x:k,y:j}=Hc(t),S=u?.elementFromPoint(k,j),N=Rd(c,S),C=p?.getBoundingClientRect();if(!C||!N)return;let _,E=Hc(t,C),P=!1,T=null,M=!1,R=null;const L=function(e){let{nodes:t,nodeId:n,handleId:r,handleType:o}=e;return t.reduce((e,t)=>{if(t[Ic]){const{handleBounds:a}=t[Ic];let i=[],s=[];a&&(i=Ed(t,a,"source",`${n}-${r}-${o}`),s=Ed(t,a,"target",`${n}-${r}-${o}`)),e.push(...i,...s)}return e},[])}({nodes:x(),nodeId:r,handleId:n,handleType:N}),A=()=>{if(!m)return;const[e,t]=Pc(E,C);v({x:e,y:t}),w=requestAnimationFrame(A)};function O(e){const{transform:t}=i();E=Hc(e,C);const{handle:o,validHandleResult:c}=function(e,t,n,r,o,a){const{x:i,y:s}=Hc(e),l=t.elementsFromPoint(i,s).find(e=>e.classList.contains("react-flow__handle"));if(l){const e=l.getAttribute("data-nodeid");if(e){const t=Rd(void 0,l),r=l.getAttribute("data-handleid"),i=a({nodeId:e,id:r,type:t});if(i){const a=o.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:a?.x||n.x,y:a?.y||n.y},validHandleResult:i}}}}let c=[],d=1/0;if(o.forEach(e=>{const t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){const n=a(e);t<=d&&(t<d?c=[{handle:e,validHandleResult:n}]:t===d&&c.push({handle:e,validHandleResult:n}),d=t)}}),!c.length)return{handle:null,validHandleResult:Td()};if(1===c.length)return c[0];const u=c.some(e=>{let{validHandleResult:t}=e;return t.isValid}),h=c.some(e=>{let{handle:t}=e;return"target"===t.type});return c.find(e=>{let{handle:t,validHandleResult:n}=e;return h?"target"===t.type:!u||n.isValid})||c[0]}(e,u,bd(E,t,!1,[1,1]),f,L,e=>Md(e,h,r,n,a?"target":"source",l,u));if(b=o,P||(A(),P=!0),R=c.handleDomNode,T=c.connection,M=c.isValid,s({connectionPosition:b&&M?wd({x:b.x,y:b.y},t):E,connectionStatus:Ad(!!b,M),connectionEndHandle:c.endHandle}),!b&&!M&&!R)return Ld(_);T.source!==T.target&&R&&(Ld(_),_=R,R.classList.add("connecting","react-flow__handle-connecting"),R.classList.toggle("valid",M),R.classList.toggle("react-flow__handle-valid",M))}function z(e){(b||R)&&T&&M&&o?.(T),i().onConnectEnd?.(e),c&&d?.(e),Ld(_),y(),cancelAnimationFrame(w),P=!1,M=!1,T=null,R=null,u.removeEventListener("mousemove",O),u.removeEventListener("mouseup",z),u.removeEventListener("touchmove",O),u.removeEventListener("touchend",z)}s({connectionPosition:E,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:N,connectionStartHandle:{nodeId:r,handleId:n,type:N},connectionEndHandle:null}),g?.(t,{nodeId:r,handleId:n,handleType:N}),u.addEventListener("mousemove",O),u.addEventListener("mouseup",z),u.addEventListener("touchmove",O),u.addEventListener("touchend",z)}const zd=()=>!0,Id=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),$d=(0,r.forwardRef)((e,t)=>{let{type:n="source",position:o=Qc.Top,isValidConnection:a,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:u,className:h,onMouseDown:p,onTouchStart:m,...f}=e;const g=c||null,v="target"===n,x=bc(),y=(0,r.useContext)(fd),{connectOnClick:b,noPanClassName:w}=yc(Id,ya),{connecting:k,clickConnecting:j}=yc(((e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:a,connectionClickStartHandle:i}=r;return{connecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n||a?.nodeId===e&&a?.handleId===t&&a?.type===n,clickConnecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n}})(y,g,n),ya);y||x.getState().onError?.("010",fc());const S=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=x.getState(),o={...t,...e};if(r){const{edges:e,setEdges:t}=x.getState();t(yd(o,e))}n?.(o),d?.(o)},N=e=>{if(!y)return;const t=Fc(e);s&&(t&&0===e.button||!t)&&Od({event:e,handleId:g,nodeId:y,onConnect:S,isTarget:v,getState:x.getState,setState:x.setState,isValidConnection:a||x.getState().isValidConnection||zd}),t?p?.(e):m?.(e)};return r.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":o,"data-id":`${y}-${g}-${n}`,className:da(["react-flow__handle",`react-flow__handle-${o}`,"nodrag",w,h,{source:!v,target:v,connectable:i,connectablestart:s,connectableend:l,connecting:j,connectionindicator:i&&(s&&!k||l&&k)}]),onMouseDown:N,onTouchStart:N,onClick:b?e=>{const{onClickConnectStart:t,onClickConnectEnd:r,connectionClickStartHandle:o,connectionMode:i,isValidConnection:l}=x.getState();if(!y||!o&&!s)return;if(!o)return t?.(e,{nodeId:y,handleId:g,handleType:n}),void x.setState({connectionClickStartHandle:{nodeId:y,type:n,handleId:g}});const c=Tc(e.target),d=a||l||zd,{connection:u,isValid:h}=Md({nodeId:y,id:g,type:n},i,o.nodeId,o.handleId||null,o.type,d,c);h&&S(u),r?.(e),x.setState({connectionClickStartHandle:null})}:void 0,ref:t,...f},u)});$d.displayName="Handle";var Dd=(0,r.memo)($d);const Bd=e=>{let{data:t,isConnectable:n,targetPosition:o=Qc.Top,sourcePosition:a=Qc.Bottom}=e;return r.createElement(r.Fragment,null,r.createElement(Dd,{type:"target",position:o,isConnectable:n}),t?.label,r.createElement(Dd,{type:"source",position:a,isConnectable:n}))};Bd.displayName="DefaultNode";var Fd=(0,r.memo)(Bd);const Hd=e=>{let{data:t,isConnectable:n,sourcePosition:o=Qc.Bottom}=e;return r.createElement(r.Fragment,null,t?.label,r.createElement(Dd,{type:"source",position:o,isConnectable:n}))};Hd.displayName="InputNode";var Ud=(0,r.memo)(Hd);const qd=e=>{let{data:t,isConnectable:n,targetPosition:o=Qc.Top}=e;return r.createElement(r.Fragment,null,r.createElement(Dd,{type:"target",position:o,isConnectable:n}),t?.label)};qd.displayName="OutputNode";var Wd=(0,r.memo)(qd);const Vd=()=>null;Vd.displayName="GroupNode";const Yd=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))}),Kd=e=>e.id;function Xd(e,t){return ya(e.selectedNodes.map(Kd),t.selectedNodes.map(Kd))&&ya(e.selectedEdges.map(Kd),t.selectedEdges.map(Kd))}const Gd=(0,r.memo)(e=>{let{onSelectionChange:t}=e;const n=bc(),{selectedNodes:o,selectedEdges:a}=yc(Yd,Xd);return(0,r.useEffect)(()=>{const e={nodes:o,edges:a};t?.(e),n.getState().onSelectionChange.forEach(t=>t(e))},[o,a,t]),null});Gd.displayName="SelectionListener";const Jd=e=>!!e.onSelectionChange;function Zd(e){let{onSelectionChange:t}=e;const n=yc(Jd);return t||n?r.createElement(Gd,{onSelectionChange:t}):null}const Qd=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function eu(e,t){(0,r.useEffect)(()=>{"undefined"!==typeof e&&t(e)},[e])}function tu(e,t,n){(0,r.useEffect)(()=>{"undefined"!==typeof t&&n({[e]:t})},[t])}const nu=e=>{let{nodes:t,edges:n,defaultNodes:o,defaultEdges:a,onConnect:i,onConnectStart:s,onConnectEnd:l,onClickConnectStart:c,onClickConnectEnd:d,nodesDraggable:u,nodesConnectable:h,nodesFocusable:p,edgesFocusable:m,edgesUpdatable:f,elevateNodesOnSelect:g,minZoom:v,maxZoom:x,nodeExtent:y,onNodesChange:b,onEdgesChange:w,elementsSelectable:k,connectionMode:j,snapGrid:S,snapToGrid:N,translateExtent:C,connectOnClick:_,defaultEdgeOptions:E,fitView:P,fitViewOptions:T,onNodesDelete:M,onEdgesDelete:R,onNodeDrag:L,onNodeDragStart:A,onNodeDragStop:O,onSelectionDrag:z,onSelectionDragStart:I,onSelectionDragStop:$,noPanClassName:D,nodeOrigin:B,rfId:F,autoPanOnConnect:H,autoPanOnNodeDrag:U,onError:q,connectionRadius:W,isValidConnection:V,nodeDragThreshold:Y}=e;const{setNodes:K,setEdges:X,setDefaultNodesAndEdges:G,setMinZoom:J,setMaxZoom:Z,setTranslateExtent:Q,setNodeExtent:ee,reset:te}=yc(Qd,ya),ne=bc();return(0,r.useEffect)(()=>{const e=a?.map(e=>({...e,...E}));return G(o,e),()=>{te()}},[]),tu("defaultEdgeOptions",E,ne.setState),tu("connectionMode",j,ne.setState),tu("onConnect",i,ne.setState),tu("onConnectStart",s,ne.setState),tu("onConnectEnd",l,ne.setState),tu("onClickConnectStart",c,ne.setState),tu("onClickConnectEnd",d,ne.setState),tu("nodesDraggable",u,ne.setState),tu("nodesConnectable",h,ne.setState),tu("nodesFocusable",p,ne.setState),tu("edgesFocusable",m,ne.setState),tu("edgesUpdatable",f,ne.setState),tu("elementsSelectable",k,ne.setState),tu("elevateNodesOnSelect",g,ne.setState),tu("snapToGrid",N,ne.setState),tu("snapGrid",S,ne.setState),tu("onNodesChange",b,ne.setState),tu("onEdgesChange",w,ne.setState),tu("connectOnClick",_,ne.setState),tu("fitViewOnInit",P,ne.setState),tu("fitViewOnInitOptions",T,ne.setState),tu("onNodesDelete",M,ne.setState),tu("onEdgesDelete",R,ne.setState),tu("onNodeDrag",L,ne.setState),tu("onNodeDragStart",A,ne.setState),tu("onNodeDragStop",O,ne.setState),tu("onSelectionDrag",z,ne.setState),tu("onSelectionDragStart",I,ne.setState),tu("onSelectionDragStop",$,ne.setState),tu("noPanClassName",D,ne.setState),tu("nodeOrigin",B,ne.setState),tu("rfId",F,ne.setState),tu("autoPanOnConnect",H,ne.setState),tu("autoPanOnNodeDrag",U,ne.setState),tu("onError",q,ne.setState),tu("connectionRadius",W,ne.setState),tu("isValidConnection",V,ne.setState),tu("nodeDragThreshold",Y,ne.setState),eu(t,K),eu(n,X),eu(v,J),eu(x,Z),eu(C,Q),eu(y,ee),null},ru={display:"none"},ou={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},au="react-flow__node-desc",iu="react-flow__edge-desc",su=e=>e.ariaLiveMessage;function lu(e){let{rfId:t}=e;const n=yc(su);return r.createElement("div",{id:`react-flow__aria-live-${t}`,"aria-live":"assertive","aria-atomic":"true",style:ou},n)}function cu(e){let{rfId:t,disableKeyboardA11y:n}=e;return r.createElement(r.Fragment,null,r.createElement("div",{id:`${au}-${t}`,style:ru},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),r.createElement("div",{id:`${iu}-${t}`,style:ru},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&r.createElement(lu,{rfId:t}))}var du=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{actInsideInputWithModifier:!0};const[n,o]=(0,r.useState)(!1),a=(0,r.useRef)(!1),i=(0,r.useRef)(new Set([])),[s,l]=(0,r.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"===typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,r.useEffect)(()=>{const n="undefined"!==typeof document?document:null,r=t?.target||n;if(null!==e){const e=e=>{a.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!a.current||a.current&&!t.actInsideInputWithModifier)&&Bc(e))return!1;const n=hu(e.code,l);i.current.add(e[n]),uu(s,i.current,!1)&&(e.preventDefault(),o(!0))},n=e=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&Bc(e))return!1;const n=hu(e.code,l);uu(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(e[n]),"Meta"===e.key&&i.current.clear(),a.current=!1},c=()=>{i.current.clear(),o(!1)};return r?.addEventListener("keydown",e),r?.addEventListener("keyup",n),window.addEventListener("blur",c),()=>{r?.removeEventListener("keydown",e),r?.removeEventListener("keyup",n),window.removeEventListener("blur",c)}}},[e,o]),n};function uu(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function hu(e,t){return t.includes(e)?"code":"key"}function pu(e,t,n,r){const o=e.parentNode||e.parentId;if(!o)return n;const a=t.get(o),i=kd(a,r);return pu(a,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(a[Ic]?.z??0)>(n.z??0)?a[Ic]?.z??0:n.z??0},r)}function mu(e,t,n){e.forEach(r=>{const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n?.[r.id]){const{x:o,y:a,z:i}=pu(r,e,{...r.position,z:r[Ic]?.z??0},t);r.positionAbsolute={x:o,y:a},r[Ic].z=i,n?.[r.id]&&(r[Ic].isParent=!0)}})}function fu(e,t,n,r){const o=new Map,a={},i=r?1e3:0;return e.forEach(e=>{const n=(zc(e.zIndex)?e.zIndex:0)+(e.selected?i:0),r=t.get(e.id),s={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},l=e.parentNode||e.parentId;l&&(a[l]=!0);const c=r?.type&&r?.type!==e.type;Object.defineProperty(s,Ic,{enumerable:!1,value:{handleBounds:c?void 0:r?.[Ic]?.handleBounds,z:n}}),o.set(e.id,s)}),mu(o,n,a),o}function gu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getNodes:n,width:r,height:o,minZoom:a,maxZoom:i,d3Zoom:s,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:u}=e(),h=t.initial&&!c&&d;if(s&&l&&(h||!t.initial)){const e=n().filter(e=>{const n=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return t.nodes?.length?n&&t.nodes.some(t=>t.id===e.id):n}),c=e.every(e=>e.width&&e.height);if(e.length>0&&c){const n=jd(e,u),{x:c,y:d,zoom:h}=Cd(n,r,o,t.minZoom??a,t.maxZoom??i,t.padding??.1),p=Wl.translate(c,d).scale(h);return"number"===typeof t.duration&&t.duration>0?s.transform(_d(l,t.duration),p):s.transform(l,p),!0}}return!1}function vu(e,t){return e.forEach(e=>{const n=t.get(e.id);n&&t.set(n.id,{...n,[Ic]:n[Ic],selected:e.selected})}),new Map(t)}function xu(e,t){return t.map(t=>{const n=e.find(e=>e.id===t.id);return n&&(t.selected=n.selected),t})}function yu(e){let{changedNodes:t,changedEdges:n,get:r,set:o}=e;const{nodeInternals:a,edges:i,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:d}=r();t?.length&&(c&&o({nodeInternals:vu(t,a)}),s?.(t)),n?.length&&(d&&o({edges:xu(n,i)}),l?.(n))}const bu=()=>{},wu={zoomIn:bu,zoomOut:bu,zoomTo:bu,getZoom:()=>1,setViewport:bu,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:bu,fitBounds:bu,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},ku=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function ju(){const e=(()=>{const e=bc(),{d3Zoom:t,d3Selection:n}=yc(ku,ya),o=(0,r.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(_d(n,e?.duration),1.2),zoomOut:e=>t.scaleBy(_d(n,e?.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(_d(n,r?.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,o)=>{const[a,i,s]=e.getState().transform,l=Wl.translate(r.x??a,r.y??i).scale(r.zoom??s);t.transform(_d(n,o?.duration),l)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>gu(e.getState,t),setCenter:(r,o,a)=>{const{width:i,height:s,maxZoom:l}=e.getState(),c="undefined"!==typeof a?.zoom?a.zoom:l,d=i/2-r*c,u=s/2-o*c,h=Wl.translate(d,u).scale(c);t.transform(_d(n,a?.duration),h)},fitBounds:(r,o)=>{const{width:a,height:i,minZoom:s,maxZoom:l}=e.getState(),{x:c,y:d,zoom:u}=Cd(r,a,i,s,l,o?.padding??.1),h=Wl.translate(c,d).scale(u);t.transform(_d(n,o?.duration),h)},project:t=>{const{transform:n,snapToGrid:r,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),bd(t,n,r,o)},screenToFlowPosition:t=>{const{transform:n,snapToGrid:r,snapGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:i,y:s}=a.getBoundingClientRect(),l={x:t.x-i,y:t.y-s};return bd(l,n,r,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:a}=r.getBoundingClientRect(),i=wd(t,n);return{x:i.x+o,y:i.y+a}},viewportInitialized:!0}:wu,[t,n]);return o})(),t=bc(),n=(0,r.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),o=(0,r.useCallback)(e=>t.getState().nodeInternals.get(e),[]),a=(0,r.useCallback)(()=>{const{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),i=(0,r.useCallback)(e=>{const{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),s=(0,r.useCallback)(e=>{const{getNodes:n,setNodes:r,hasDefaultNodes:o,onNodesChange:a}=t.getState(),i=n(),s="function"===typeof e?e(i):e;if(o)r(s);else if(a){const e=0===s.length?i.map(e=>({type:"remove",id:e.id})):s.map(e=>({item:e,type:"reset"}));a(e)}},[]),l=(0,r.useCallback)(e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:a}=t.getState(),i="function"===typeof e?e(n):e;if(o)r(i);else if(a){a(0===i.length?n.map(e=>({type:"remove",id:e.id})):i.map(e=>({item:e,type:"reset"})))}},[]),c=(0,r.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:o,hasDefaultNodes:a,onNodesChange:i}=t.getState();if(a){o([...r(),...n])}else if(i){const e=n.map(e=>({item:e,type:"add"}));i(e)}},[]),d=(0,r.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:o,hasDefaultEdges:a,onEdgesChange:i}=t.getState();if(a)o([...r,...n]);else if(i){i(n.map(e=>({item:e,type:"add"})))}},[]),u=(0,r.useCallback)(()=>{const{getNodes:e,edges:n=[],transform:r}=t.getState(),[o,a,i]=r;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:o,y:a,zoom:i}}},[]),h=(0,r.useCallback)(e=>{let{nodes:n,edges:r}=e;const{nodeInternals:o,getNodes:a,edges:i,hasDefaultNodes:s,hasDefaultEdges:l,onNodesDelete:c,onEdgesDelete:d,onNodesChange:u,onEdgesChange:h}=t.getState(),p=(n||[]).map(e=>e.id),m=(r||[]).map(e=>e.id),f=a().reduce((e,t)=>{const n=t.parentNode||t.parentId,r=!p.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!==typeof t.deletable||t.deletable)&&(p.includes(t.id)||r)&&e.push(t),e},[]),g=i.filter(e=>"boolean"!==typeof e.deletable||e.deletable),v=g.filter(e=>m.includes(e.id));if(f||v){const e=Nd(f,g),n=[...v,...e],r=n.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);if((l||s)&&(l&&t.setState({edges:i.filter(e=>!r.includes(e.id))}),s&&(f.forEach(e=>{o.delete(e.id)}),t.setState({nodeInternals:new Map(o)}))),r.length>0&&(d?.(n),h&&h(r.map(e=>({id:e,type:"remove"})))),f.length>0&&(c?.(f),u)){u(f.map(e=>({id:e.id,type:"remove"})))}}},[]),p=(0,r.useCallback)(e=>{const n=zc((r=e).width)&&zc(r.height)&&zc(r.x)&&zc(r.y);var r;const o=n?null:t.getState().nodeInternals.get(e.id);if(!n&&!o)return[null,null,n];return[n?e:Ac(o),o,n]},[]),m=(0,r.useCallback)(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const[o,a,i]=p(e);return o?(r||t.getState().getNodes()).filter(e=>{if(!i&&(e.id===a.id||!e.positionAbsolute))return!1;const t=Ac(e),r=Oc(t,o);return n&&r>0||r>=o.width*o.height}):[]},[]),f=(0,r.useCallback)(function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const[r]=p(e);if(!r)return!1;const o=Oc(r,t);return n&&o>0||o>=r.width*r.height},[]);return(0,r.useMemo)(()=>({...e,getNodes:n,getNode:o,getEdges:a,getEdge:i,setNodes:s,setEdges:l,addNodes:c,addEdges:d,toObject:u,deleteElements:h,getIntersectingNodes:m,isNodeIntersecting:f}),[e,n,o,a,i,s,l,c,d,u,h,m,f])}const Su={actInsideInputWithModifier:!1};const Nu={position:"absolute",width:"100%",height:"100%",top:0,left:0},Cu=e=>({x:e.x,y:e.y,zoom:e.k}),_u=(e,t)=>e.target.closest(`.${t}`),Eu=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Pu=e=>{const t=e.ctrlKey&&Uc()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},Tu=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Mu=e=>{let{onMove:t,onMoveStart:n,onMoveEnd:o,onPaneContextMenu:a,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:l=!1,panOnScrollSpeed:c=.5,panOnScrollMode:d=Xc.Free,zoomOnDoubleClick:u=!0,elementsSelectable:h,panOnDrag:p=!0,defaultViewport:m,translateExtent:f,minZoom:g,maxZoom:v,zoomActivationKeyCode:x,preventScrolling:y=!0,children:b,noWheelClassName:w,noPanClassName:k}=e;const j=(0,r.useRef)(),S=bc(),N=(0,r.useRef)(!1),C=(0,r.useRef)(!1),_=(0,r.useRef)(null),E=(0,r.useRef)({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:T,d3ZoomHandler:M,userSelectionActive:R}=yc(Tu,ya),L=du(x),A=(0,r.useRef)(0),O=(0,r.useRef)(!1),z=(0,r.useRef)();return function(e){const t=bc();(0,r.useEffect)(()=>{let n;const r=()=>{if(!e.current)return;const n=Nc(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004",dc()),t.setState({width:n.width||500,height:n.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}(_),(0,r.useEffect)(()=>{if(_.current){const e=_.current.getBoundingClientRect(),t=ec().scaleExtent([g,v]).translateExtent(f),n=Di(_.current).call(t),r=Wl.translate(m.x,m.y).scale(Cc(m.zoom,g,v)),o=[[0,0],[e.width,e.height]],a=t.constrain()(r,o,f);t.transform(n,a),t.wheelDelta(Pu),S.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[a.x,a.y,a.k],domNode:_.current.closest(".react-flow")})}},[]),(0,r.useEffect)(()=>{T&&P&&(!l||L||R?"undefined"!==typeof M&&T.on("wheel.zoom",function(e,t){if(!y&&"wheel"===e.type&&!e.ctrlKey||_u(e,w))return null;e.preventDefault(),M.call(this,e,t)},{passive:!1}):T.on("wheel.zoom",e=>{if(_u(e,w))return!1;e.preventDefault(),e.stopImmediatePropagation();const r=T.property("__zoom").k||1;if(e.ctrlKey&&s){const t=Ki(e),n=Pu(e),o=r*Math.pow(2,n);return void P.scaleTo(T,o,t,e)}const a=1===e.deltaMode?20:1;let i=d===Xc.Vertical?0:e.deltaX*a,l=d===Xc.Horizontal?0:e.deltaY*a;!Uc()&&e.shiftKey&&d!==Xc.Vertical&&(i=e.deltaY*a,l=0),P.translateBy(T,-i/r*c,-l/r*c,{internal:!0});const u=Cu(T.property("__zoom")),{onViewportChangeStart:h,onViewportChange:p,onViewportChangeEnd:m}=S.getState();clearTimeout(z.current),O.current||(O.current=!0,n?.(e,u),h?.(u)),O.current&&(t?.(e,u),p?.(u),z.current=setTimeout(()=>{o?.(e,u),m?.(u),O.current=!1},150))},{passive:!1}))},[R,l,d,T,P,M,L,s,y,w,n,t,o]),(0,r.useEffect)(()=>{P&&P.on("start",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;A.current=e.sourceEvent?.button;const{onViewportChangeStart:t}=S.getState(),r=Cu(e.transform);N.current=!0,E.current=r,"mousedown"===e.sourceEvent?.type&&S.setState({paneDragging:!0}),t?.(r),n?.(e.sourceEvent,r)})},[P,n]),(0,r.useEffect)(()=>{P&&(R&&!N.current?P.on("zoom",null):R||P.on("zoom",e=>{const{onViewportChange:n}=S.getState();if(S.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),C.current=!(!a||!Eu(p,A.current??0)),(t||n)&&!e.sourceEvent?.internal){const r=Cu(e.transform);n?.(r),t?.(e.sourceEvent,r)}}))},[R,P,t,p,a]),(0,r.useEffect)(()=>{P&&P.on("end",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;const{onViewportChangeEnd:t}=S.getState();if(N.current=!1,S.setState({paneDragging:!1}),a&&Eu(p,A.current??0)&&!C.current&&a(e.sourceEvent),C.current=!1,(o||t)&&(n=E.current,r=e.transform,n.x!==r.x||n.y!==r.y||n.zoom!==r.k)){const n=Cu(e.transform);E.current=n,clearTimeout(j.current),j.current=setTimeout(()=>{t?.(n),o?.(e.sourceEvent,n)},l?150:0)}var n,r})},[P,l,p,o,a]),(0,r.useEffect)(()=>{P&&P.filter(e=>{const t=L||i,n=s&&e.ctrlKey;if((!0===p||Array.isArray(p)&&p.includes(1))&&1===e.button&&"mousedown"===e.type&&(_u(e,"react-flow__node")||_u(e,"react-flow__edge")))return!0;if(!p&&!t&&!l&&!u&&!s)return!1;if(R)return!1;if(!u&&"dblclick"===e.type)return!1;if(_u(e,w)&&"wheel"===e.type)return!1;if(_u(e,k)&&("wheel"!==e.type||l&&"wheel"===e.type&&!L))return!1;if(!s&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!l&&!n&&"wheel"===e.type)return!1;if(!p&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(p)&&!p.includes(e.button)&&"mousedown"===e.type)return!1;const r=Array.isArray(p)&&p.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&r})},[R,P,i,s,l,u,p,h,L]),r.createElement("div",{className:"react-flow__renderer",ref:_,style:Nu},b)},Ru=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Lu(){const{userSelectionActive:e,userSelectionRect:t}=yc(Ru,ya);return e&&t?r.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Au(e,t){const n=t.parentNode||t.parentId,r=e.find(e=>e.id===n);if(r){const e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style}||{},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){const e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){const e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Ou(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);const n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{const r=e.filter(e=>e.id===n.id);if(0===r.length)return t.push(n),t;const o={...n};for(const e of r)if(e)switch(e.type){case"select":o.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(o.position=e.position),"undefined"!==typeof e.positionAbsolute&&(o.positionAbsolute=e.positionAbsolute),"undefined"!==typeof e.dragging&&(o.dragging=e.dragging),o.expandParent&&Au(t,o);break;case"dimensions":"undefined"!==typeof e.dimensions&&(o.width=e.dimensions.width,o.height=e.dimensions.height),"undefined"!==typeof e.updateStyle&&(o.style={...o.style||{},...e.dimensions}),"boolean"===typeof e.resizing&&(o.resizing=e.resizing),o.expandParent&&Au(t,o);break;case"remove":return t}return t.push(o),t},n)}function zu(e,t){return Ou(e,t)}const Iu=(e,t)=>({id:e,type:"select",selected:t});function $u(e,t){return e.reduce((e,n)=>{const r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(Iu(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(Iu(n.id,!1))),e},[])}const Du=(e,t)=>n=>{n.target===t.current&&e?.(n)},Bu=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Fu=(0,r.memo)(e=>{let{isSelecting:t,selectionMode:n=Gc.Full,panOnDrag:o,onSelectionStart:a,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:u,onPaneMouseLeave:h,children:p}=e;const m=(0,r.useRef)(null),f=bc(),g=(0,r.useRef)(0),v=(0,r.useRef)(0),x=(0,r.useRef)(),{userSelectionActive:y,elementsSelectable:b,dragging:w}=yc(Bu,ya),k=()=>{f.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},j=e=>{s?.(e),f.getState().resetSelectedElements(),f.setState({nodesSelectionActive:!1})},S=c?e=>c(e):void 0,N=b&&(t||y);return r.createElement("div",{className:da(["react-flow__pane",{dragging:w,selection:t}]),onClick:N?void 0:Du(j,m),onContextMenu:Du(e=>{Array.isArray(o)&&o?.includes(2)?e.preventDefault():l?.(e)},m),onWheel:Du(S,m),onMouseEnter:N?void 0:d,onMouseDown:N?e=>{const{resetSelectedElements:n,domNode:r}=f.getState();if(x.current=r?.getBoundingClientRect(),!b||!t||0!==e.button||e.target!==m.current||!x.current)return;const{x:o,y:i}=Hc(e,x.current);n(),f.setState({userSelectionRect:{width:0,height:0,startX:o,startY:i,x:o,y:i}}),a?.(e)}:void 0,onMouseMove:N?e=>{const{userSelectionRect:r,nodeInternals:o,edges:a,transform:i,onNodesChange:s,onEdgesChange:l,nodeOrigin:c,getNodes:d}=f.getState();if(!t||!x.current||!r)return;f.setState({userSelectionActive:!0,nodesSelectionActive:!1});const u=Hc(e,x.current),h=r.startX??0,p=r.startY??0,m={...r,x:u.x<h?u.x:h,y:u.y<p?u.y:p,width:Math.abs(u.x-h),height:Math.abs(u.y-p)},y=d(),b=Sd(o,m,i,n===Gc.Partial,!0,c),w=Nd(b,a).map(e=>e.id),k=b.map(e=>e.id);if(g.current!==k.length){g.current=k.length;const e=$u(y,k);e.length&&s?.(e)}if(v.current!==w.length){v.current=w.length;const e=$u(a,w);e.length&&l?.(e)}f.setState({userSelectionRect:m})}:u,onMouseUp:N?e=>{if(0!==e.button)return;const{userSelectionRect:t}=f.getState();!y&&t&&e.target===m.current&&j?.(e),f.setState({nodesSelectionActive:g.current>0}),k(),i?.(e)}:void 0,onMouseLeave:N?e=>{y&&(f.setState({nodesSelectionActive:g.current>0}),i?.(e)),k()}:h,ref:m,style:Nu},p,r.createElement(Lu,null))});function Hu(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return!!r&&(!!r.selected||Hu(r,t))}function Uu(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function qu(e,t,n,r){return Array.from(e.values()).filter(n=>(n.selected||n.id===r)&&(!n.parentNode||n.parentId||!Hu(n,e))&&(n.draggable||t&&"undefined"===typeof n.draggable)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(e.positionAbsolute?.x??0),y:n.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function Wu(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],a=arguments.length>5?arguments[5]:void 0;const i=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}(e,e.extent||r);let s=i;const l=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&l&&"parent"!==e.extent){const t=n.get(l),{x:r,y:a}=kd(t,o).positionAbsolute;s=[[e.extent[0][0]+r,e.extent[0][1]+a],[e.extent[1][0]+r,e.extent[1][1]+a]]}}else if(l&&e.width&&e.height){const t=n.get(l),{x:r,y:a}=kd(t,o).positionAbsolute;s=t&&zc(r)&&zc(a)&&zc(t.width)&&zc(t.height)?[[r+e.width*o[0],a+e.height*o[1]],[r+t.width-e.width+e.width*o[0],a+t.height-e.height+e.height*o[1]]]:s}else a?.("005",uc()),s=i;let c={x:0,y:0};if(l){const e=n.get(l);c=kd(e,o).positionAbsolute}const d=s&&"parent"!==s?_c(t,s):t;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function Vu(e){let{nodeId:t,dragItems:n,nodeInternals:r}=e;const o=n.map(e=>({...r.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[t?o.find(e=>e.id===t):o[0],o]}Fu.displayName="Pane";const Yu=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const a=Array.from(o),i=t.getBoundingClientRect(),s=i.width*r[0],l=i.height*r[1];return a.map(e=>{const t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-i.left-s)/n,y:(t.top-i.top-l)/n,...Nc(e)}})};function Ku(e,t,n){return void 0===n?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,{...o})}}function Xu(e){let{id:t,store:n,unselect:r=!1,nodeRef:o}=e;const{addSelectedNodes:a,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:l,onError:c}=n.getState(),d=l.get(t);d?(n.setState({nodesSelectionActive:!1}),d.selected?(r||d.selected&&s)&&(i({nodes:[d],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):a([t])):c?.("012",vc(t))}function Gu(e){return(t,n,r)=>e?.(t,r)}function Ju(e){let{nodeRef:t,disabled:n=!1,noDragClassName:o,handleSelector:a,nodeId:i,isSelectable:s,selectNodesOnDrag:l}=e;const c=bc(),[d,u]=(0,r.useState)(!1),h=(0,r.useRef)([]),p=(0,r.useRef)({x:null,y:null}),m=(0,r.useRef)(0),f=(0,r.useRef)(null),g=(0,r.useRef)({x:0,y:0}),v=(0,r.useRef)(null),x=(0,r.useRef)(!1),y=(0,r.useRef)(!1),b=(0,r.useRef)(!1),w=function(){const e=bc(),t=(0,r.useCallback)(t=>{let{sourceEvent:n}=t;const{transform:r,snapGrid:o,snapToGrid:a}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-r[0])/r[2],y:(s-r[1])/r[2]};return{xSnapped:a?o[0]*Math.round(l.x/o[0]):l.x,ySnapped:a?o[1]*Math.round(l.y/o[1]):l.y,...l}},[]);return t}();return(0,r.useEffect)(()=>{if(t?.current){const e=Di(t.current),r=e=>{let{x:t,y:n}=e;const{nodeInternals:r,onNodeDrag:o,onSelectionDrag:a,updateNodePositions:s,nodeExtent:l,snapGrid:d,snapToGrid:m,nodeOrigin:f,onError:g}=c.getState();p.current={x:t,y:n};let x=!1,y={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&l){const e=jd(h.current,f);y=Rc(e)}if(h.current=h.current.map(e=>{const o={x:t-e.distance.x,y:n-e.distance.y};m&&(o.x=d[0]*Math.round(o.x/d[0]),o.y=d[1]*Math.round(o.y/d[1]));const a=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];h.current.length>1&&l&&!e.extent&&(a[0][0]=e.positionAbsolute.x-y.x+l[0][0],a[1][0]=e.positionAbsolute.x+(e.width??0)-y.x2+l[1][0],a[0][1]=e.positionAbsolute.y-y.y+l[0][1],a[1][1]=e.positionAbsolute.y+(e.height??0)-y.y2+l[1][1]);const i=Wu(e,o,r,a,f,g);return x=x||e.position.x!==i.position.x||e.position.y!==i.position.y,e.position=i.position,e.positionAbsolute=i.positionAbsolute,e}),!x)return;s(h.current,!0,!0),u(!0);const b=i?o:Gu(a);if(b&&v.current){const[e,t]=Vu({nodeId:i,dragItems:h.current,nodeInternals:r});b(v.current,e,t)}},d=()=>{if(!f.current)return;const[e,t]=Pc(g.current,f.current);if(0!==e||0!==t){const{transform:n,panBy:o}=c.getState();p.current.x=(p.current.x??0)-e/n[2],p.current.y=(p.current.y??0)-t/n[2],o({x:e,y:t})&&r(p.current)}m.current=requestAnimationFrame(d)},k=e=>{const{nodeInternals:n,multiSelectionActive:r,nodesDraggable:o,unselectNodesAndEdges:a,onNodeDragStart:d,onSelectionDragStart:u}=c.getState();y.current=!0;const m=i?d:Gu(u);l&&s||r||!i||n.get(i)?.selected||a(),i&&s&&l&&Xu({id:i,store:c,nodeRef:t});const f=w(e);if(p.current=f,h.current=qu(n,o,f,i),m&&h.current){const[t,r]=Vu({nodeId:i,dragItems:h.current,nodeInternals:n});m(e.sourceEvent,t,r)}};if(!n){const n=function(){var e,t,n,r,o=rc,a=oc,i=ac,s=ic,l={},c=Na("start","drag","end"),d=0,u=0;function h(e){e.on("mousedown.drag",p).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,Bi).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(i,s){if(!r&&o.call(this,i,s)){var l=y(this,a.call(this,i,s),i,s,"mouse");l&&(Di(i.view).on("mousemove.drag",m,Fi).on("mouseup.drag",f,Fi),qi(i.view),Hi(i),n=!1,e=i.clientX,t=i.clientY,l("start",i))}}function m(r){if(Ui(r),!n){var o=r.clientX-e,a=r.clientY-t;n=o*o+a*a>u}l.mouse("drag",r)}function f(e){Di(e.view).on("mousemove.drag mouseup.drag",null),Wi(e.view,n),Ui(e),l.mouse("end",e)}function g(e,t){if(o.call(this,e,t)){var n,r,i=e.changedTouches,s=a.call(this,e,t),l=i.length;for(n=0;n<l;++n)(r=y(this,s,e,t,i[n].identifier,i[n]))&&(Hi(e),r("start",e,i[n]))}}function v(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(Ui(e),n("drag",e,r[t]))}function x(e){var t,n,o=e.changedTouches,a=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<a;++t)(n=l[o[t].identifier])&&(Hi(e),n("end",e,o[t]))}function y(e,t,n,r,o,a){var s,u,p,m=c.copy(),f=Ki(a||n,t);if(null!=(p=i.call(e,new nc("beforestart",{sourceEvent:n,target:h,identifier:o,active:d,x:f[0],y:f[1],dx:0,dy:0,dispatch:m}),r)))return s=p.x-f[0]||0,u=p.y-f[1]||0,function n(a,i,c){var g,v=f;switch(a){case"start":l[o]=n,g=d++;break;case"end":delete l[o],--d;case"drag":f=Ki(c||i,t),g=d}m.call(a,e,new nc(a,{sourceEvent:i,subject:p,target:h,identifier:o,active:g,x:f[0]+s,y:f[1]+u,dx:f[0]-v[0],dy:f[1]-v[1],dispatch:m}),r)}}return h.filter=function(e){return arguments.length?(o="function"===typeof e?e:tc(!!e),h):o},h.container=function(e){return arguments.length?(a="function"===typeof e?e:tc(e),h):a},h.subject=function(e){return arguments.length?(i="function"===typeof e?e:tc(e),h):i},h.touchable=function(e){return arguments.length?(s="function"===typeof e?e:tc(!!e),h):s},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,h):Math.sqrt(u)},h}().on("start",e=>{const{domNode:t,nodeDragThreshold:n}=c.getState();0===n&&k(e),b.current=!1;const r=w(e);p.current=r,f.current=t?.getBoundingClientRect()||null,g.current=Hc(e.sourceEvent,f.current)}).on("drag",e=>{const t=w(e),{autoPanOnNodeDrag:n,nodeDragThreshold:o}=c.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(b.current=!0),!b.current){if(!x.current&&y.current&&n&&(x.current=!0,d()),!y.current){const n=t.xSnapped-(p?.current?.x??0),r=t.ySnapped-(p?.current?.y??0);Math.sqrt(n*n+r*r)>o&&k(e)}(p.current.x!==t.xSnapped||p.current.y!==t.ySnapped)&&h.current&&y.current&&(v.current=e.sourceEvent,g.current=Hc(e.sourceEvent,f.current),r(t))}}).on("end",e=>{if(y.current&&!b.current&&(u(!1),x.current=!1,y.current=!1,cancelAnimationFrame(m.current),h.current)){const{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:o}=c.getState(),a=i?r:Gu(o);if(t(h.current,!1,!1),a){const[t,r]=Vu({nodeId:i,dragItems:h.current,nodeInternals:n});a(e.sourceEvent,t,r)}}}).filter(e=>{const n=e.target;return!e.button&&(!o||!Uu(n,`.${o}`,t))&&(!a||Uu(n,a,t))});return e.call(n),()=>{e.on(".drag",null)}}e.on(".drag",null)}},[t,n,o,a,s,c,i,l,w]),d}function Zu(){const e=bc();return(0,r.useCallback)(t=>{const{nodeInternals:n,nodeExtent:r,updateNodePositions:o,getNodes:a,snapToGrid:i,snapGrid:s,onError:l,nodesDraggable:c}=e.getState(),d=a().filter(e=>e.selected&&(e.draggable||c&&"undefined"===typeof e.draggable)),u=i?s[0]:5,h=i?s[1]:5,p=t.isShiftPressed?4:1,m=t.x*u*p,f=t.y*h*p;o(d.map(e=>{if(e.positionAbsolute){const t={x:e.positionAbsolute.x+m,y:e.positionAbsolute.y+f};i&&(t.x=s[0]*Math.round(t.x/s[0]),t.y=s[1]*Math.round(t.y/s[1]));const{positionAbsolute:o,position:a}=Wu(e,t,n,r,void 0,l);e.position=a,e.positionAbsolute=o}return e}),!0,!1)},[])}const Qu={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var eh=e=>{const t=t=>{let{id:n,type:o,data:a,xPos:i,yPos:s,xPosOrigin:l,yPosOrigin:c,selected:d,onClick:u,onMouseEnter:h,onMouseMove:p,onMouseLeave:m,onContextMenu:f,onDoubleClick:g,style:v,className:x,isDraggable:y,isSelectable:b,isConnectable:w,isFocusable:k,selectNodesOnDrag:j,sourcePosition:S,targetPosition:N,hidden:C,resizeObserver:_,dragHandle:E,zIndex:P,isParent:T,noDragClassName:M,noPanClassName:R,initialized:L,disableKeyboardA11y:A,ariaLabel:O,rfId:z,hasHandleBounds:I}=t;const $=bc(),D=(0,r.useRef)(null),B=(0,r.useRef)(null),F=(0,r.useRef)(S),H=(0,r.useRef)(N),U=(0,r.useRef)(o),q=b||y||u||h||p||m,W=Zu(),V=Ku(n,$.getState,h),Y=Ku(n,$.getState,p),K=Ku(n,$.getState,m),X=Ku(n,$.getState,f),G=Ku(n,$.getState,g);(0,r.useEffect)(()=>()=>{B.current&&(_?.unobserve(B.current),B.current=null)},[]),(0,r.useEffect)(()=>{if(D.current&&!C){const e=D.current;L&&I&&B.current===e||(B.current&&_?.unobserve(B.current),_?.observe(e),B.current=e)}},[C,L,I]),(0,r.useEffect)(()=>{const e=U.current!==o,t=F.current!==S,r=H.current!==N;D.current&&(e||t||r)&&(e&&(U.current=o),t&&(F.current=S),r&&(H.current=N),$.getState().updateNodeDimensions([{id:n,nodeElement:D.current,forceUpdate:!0}]))},[n,o,S,N]);const J=Ju({nodeRef:D,disabled:C||!y,noDragClassName:M,handleSelector:E,nodeId:n,isSelectable:b,selectNodesOnDrag:j});return C?null:r.createElement("div",{className:da(["react-flow__node",`react-flow__node-${o}`,{[R]:y},x,{selected:d,selectable:b,parent:T,dragging:J}]),ref:D,style:{zIndex:P,transform:`translate(${l}px,${c}px)`,pointerEvents:q?"all":"none",visibility:L?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:V,onMouseMove:Y,onMouseLeave:K,onContextMenu:X,onClick:e=>{const{nodeDragThreshold:t}=$.getState();if(b&&(!j||!y||t>0)&&Xu({id:n,store:$,nodeRef:D}),u){const t=$.getState().nodeInternals.get(n);t&&u(e,{...t})}},onDoubleClick:G,onKeyDown:k?e=>{if(!Bc(e)&&!A)if($c.includes(e.key)&&b){const t="Escape"===e.key;Xu({id:n,store:$,unselect:t,nodeRef:D})}else y&&d&&Object.prototype.hasOwnProperty.call(Qu,e.key)&&($.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),W({x:Qu[e.key].x,y:Qu[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":A?void 0:`${au}-${z}`,"aria-label":O},r.createElement(gd,{value:n},r.createElement(e,{id:n,data:a,type:o,xPos:i,yPos:s,selected:d,isConnectable:w,sourcePosition:S,targetPosition:N,dragging:J,dragHandle:E,zIndex:P})))};return t.displayName="NodeWrapper",(0,r.memo)(t)};const th=e=>{const t=e.getNodes().filter(e=>e.selected);return{...jd(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};var nh=(0,r.memo)(function(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:o}=e;const a=bc(),{width:i,height:s,x:l,y:c,transformString:d,userSelectionActive:u}=yc(th,ya),h=Zu(),p=(0,r.useRef)(null);if((0,r.useEffect)(()=>{o||p.current?.focus({preventScroll:!0})},[o]),Ju({nodeRef:p}),u||!i||!s)return null;const m=t?e=>{const n=a.getState().getNodes().filter(e=>e.selected);t(e,n)}:void 0;return r.createElement("div",{className:da(["react-flow__nodesselection","react-flow__container",n]),style:{transform:d}},r.createElement("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:o?void 0:-1,onKeyDown:o?void 0:e=>{Object.prototype.hasOwnProperty.call(Qu,e.key)&&h({x:Qu[e.key].x,y:Qu[e.key].y,isShiftPressed:e.shiftKey})},style:{width:i,height:s,top:c,left:l}}))});const rh=e=>e.nodesSelectionActive,oh=e=>{let{children:t,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:a,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:l,deleteKeyCode:c,onMove:d,onMoveStart:u,onMoveEnd:h,selectionKeyCode:p,selectionOnDrag:m,selectionMode:f,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:x,panActivationKeyCode:y,zoomActivationKeyCode:b,elementsSelectable:w,zoomOnScroll:k,zoomOnPinch:j,panOnScroll:S,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:_,panOnDrag:E,defaultViewport:P,translateExtent:T,minZoom:M,maxZoom:R,preventScrolling:L,onSelectionContextMenu:A,noWheelClassName:O,noPanClassName:z,disableKeyboardA11y:I}=e;const $=yc(rh),D=du(p),B=du(y),F=B||E,H=B||S,U=D||m&&!0!==F;return(e=>{let{deleteKeyCode:t,multiSelectionKeyCode:n}=e;const o=bc(),{deleteElements:a}=ju(),i=du(t,Su),s=du(n);(0,r.useEffect)(()=>{if(i){const{edges:e,getNodes:t}=o.getState(),n=t().filter(e=>e.selected),r=e.filter(e=>e.selected);a({nodes:n,edges:r}),o.setState({nodesSelectionActive:!1})}},[i]),(0,r.useEffect)(()=>{o.setState({multiSelectionActive:s})},[s])})({deleteKeyCode:c,multiSelectionKeyCode:x}),r.createElement(Mu,{onMove:d,onMoveStart:u,onMoveEnd:h,onPaneContextMenu:s,elementsSelectable:w,zoomOnScroll:k,zoomOnPinch:j,panOnScroll:H,panOnScrollSpeed:N,panOnScrollMode:C,zoomOnDoubleClick:_,panOnDrag:!D&&F,defaultViewport:P,translateExtent:T,minZoom:M,maxZoom:R,zoomActivationKeyCode:b,preventScrolling:L,noWheelClassName:O,noPanClassName:z},r.createElement(Fu,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:a,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:l,panOnDrag:F,isSelecting:!!U,selectionMode:f},t,$&&r.createElement(nh,{onSelectionContextMenu:A,noPanClassName:z,disableKeyboardA11y:I})))};oh.displayName="FlowRenderer";var ah=(0,r.memo)(oh);function ih(e){return{...{input:eh(e.input||Ud),default:eh(e.default||Fd),output:eh(e.output||Wd),group:eh(e.group||Vd)},...Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=eh(e[n]||Fd),t),{})}}const sh=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),lh=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:a,updateNodeDimensions:i,onError:s}=yc(sh,ya),l=(c=e.onlyRenderVisibleElements,yc((0,r.useCallback)(e=>c?Sd(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[c])));var c;const d=(0,r.useRef)(),u=(0,r.useMemo)(()=>{if("undefined"===typeof ResizeObserver)return null;const e=new ResizeObserver(e=>{const t=e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}));i(t)});return d.current=e,e},[]);return(0,r.useEffect)(()=>()=>{d?.current?.disconnect()},[]),r.createElement("div",{className:"react-flow__nodes",style:Nu},l.map(i=>{let l=i.type||"default";e.nodeTypes[l]||(s?.("003",cc(l)),l="default");const c=e.nodeTypes[l]||e.nodeTypes.default,d=!!(i.draggable||t&&"undefined"===typeof i.draggable),h=!!(i.selectable||a&&"undefined"===typeof i.selectable),p=!!(i.connectable||n&&"undefined"===typeof i.connectable),m=!!(i.focusable||o&&"undefined"===typeof i.focusable),f=e.nodeExtent?_c(i.positionAbsolute,e.nodeExtent):i.positionAbsolute,g=f?.x??0,v=f?.y??0,x=(e=>{let{x:t,y:n,width:r,height:o,origin:a}=e;return r&&o?a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:n}:{x:t-r*a[0],y:n-o*a[1]}:{x:t,y:n}})({x:g,y:v,width:i.width??0,height:i.height??0,origin:e.nodeOrigin});return r.createElement(c,{key:i.id,id:i.id,className:i.className,style:i.style,type:l,data:i.data,sourcePosition:i.sourcePosition||Qc.Bottom,targetPosition:i.targetPosition||Qc.Top,hidden:i.hidden,xPos:g,yPos:v,xPosOrigin:x.x,yPosOrigin:x.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!i.selected,isDraggable:d,isSelectable:h,isConnectable:p,isFocusable:m,resizeObserver:u,dragHandle:i.dragHandle,zIndex:i[Ic]?.z??0,isParent:!!i[Ic]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!i.width&&!!i.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:i.ariaLabel,hasHandleBounds:!!i[Ic]?.handleBounds})}))};lh.displayName="NodeRenderer";var ch=(0,r.memo)(lh);const dh=(e,t,n)=>n===Qc.Left?e-t:n===Qc.Right?e+t:e,uh=(e,t,n)=>n===Qc.Top?e-t:n===Qc.Bottom?e+t:e,hh="react-flow__edgeupdater",ph=e=>{let{position:t,centerX:n,centerY:o,radius:a=10,onMouseDown:i,onMouseEnter:s,onMouseOut:l,type:c}=e;return r.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:l,className:da([hh,`${hh}-${c}`]),cx:dh(n,a,t),cy:uh(o,a,t),r:a,stroke:"transparent",fill:"transparent"})},mh=()=>!0;var fh=e=>{const t=t=>{let{id:n,className:o,type:a,data:i,onClick:s,onEdgeDoubleClick:l,selected:c,animated:d,label:u,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:f,labelBgBorderRadius:g,style:v,source:x,target:y,sourceX:b,sourceY:w,targetX:k,targetY:j,sourcePosition:S,targetPosition:N,elementsSelectable:C,hidden:_,sourceHandleId:E,targetHandleId:P,onContextMenu:T,onMouseEnter:M,onMouseMove:R,onMouseLeave:L,reconnectRadius:A,onReconnect:O,onReconnectStart:z,onReconnectEnd:I,markerEnd:$,markerStart:D,rfId:B,ariaLabel:F,isFocusable:H,isReconnectable:U,pathOptions:q,interactionWidth:W,disableKeyboardA11y:V}=t;const Y=(0,r.useRef)(null),[K,X]=(0,r.useState)(!1),[G,J]=(0,r.useState)(!1),Z=bc(),Q=(0,r.useMemo)(()=>`url('#${xd(D,B)}')`,[D,B]),ee=(0,r.useMemo)(()=>`url('#${xd($,B)}')`,[$,B]);if(_)return null;const te=Wc(n,Z.getState,l),ne=Wc(n,Z.getState,T),re=Wc(n,Z.getState,M),oe=Wc(n,Z.getState,R),ae=Wc(n,Z.getState,L),ie=(e,t)=>{if(0!==e.button)return;const{edges:r,isValidConnection:o}=Z.getState(),a=t?y:x,i=(t?P:E)||null,s=t?"target":"source",l=o||mh,c=t,d=r.find(e=>e.id===n);J(!0),z?.(e,d,s);Od({event:e,handleId:i,nodeId:a,onConnect:e=>O?.(d,e),isTarget:c,getState:Z.getState,setState:Z.setState,isValidConnection:l,edgeUpdaterType:s,onReconnectEnd:e=>{J(!1),I?.(e,d,s)}})},se=()=>X(!0),le=()=>X(!1),ce=!C&&!s;return r.createElement("g",{className:da(["react-flow__edge",`react-flow__edge-${a}`,o,{selected:c,animated:d,inactive:ce,updating:K}]),onClick:e=>{const{edges:t,addSelectedEdges:r,unselectNodesAndEdges:o,multiSelectionActive:a}=Z.getState(),i=t.find(e=>e.id===n);i&&(C&&(Z.setState({nodesSelectionActive:!1}),i.selected&&a?(o({nodes:[],edges:[i]}),Y.current?.blur()):r([n])),s&&s(e,i))},onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:oe,onMouseLeave:ae,onKeyDown:H?e=>{if(!V&&$c.includes(e.key)&&C){const{unselectNodesAndEdges:t,addSelectedEdges:r,edges:o}=Z.getState();"Escape"===e.key?(Y.current?.blur(),t({edges:[o.find(e=>e.id===n)]})):r([n])}}:void 0,tabIndex:H?0:void 0,role:H?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":null===F?void 0:F||`Edge from ${x} to ${y}`,"aria-describedby":H?`${iu}-${B}`:void 0,ref:Y},!G&&r.createElement(e,{id:n,source:x,target:y,selected:c,animated:d,label:u,labelStyle:h,labelShowBg:p,labelBgStyle:m,labelBgPadding:f,labelBgBorderRadius:g,data:i,style:v,sourceX:b,sourceY:w,targetX:k,targetY:j,sourcePosition:S,targetPosition:N,sourceHandleId:E,targetHandleId:P,markerStart:Q,markerEnd:ee,pathOptions:q,interactionWidth:W}),U&&r.createElement(r.Fragment,null,("source"===U||!0===U)&&r.createElement(ph,{position:S,centerX:b,centerY:w,radius:A,onMouseDown:e=>ie(e,!0),onMouseEnter:se,onMouseOut:le,type:"source"}),("target"===U||!0===U)&&r.createElement(ph,{position:N,centerX:k,centerY:j,radius:A,onMouseDown:e=>ie(e,!1),onMouseEnter:se,onMouseOut:le,type:"target"})))};return t.displayName="EdgeWrapper",(0,r.memo)(t)};function gh(e){return{...{default:fh(e.default||md),straight:fh(e.bezier||dd),step:fh(e.step||ld),smoothstep:fh(e.step||sd),simplebezier:fh(e.simplebezier||nd)},...Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=fh(e[n]||md),t),{})}}function vh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=(n?.x||0)+t.x,o=(n?.y||0)+t.y,a=n?.width||t.width,i=n?.height||t.height;switch(e){case Qc.Top:return{x:r+a/2,y:o};case Qc.Right:return{x:r+a,y:o+i/2};case Qc.Bottom:return{x:r+a/2,y:o+i};case Qc.Left:return{x:r,y:o+i/2}}}function xh(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function yh(e){const t=e?.[Ic]?.handleBounds||null,n=t&&e?.width&&e?.height&&"undefined"!==typeof e?.positionAbsolute?.x&&"undefined"!==typeof e?.positionAbsolute?.y;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const bh=[{level:0,isMaxLevel:!0,edges:[]}];function wh(e,t,n){const o=yc((0,r.useCallback)(n=>e?n.edges.filter(e=>{const r=t.get(e.source),o=t.get(e.target);return r?.width&&r?.height&&o?.width&&o?.height&&function(e){let{sourcePos:t,targetPos:n,sourceWidth:r,sourceHeight:o,targetWidth:a,targetHeight:i,width:s,height:l,transform:c}=e;const d={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+a),y2:Math.max(t.y+o,n.y+i)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const u=Rc({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:l/c[2]}),h=Math.max(0,Math.min(u.x2,d.x2)-Math.max(u.x,d.x)),p=Math.max(0,Math.min(u.y2,d.y2)-Math.max(u.y,d.y));return Math.ceil(h*p)>0}({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:o.width,targetHeight:o.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t]));return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1;const o=e.reduce((e,o)=>{const a=zc(o.zIndex);let i=a?o.zIndex:0;if(n){const e=t.get(o.target),n=t.get(o.source),r=o.selected||e?.selected||n?.selected,s=Math.max(n?.[Ic]?.z||0,e?.[Ic]?.z||0,1e3);i=(a?o.zIndex:0)+(r?s:0)}return e[i]?e[i].push(o):e[i]=[o],r=i>r?i:r,e},{}),a=Object.entries(o).map(e=>{let[t,n]=e;const o=+t;return{edges:n,level:o,isMaxLevel:o===r}});return 0===a.length?bh:a}(o,t,n)}const kh={[Zc.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return r.createElement("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[Zc.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return r.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const jh=e=>{let{id:t,type:n,color:o,width:a=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"}=e;const d=function(e){const t=bc();return(0,r.useMemo)(()=>Object.prototype.hasOwnProperty.call(kh,e)?kh[e]:(t.getState().onError?.("009",pc(e)),null),[e])}(n);return d?r.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${a}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0"},r.createElement(d,{color:o,strokeWidth:l})):null},Sh=e=>{let{defaultColor:t,rfId:n}=e;const o=yc((0,r.useCallback)((e=>{let{defaultColor:t,rfId:n}=e;return e=>{const r=[];return e.edges.reduce((e,o)=>([o.markerStart,o.markerEnd].forEach(o=>{if(o&&"object"===typeof o){const a=xd(o,n);r.includes(a)||(e.push({id:a,color:o.color||t,...o}),r.push(a))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}})({defaultColor:t,rfId:n}),[t,n]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return r.createElement("defs",null,o.map(e=>r.createElement(jh,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};Sh.displayName="MarkerDefinitions";var Nh=(0,r.memo)(Sh);const Ch=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),_h=e=>{let{defaultMarkerColor:t,onlyRenderVisibleElements:n,elevateEdgesOnSelect:o,rfId:a,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:u,onEdgeClick:h,onEdgeDoubleClick:p,onReconnect:m,onReconnectStart:f,onReconnectEnd:g,reconnectRadius:v,children:x,disableKeyboardA11y:y}=e;const{edgesFocusable:b,edgesUpdatable:w,elementsSelectable:k,width:j,height:S,connectionMode:N,nodeInternals:C,onError:_}=yc(Ch,ya),E=wh(n,C,o);return j?r.createElement(r.Fragment,null,E.map(e=>{let{level:n,edges:o,isMaxLevel:x}=e;return r.createElement("svg",{key:n,style:{zIndex:n},width:j,height:S,className:"react-flow__edges react-flow__container"},x&&r.createElement(Nh,{defaultColor:t,rfId:a}),r.createElement("g",null,o.map(e=>{const[t,n,o]=yh(C.get(e.source)),[x,j,S]=yh(C.get(e.target));if(!o||!S)return null;let E=e.type||"default";i[E]||(_?.("011",gc(E)),E="default");const P=i[E]||i.default,T=N===Kc.Strict?j.target:(j.target??[]).concat(j.source??[]),M=xh(n.source,e.sourceHandle),R=xh(T,e.targetHandle),L=M?.position||Qc.Bottom,A=R?.position||Qc.Top,O=!!(e.focusable||b&&"undefined"===typeof e.focusable),z=e.reconnectable||e.updatable,I="undefined"!==typeof m&&(z||w&&"undefined"===typeof z);if(!M||!R)return _?.("008",mc(M,e)),null;const{sourceX:$,sourceY:D,targetX:B,targetY:F}=((e,t,n,r,o,a)=>{const i=vh(n,e,t),s=vh(a,r,o);return{sourceX:i.x,sourceY:i.y,targetX:s.x,targetY:s.y}})(t,M,L,x,R,A);return r.createElement(P,{key:e.id,id:e.id,className:da([e.className,s]),type:E,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:$,sourceY:D,targetX:B,targetY:F,sourcePosition:L,targetPosition:A,elementsSelectable:k,onContextMenu:l,onMouseEnter:c,onMouseMove:d,onMouseLeave:u,onClick:h,onEdgeDoubleClick:p,onReconnect:m,onReconnectStart:f,onReconnectEnd:g,reconnectRadius:v,rfId:a,ariaLabel:e.ariaLabel,isFocusable:O,isReconnectable:I,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:y})})))}),x):null};_h.displayName="EdgeRenderer";var Eh=(0,r.memo)(_h);const Ph=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Th(e){let{children:t}=e;const n=yc(Ph);return r.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}const Mh={[Qc.Left]:Qc.Right,[Qc.Right]:Qc.Left,[Qc.Top]:Qc.Bottom,[Qc.Bottom]:Qc.Top},Rh=e=>{let{nodeId:t,handleType:n,style:o,type:a=Jc.Bezier,CustomComponent:i,connectionStatus:s}=e;const{fromNode:l,handleId:c,toX:d,toY:u,connectionMode:h}=yc((0,r.useCallback)(e=>({fromNode:e.nodeInternals.get(t),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}),[t]),ya),p=l?.[Ic]?.handleBounds;let m=p?.[n];if(h===Kc.Loose&&(m=m||p?.["source"===n?"target":"source"]),!l||!m)return null;const f=c?m.find(e=>e.id===c):m[0],g=f?f.x+f.width/2:(l.width??0)/2,v=f?f.y+f.height/2:l.height??0,x=(l.positionAbsolute?.x??0)+g,y=(l.positionAbsolute?.y??0)+v,b=f?.position,w=b?Mh[b]:null;if(!b||!w)return null;if(i)return r.createElement(i,{connectionLineType:a,connectionLineStyle:o,fromNode:l,fromHandle:f,fromX:x,fromY:y,toX:d,toY:u,fromPosition:b,toPosition:w,connectionStatus:s});let k="";const j={sourceX:x,sourceY:y,sourcePosition:b,targetX:d,targetY:u,targetPosition:w};return a===Jc.Bezier?[k]=pd(j):a===Jc.Step?[k]=id({...j,borderRadius:0}):a===Jc.SmoothStep?[k]=id(j):a===Jc.SimpleBezier?[k]=td(j):k=`M${x},${y} ${d},${u}`,r.createElement("path",{d:k,fill:"none",className:"react-flow__connection-path",style:o})};Rh.displayName="ConnectionLine";const Lh=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Ah(e){let{containerStyle:t,style:n,type:o,component:a}=e;const{nodeId:i,handleType:s,nodesConnectable:l,width:c,height:d,connectionStatus:u}=yc(Lh,ya);return!!(i&&s&&c&&l)?r.createElement("svg",{style:t,width:c,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},r.createElement("g",{className:da(["react-flow__connection",u])},r.createElement(Rh,{nodeId:i,handleType:s,style:n,type:o,CustomComponent:a,connectionStatus:u}))):null}function Oh(e,t){(0,r.useRef)(null),bc();return(0,r.useMemo)(()=>t(e),[e])}const zh=e=>{let{nodeTypes:t,edgeTypes:n,onMove:o,onMoveStart:a,onMoveEnd:i,onInit:s,onNodeClick:l,onEdgeClick:c,onNodeDoubleClick:d,onEdgeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:f,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:x,connectionLineType:y,connectionLineStyle:b,connectionLineComponent:w,connectionLineContainerStyle:k,selectionKeyCode:j,selectionOnDrag:S,selectionMode:N,multiSelectionKeyCode:C,panActivationKeyCode:_,zoomActivationKeyCode:E,deleteKeyCode:P,onlyRenderVisibleElements:T,elementsSelectable:M,selectNodesOnDrag:R,defaultViewport:L,translateExtent:A,minZoom:O,maxZoom:z,preventScrolling:I,defaultMarkerColor:$,zoomOnScroll:D,zoomOnPinch:B,panOnScroll:F,panOnScrollSpeed:H,panOnScrollMode:U,zoomOnDoubleClick:q,panOnDrag:W,onPaneClick:V,onPaneMouseEnter:Y,onPaneMouseMove:K,onPaneMouseLeave:X,onPaneScroll:G,onPaneContextMenu:J,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,reconnectRadius:ae,noDragClassName:ie,noWheelClassName:se,noPanClassName:le,elevateEdgesOnSelect:ce,disableKeyboardA11y:de,nodeOrigin:ue,nodeExtent:he,rfId:pe}=e;const me=Oh(t,ih),fe=Oh(n,gh);return function(e){const t=ju(),n=(0,r.useRef)(!1);(0,r.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(s),r.createElement(ah,{onPaneClick:V,onPaneMouseEnter:Y,onPaneMouseMove:K,onPaneMouseLeave:X,onPaneContextMenu:J,onPaneScroll:G,deleteKeyCode:P,selectionKeyCode:j,selectionOnDrag:S,selectionMode:N,onSelectionStart:v,onSelectionEnd:x,multiSelectionKeyCode:C,panActivationKeyCode:_,zoomActivationKeyCode:E,elementsSelectable:M,onMove:o,onMoveStart:a,onMoveEnd:i,zoomOnScroll:D,zoomOnPinch:B,zoomOnDoubleClick:q,panOnScroll:F,panOnScrollSpeed:H,panOnScrollMode:U,panOnDrag:W,defaultViewport:L,translateExtent:A,minZoom:O,maxZoom:z,onSelectionContextMenu:g,preventScrolling:I,noDragClassName:ie,noWheelClassName:se,noPanClassName:le,disableKeyboardA11y:de},r.createElement(Th,null,r.createElement(Eh,{edgeTypes:fe,onEdgeClick:c,onEdgeDoubleClick:u,onlyRenderVisibleElements:T,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,reconnectRadius:ae,defaultMarkerColor:$,noPanClassName:le,elevateEdgesOnSelect:!!ce,disableKeyboardA11y:de,rfId:pe},r.createElement(Ah,{style:b,type:y,component:w,containerStyle:k})),r.createElement("div",{className:"react-flow__edgelabel-renderer"}),r.createElement(ch,{nodeTypes:me,onNodeClick:l,onNodeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:p,onNodeMouseLeave:m,onNodeContextMenu:f,selectNodesOnDrag:R,onlyRenderVisibleElements:T,noPanClassName:le,noDragClassName:ie,disableKeyboardA11y:de,nodeOrigin:ue,nodeExtent:he,rfId:pe})))};zh.displayName="GraphView";var Ih=(0,r.memo)(zh);const $h=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Dh={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:$h,nodeExtent:$h,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Kc.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Dc,isValidConnection:void 0},Bh=()=>{return e=(e,t)=>({...Dh,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:a}=t();e({nodeInternals:fu(n,r,o,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>({...r,...e}))})},setDefaultNodesAndEdges:(n,r)=>{const o="undefined"!==typeof n,a="undefined"!==typeof r,i=o?fu(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:a?r:[],hasDefaultNodes:o,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:s,domNode:l,nodeOrigin:c}=t(),d=l?.querySelector(".react-flow__viewport");if(!d)return;const u=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(u.transform),p=n.reduce((e,t)=>{const n=o.get(t.id);if(n?.hidden)o.set(n.id,{...n,[Ic]:{...n[Ic],handleBounds:void 0}});else if(n){const r=Nc(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(o.set(n.id,{...n,[Ic]:{...n[Ic],handleBounds:{source:Yu(".source",t.nodeElement,h,c),target:Yu(".target",t.nodeElement,h,c)}},...r}),e.push({id:n.id,type:"dimensions",dimensions:r}))}return e},[]);mu(o,c);const m=i||a&&!i&&gu(t,{initial:!0,...s});e({nodeInternals:new Map(o),fitViewOnInitDone:m}),p?.length>0&&r?.(p)},updateNodePositions:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{triggerNodeChanges:o}=t(),a=e.map(e=>{const t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t});o(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:a,nodeOrigin:i,getNodes:s,elevateNodesOnSelect:l}=t();if(n?.length){if(a){const t=fu(zu(n,s()),o,i,l);e({nodeInternals:t})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:a}=t();let i,s=null;r?i=n.map(e=>Iu(e,!0)):(i=$u(a(),n),s=$u(o,[])),yu({changedNodes:i,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:a}=t();let i,s=null;r?i=n.map(e=>Iu(e,!0)):(i=$u(o,n),s=$u(a(),[])),yu({changedNodes:s,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:function(){let{nodes:n,edges:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edges:o,getNodes:a}=t(),i=r||o;yu({changedNodes:(n||a()).map(e=>(e.selected=!1,Iu(e.id,!1))),changedEdges:i.map(e=>Iu(e.id,!1)),get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r?.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r?.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t();yu({changedNodes:r().filter(e=>e.selected).map(e=>Iu(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>Iu(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=_c(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{const{transform:n,width:r,height:o,d3Zoom:a,d3Selection:i,translateExtent:s}=t();if(!a||!i||!e.x&&!e.y)return!1;const l=Wl.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),c=[[0,0],[r,o]],d=a?.constrain()(l,c,s);return a.transform(i,d),n[0]!==d.x||n[1]!==d.y||n[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Dh.connectionNodeId,connectionHandleId:Dh.connectionHandleId,connectionHandleType:Dh.connectionHandleType,connectionStatus:Dh.connectionStatus,connectionStartHandle:Dh.connectionStartHandle,connectionEndHandle:Dh.connectionEndHandle}),reset:()=>e({...Dh})}),t=Object.is,e?xa(e,t):xa;var e,t},Fh=e=>{let{children:t}=e;const n=(0,r.useRef)(null);return n.current||(n.current=Bh()),r.createElement(lc,{value:n.current},t)};Fh.displayName="ReactFlowProvider";const Hh=e=>{let{children:t}=e;return(0,r.useContext)(sc)?r.createElement(r.Fragment,null,t):r.createElement(Fh,null,t)};Hh.displayName="ReactFlowWrapper";const Uh={input:Ud,default:Fd,output:Wd,group:Vd},qh={default:md,straight:dd,step:ld,smoothstep:sd,simplebezier:nd},Wh=[0,0],Vh=[15,15],Yh={x:0,y:0,zoom:1},Kh={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Xh=(0,r.forwardRef)((e,t)=>{let{nodes:n,edges:o,defaultNodes:a,defaultEdges:i,className:s,nodeTypes:l=Uh,edgeTypes:c=qh,onNodeClick:d,onEdgeClick:u,onInit:h,onMove:p,onMoveStart:m,onMoveEnd:f,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:y,onClickConnectEnd:b,onNodeMouseEnter:w,onNodeMouseMove:k,onNodeMouseLeave:j,onNodeContextMenu:S,onNodeDoubleClick:N,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:E,onNodesDelete:P,onEdgesDelete:T,onSelectionChange:M,onSelectionDragStart:R,onSelectionDrag:L,onSelectionDragStop:A,onSelectionContextMenu:O,onSelectionStart:z,onSelectionEnd:I,connectionMode:$=Kc.Strict,connectionLineType:D=Jc.Bezier,connectionLineStyle:B,connectionLineComponent:F,connectionLineContainerStyle:H,deleteKeyCode:U="Backspace",selectionKeyCode:q="Shift",selectionOnDrag:W=!1,selectionMode:V=Gc.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:K=(Uc()?"Meta":"Control"),zoomActivationKeyCode:X=(Uc()?"Meta":"Control"),snapToGrid:G=!1,snapGrid:J=Vh,onlyRenderVisibleElements:Z=!1,selectNodesOnDrag:Q=!0,nodesDraggable:ee,nodesConnectable:te,nodesFocusable:ne,nodeOrigin:re=Wh,edgesFocusable:oe,edgesUpdatable:ae,elementsSelectable:ie,defaultViewport:se=Yh,minZoom:le=.5,maxZoom:ce=2,translateExtent:de=$h,preventScrolling:ue=!0,nodeExtent:he,defaultMarkerColor:pe="#b1b1b7",zoomOnScroll:me=!0,zoomOnPinch:fe=!0,panOnScroll:ge=!1,panOnScrollSpeed:ve=.5,panOnScrollMode:xe=Xc.Free,zoomOnDoubleClick:ye=!0,panOnDrag:be=!0,onPaneClick:we,onPaneMouseEnter:ke,onPaneMouseMove:je,onPaneMouseLeave:Se,onPaneScroll:Ne,onPaneContextMenu:Ce,children:_e,onEdgeContextMenu:Ee,onEdgeDoubleClick:Pe,onEdgeMouseEnter:Te,onEdgeMouseMove:Me,onEdgeMouseLeave:Re,onEdgeUpdate:Le,onEdgeUpdateStart:Ae,onEdgeUpdateEnd:Oe,onReconnect:ze,onReconnectStart:Ie,onReconnectEnd:$e,reconnectRadius:De=10,edgeUpdaterRadius:Be=10,onNodesChange:Fe,onEdgesChange:He,noDragClassName:Ue="nodrag",noWheelClassName:qe="nowheel",noPanClassName:We="nopan",fitView:Ve=!1,fitViewOptions:Ye,connectOnClick:Ke=!0,attributionPosition:Xe,proOptions:Ge,defaultEdgeOptions:Je,elevateNodesOnSelect:Ze=!0,elevateEdgesOnSelect:Qe=!1,disableKeyboardA11y:et=!1,autoPanOnConnect:tt=!0,autoPanOnNodeDrag:nt=!0,connectionRadius:rt=20,isValidConnection:ot,onError:at,style:it,id:st,nodeDragThreshold:lt,...ct}=e;const dt=st||"1";return r.createElement("div",{...ct,style:{...it,...Kh},ref:t,className:da(["react-flow",s]),"data-testid":"rf__wrapper",id:st},r.createElement(Hh,null,r.createElement(Ih,{onInit:h,onMove:p,onMoveStart:m,onMoveEnd:f,onNodeClick:d,onEdgeClick:u,onNodeMouseEnter:w,onNodeMouseMove:k,onNodeMouseLeave:j,onNodeContextMenu:S,onNodeDoubleClick:N,nodeTypes:l,edgeTypes:c,connectionLineType:D,connectionLineStyle:B,connectionLineComponent:F,connectionLineContainerStyle:H,selectionKeyCode:q,selectionOnDrag:W,selectionMode:V,deleteKeyCode:U,multiSelectionKeyCode:K,panActivationKeyCode:Y,zoomActivationKeyCode:X,onlyRenderVisibleElements:Z,selectNodesOnDrag:Q,defaultViewport:se,translateExtent:de,minZoom:le,maxZoom:ce,preventScrolling:ue,zoomOnScroll:me,zoomOnPinch:fe,zoomOnDoubleClick:ye,panOnScroll:ge,panOnScrollSpeed:ve,panOnScrollMode:xe,panOnDrag:be,onPaneClick:we,onPaneMouseEnter:ke,onPaneMouseMove:je,onPaneMouseLeave:Se,onPaneScroll:Ne,onPaneContextMenu:Ce,onSelectionContextMenu:O,onSelectionStart:z,onSelectionEnd:I,onEdgeContextMenu:Ee,onEdgeDoubleClick:Pe,onEdgeMouseEnter:Te,onEdgeMouseMove:Me,onEdgeMouseLeave:Re,onReconnect:ze??Le,onReconnectStart:Ie??Ae,onReconnectEnd:$e??Oe,reconnectRadius:De??Be,defaultMarkerColor:pe,noDragClassName:Ue,noWheelClassName:qe,noPanClassName:We,elevateEdgesOnSelect:Qe,rfId:dt,disableKeyboardA11y:et,nodeOrigin:re,nodeExtent:he}),r.createElement(nu,{nodes:n,edges:o,defaultNodes:a,defaultEdges:i,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:y,onClickConnectEnd:b,nodesDraggable:ee,nodesConnectable:te,nodesFocusable:ne,edgesFocusable:oe,edgesUpdatable:ae,elementsSelectable:ie,elevateNodesOnSelect:Ze,minZoom:le,maxZoom:ce,nodeExtent:he,onNodesChange:Fe,onEdgesChange:He,snapToGrid:G,snapGrid:J,connectionMode:$,translateExtent:de,connectOnClick:Ke,defaultEdgeOptions:Je,fitView:Ve,fitViewOptions:Ye,onNodesDelete:P,onEdgesDelete:T,onNodeDragStart:C,onNodeDrag:_,onNodeDragStop:E,onSelectionDrag:L,onSelectionDragStart:R,onSelectionDragStop:A,noPanClassName:We,nodeOrigin:re,rfId:dt,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,onError:at,connectionRadius:rt,isValidConnection:ot,nodeDragThreshold:lt}),r.createElement(Zd,{onSelectionChange:M}),_e,r.createElement(jc,{proOptions:Ge,position:Xe}),r.createElement(cu,{rfId:dt,disableKeyboardA11y:et})))});Xh.displayName="ReactFlow";function Gh(e){return t=>{const[n,o]=(0,r.useState)(t),a=(0,r.useCallback)(t=>o(n=>e(t,n)),[]);return[n,o,a]}}const Jh=Gh(zu),Zh=Gh(function(e,t){return Ou(e,t)});function Qh(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},r.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function ep(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},r.createElement("path",{d:"M0 0h32v4.2H0z"}))}function tp(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},r.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function np(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function rp(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const op=e=>{let{children:t,className:n,...o}=e;return r.createElement("button",{type:"button",className:da(["react-flow__controls-button",n]),...o},t)};op.displayName="ControlButton";const ap=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),ip=e=>{let{style:t,showZoom:n=!0,showFitView:o=!0,showInteractive:a=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:l,onFitView:c,onInteractiveChange:d,className:u,children:h,position:p="bottom-left"}=e;const m=bc(),[f,g]=(0,r.useState)(!1),{isInteractive:v,minZoomReached:x,maxZoomReached:y}=yc(ap,ya),{zoomIn:b,zoomOut:w,fitView:k}=ju();if((0,r.useEffect)(()=>{g(!0)},[]),!f)return null;return r.createElement(kc,{className:da(["react-flow__controls",u]),position:p,style:t,"data-testid":"rf__controls"},n&&r.createElement(r.Fragment,null,r.createElement(op,{onClick:()=>{b(),s?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},r.createElement(Qh,null)),r.createElement(op,{onClick:()=>{w(),l?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x},r.createElement(ep,null))),o&&r.createElement(op,{className:"react-flow__controls-fitview",onClick:()=>{k(i),c?.()},title:"fit view","aria-label":"fit view"},r.createElement(tp,null)),a&&r.createElement(op,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),d?.(!v)},title:"toggle interactivity","aria-label":"toggle interactivity"},v?r.createElement(rp,null):r.createElement(np,null)),h)};ip.displayName="Controls";var sp,lp=(0,r.memo)(ip);function cp(e){let{color:t,dimensions:n,lineWidth:o}=e;return r.createElement("path",{stroke:t,strokeWidth:o,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function dp(e){let{color:t,radius:n}=e;return r.createElement("circle",{cx:n,cy:n,r:n,fill:t})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(sp||(sp={}));const up={[sp.Dots]:"#91919a",[sp.Lines]:"#eee",[sp.Cross]:"#e2e2e2"},hp={[sp.Dots]:1,[sp.Lines]:1,[sp.Cross]:6},pp=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function mp(e){let{id:t,variant:n=sp.Dots,gap:o=20,size:a,lineWidth:i=1,offset:s=2,color:l,style:c,className:d}=e;const u=(0,r.useRef)(null),{transform:h,patternId:p}=yc(pp,ya),m=l||up[n],f=a||hp[n],g=n===sp.Dots,v=n===sp.Cross,x=Array.isArray(o)?o:[o,o],y=[x[0]*h[2]||1,x[1]*h[2]||1],b=f*h[2],w=v?[b,b]:y,k=g?[b/s,b/s]:[w[0]/s,w[1]/s];return r.createElement("svg",{className:da(["react-flow__background",d]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},r.createElement("pattern",{id:p+t,x:h[0]%y[0],y:h[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`},g?r.createElement(dp,{color:m,radius:b/s}):r.createElement(cp,{dimensions:w,color:m,lineWidth:i})),r.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+t})`}))}mp.displayName="Background";var fp=(0,r.memo)(mp);const gp=r.memo(e=>{let{id:t,data:n,selected:o,onClick:a}=e;const{getConnectionLineStyle:i,getNode:s,getViewport:l}=ju(),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e;return(o||c)&&(e=setInterval(()=>{const e=!!document.querySelector(".react-flow__connection-line");d(t=>t!==e?e:t)},100)),()=>{e&&clearInterval(e)}},[o,c]);const u=(0,r.useCallback)(e=>e?e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>"):"",[]),h=(0,r.useMemo)(()=>{const e=n.nodeType||n.type||"default",t=(n.fontSize,n.label||"");switch(e){case"title":return(0,To.jsx)("div",{className:"flex flex-col items-center text-center",children:(0,To.jsx)("h1",{className:"font-bold text-gray-900 text-lg leading-tight",style:{fontSize:n.fontSize||"24px"},dangerouslySetInnerHTML:{__html:u(t)}})});case"topic":return(0,To.jsx)("div",{className:"flex flex-col items-center text-center",children:(0,To.jsx)("h2",{className:"font-semibold text-gray-900 text-base leading-tight",style:{fontSize:n.fontSize||"18px"},dangerouslySetInnerHTML:{__html:u(t)}})});case"subtopic":default:return(0,To.jsx)("div",{className:"flex flex-col items-center text-center",children:(0,To.jsx)("h3",{className:"font-medium text-gray-900 text-sm leading-tight",style:{fontSize:n.fontSize||"16px"},dangerouslySetInnerHTML:{__html:u(t)}})});case"paragraph":return(0,To.jsx)("div",{className:"text-center",children:(0,To.jsx)("p",{className:"text-sm text-gray-900 leading-relaxed",style:{fontSize:n.fontSize||"14px"},dangerouslySetInnerHTML:{__html:u(t)}})});case"button":return(0,To.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-center",children:[(0,To.jsx)("button",{className:"w-full h-full bg-blue-800 text-white text-sm rounded hover:bg-blue-900 transition-colors flex items-center justify-center",style:{fontSize:n.fontSize||"14px"},children:t}),n.url&&(0,To.jsx)("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 mt-1",children:"Abrir enlace"})]});case"todo":return(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("input",{type:"checkbox",checked:n.completed||!1,readOnly:!0,className:"rounded border-gray-300 text-blue-600 flex-shrink-0"}),(0,To.jsx)("span",{className:"text-sm leading-tight flex-1 "+(n.completed?"line-through text-gray-500":"text-gray-900"),style:{fontSize:n.fontSize||"14px"},dangerouslySetInnerHTML:{__html:u(t)}})]});case"horizontal-line":return(0,To.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,To.jsx)("div",{className:"rounded-full",style:{height:`${n.lineWidth||2}px`,width:`${n.lineSize||100}px`,backgroundColor:"solid"===n.lineStyle?n.lineColor||"#6B7280":"transparent",border:"solid"!==n.lineStyle?`${n.lineWidth||2}px ${n.lineStyle||"solid"} ${n.lineColor||"#6B7280"}`:"none",borderStyle:n.lineStyle||"solid",borderWidth:"solid"!==n.lineStyle?`${n.lineWidth||2}px`:"0px",borderColor:n.lineColor||"#6B7280"}})});case"vertical-line":return(0,To.jsx)("div",{className:"h-full flex flex-col justify-center items-center",children:(0,To.jsx)("div",{className:"rounded-full",style:{width:`${n.lineWidth||2}px`,height:`${n.lineSize||100}px`,backgroundColor:"solid"===n.lineStyle?n.lineColor||"#6B7280":"transparent",border:"solid"!==n.lineStyle?`${n.lineWidth||2}px ${n.lineStyle||"solid"} ${n.lineColor||"#6B7280"}`:"none",borderStyle:n.lineStyle||"solid",borderWidth:"solid"!==n.lineStyle?`${n.lineWidth||2}px`:"0px",borderColor:n.lineColor||"#6B7280"}})})}},[n,u]),p=(0,r.useMemo)(()=>{const e=n.nodeType||n.type||"default",t={width:n.width||"auto",height:n.height||"auto",minWidth:n.minWidth||"120px",minHeight:n.minHeight||"60px",maxWidth:n.maxWidth||"300px",maxHeight:n.maxHeight||"200px",fontSize:n.fontSize||"14px",padding:n.padding||"12px",borderRadius:n.borderRadius||"8px",border:n.border||"1px solid #e5e7eb",boxShadow:n.boxShadow||"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease",cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",wordWrap:"break-word",overflow:"hidden"};switch(e){case"title":return{...t,backgroundColor:"transparent",border:"none",boxShadow:"none",fontSize:n.fontSize||"24px",fontWeight:"bold",color:n.color||"#1f2937"};case"topic":return{...t,backgroundColor:n.backgroundColor||"#f3f4f6",border:n.border||"2px solid #d1d5db",fontSize:n.fontSize||"18px",fontWeight:"600",color:n.color||"#374151"};case"subtopic":return{...t,backgroundColor:n.backgroundColor||"#ffffff",border:n.border||"1px solid #e5e7eb",fontSize:n.fontSize||"16px",fontWeight:"500",color:n.color||"#4b5563"};case"paragraph":return{...t,backgroundColor:n.backgroundColor||"#ffffff",border:n.border||"1px solid #e5e7eb",fontSize:n.fontSize||"14px",color:n.color||"#6b7280",textAlign:"left",padding:n.padding||"16px"};case"button":return{...t,backgroundColor:n.backgroundColor||"#1e40af",border:n.border||"none",color:n.color||"#ffffff",fontSize:n.fontSize||"14px",fontWeight:"500",cursor:"pointer",minWidth:n.minWidth||"100px",minHeight:n.minHeight||"40px"};case"todo":return{...t,backgroundColor:n.backgroundColor||"#ffffff",border:n.border||"1px solid #e5e7eb",fontSize:n.fontSize||"14px",color:n.color||"#374151",textAlign:"left",padding:n.padding||"12px"};case"horizontal-line":case"vertical-line":return{...t,backgroundColor:"transparent",border:"none",boxShadow:"none",padding:"0px",minWidth:"auto",minHeight:"auto"};default:return{...t,backgroundColor:n.backgroundColor||"#ffffff",border:n.border||"1px solid #e5e7eb",fontSize:n.fontSize||"16px",color:n.color||"#374151"}}},[n]),m=(0,r.useMemo)(()=>{const e=n.nodeType||n.type||"default";return"horizontal-line"===e||"vertical-line"===e?null:(0,To.jsxs)(To.Fragment,{children:[(0,To.jsx)(Dd,{type:"target",position:Qc.Top,style:{background:c?"#10b981":"#6b7280",width:"8px",height:"8px",border:"2px solid white"}}),(0,To.jsx)(Dd,{type:"source",position:Qc.Bottom,style:{background:c?"#10b981":"#6b7280",width:"8px",height:"8px",border:"2px solid white"}})]})},[c,n.nodeType,n.type]);return(0,To.jsxs)("div",{"data-id":t,style:{...p,border:o?"2px solid #3b82f6":p.border,boxShadow:o?"0 0 0 2px rgba(59, 130, 246, 0.2)":p.boxShadow},className:"custom-node moveable-node "+(o?"selected":""),children:[m,h]})});gp.displayName="CustomNode";const vp=gp,xp=e=>{let{topVersion:t,authorInfo:n}=e;if(!t)return null;let r="Autor Destacado",o="usuario@ejemplo.com";var a,i;n&&(r=(null===(a=n.user_metadata)||void 0===a?void 0:a.full_name)||(null===(i=n.user_metadata)||void 0===i?void 0:i.name)||n.email||"Autor Destacado",o=n.email||"usuario@ejemplo.com");return(0,To.jsxs)("div",{className:"flex-1 flex items-center space-x-3 min-w-0",children:[(0,To.jsx)("div",{className:"w-5 h-5 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,To.jsx)("svg",{className:"w-3 h-3 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,To.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),(0,To.jsxs)("div",{className:"text-xs truncate min-w-0",children:[(0,To.jsx)("div",{className:"font-semibold text-blue-900 truncate",title:r,children:r}),(0,To.jsxs)("div",{className:"text-blue-700 truncate",children:[t.total_votes||0," votos"]}),(0,To.jsx)("div",{className:"text-blue-600 truncate",children:new Date(t.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})})]}),(0,To.jsxs)("div",{className:"flex space-x-1 flex-shrink-0",children:[(0,To.jsx)("button",{className:"flex items-center justify-center w-6 h-6 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 transition-colors",onClick:()=>window.open("https://linkedin.com/in/usuario","_blank"),title:"LinkedIn",children:(0,To.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),(0,To.jsx)("button",{className:"flex items-center justify-center w-6 h-6 bg-green-600 text-white rounded text-xs hover:bg-green-700 transition-colors",onClick:()=>window.open(`mailto:${o}`,"_blank"),title:"Email",children:(0,To.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})}),(0,To.jsx)("button",{className:"flex items-center justify-center w-6 h-6 bg-blue-800 text-white rounded text-xs hover:bg-blue-900 transition-colors",onClick:()=>window.open("https://facebook.com/usuario","_blank"),title:"Facebook",children:(0,To.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})})]})]})},yp=(e,t,n)=>{const o=(0,r.useRef)(0),a=(0,r.useRef)(0),i=(0,r.useCallback)(()=>0===e.length?e:e.map(e=>({...e,position:{...e.position}})),[e]);return(0,r.useEffect)(()=>{const r=o.current!==e.length,s=a.current!==t.length;if((r||s)&&e.length>0){const r=i(),s=r.some((t,n)=>{const r=e[n];return t.position.x!==r.position.x||t.position.y!==r.position.y});s&&n(r),o.current=e.length,a.current=t.length}},[e.length,t.length,i,n]),{getLayoutedElements:i}},bp=[{id:"termodinamica",type:"custom",position:{x:0,y:0},data:{label:"Termodin\xe1mica",description:"Ciencia que estudia las transformaciones de energ\xeda en sistemas f\xedsicos",link:"/termodinamica",icon:"\ud83d\udd25"}},{id:"sistemas",type:"custom",position:{x:-200,y:-150},data:{label:"Sistemas",description:"Sistemas termodin\xe1micos y sus propiedades fundamentales",link:"/sistemas",icon:"\u2699\ufe0f"}},{id:"primera-ley",type:"custom",position:{x:200,y:-150},data:{label:"Primera Ley",description:"Conservaci\xf3n de la energ\xeda en sistemas termodin\xe1micos",link:"/primera-ley",icon:"\u26a1"}},{id:"segunda-ley",type:"custom",position:{x:200,y:150},data:{label:"Segunda Ley",description:"Entrop\xeda y espontaneidad de los procesos",link:"/segunda-ley",icon:"\ud83d\udd04"}},{id:"energia-gibbs",type:"custom",position:{x:-200,y:150},data:{label:"Energ\xeda de Gibbs",description:"Criterio de espontaneidad para reacciones qu\xedmicas",link:"/energia-gibbs",icon:"\u2696\ufe0f"}},{id:"equilibrio",type:"custom",position:{x:0,y:-250},data:{label:"Equilibrio",description:"Estados de equilibrio termodin\xe1mico",link:"/equilibrio",icon:"\u2696\ufe0f"}},{id:"sistema-abierto",type:"custom",position:{x:-350,y:-250},data:{label:"Sistema Abierto",description:"Intercambia materia y energ\xeda con el entorno",link:"/sistema-abierto",icon:"\ud83d\udd04"}},{id:"sistema-cerrado",type:"custom",position:{x:-350,y:-50},data:{label:"Sistema Cerrado",description:"Solo intercambia energ\xeda, no materia",link:"/sistema-cerrado",icon:"\ud83d\udd12"}},{id:"sistema-aislado",type:"custom",position:{x:-350,y:150},data:{label:"Sistema Aislado",description:"No intercambia ni materia ni energ\xeda",link:"/sistema-aislado",icon:"\ud83d\udee1\ufe0f"}},{id:"energia-interna",type:"custom",position:{x:350,y:-250},data:{label:"Energ\xeda Interna",description:"Energ\xeda total del sistema termodin\xe1mico",link:"/energia-interna",icon:"\ud83d\udd0b"}},{id:"trabajo",type:"custom",position:{x:350,y:-50},data:{label:"Trabajo",description:"Transferencia de energ\xeda por fuerzas mec\xe1nicas",link:"/trabajo",icon:"\ud83d\udcaa"}},{id:"calor",type:"custom",position:{x:350,y:150},data:{label:"Calor",description:"Transferencia de energ\xeda por diferencia de temperatura",link:"/calor",icon:"\ud83c\udf21\ufe0f"}},{id:"entropia",type:"custom",position:{x:350,y:250},data:{label:"Entrop\xeda",description:"Medida del desorden molecular del sistema",link:"/entropia",icon:"\ud83d\udcc8"}},{id:"espontaneidad",type:"custom",position:{x:200,y:300},data:{label:"Espontaneidad",description:"Criterios para reacciones espont\xe1neas",link:"/espontaneidad",icon:"\ud83c\udfaf"}},{id:"delta-g",type:"custom",position:{x:-350,y:250},data:{label:"\u0394G = \u0394H - T\u0394S",description:"Ecuaci\xf3n fundamental de la energ\xeda libre de Gibbs",link:"/delta-g",icon:"\ud83e\uddee"}},{id:"aplicaciones-metalurgicas",type:"custom",position:{x:-200,y:300},data:{label:"Aplicaciones Metal\xfargicas",description:"Uso de termodin\xe1mica en procesos metal\xfargicos",link:"/aplicaciones-metalurgicas",icon:"\ud83c\udfed"}},{id:"equilibrio-quimico",type:"custom",position:{x:-100,y:-400},data:{label:"Equilibrio Qu\xedmico",description:"Reacciones qu\xedmicas en estado de equilibrio",link:"/equilibrio-quimico",icon:"\ud83e\uddea"}},{id:"equilibrio-fase",type:"custom",position:{x:100,y:-400},data:{label:"Equilibrio de Fases",description:"Coexistencia de diferentes fases en equilibrio",link:"/equilibrio-fase",icon:"\u2744\ufe0f"}}],wp=[{id:"termodinamica-sistemas",source:"termodinamica",target:"sistemas",type:"default",animated:!0,style:{stroke:"#3B82F6",strokeWidth:3}},{id:"termodinamica-primera-ley",source:"termodinamica",target:"primera-ley",type:"default",animated:!0,style:{stroke:"#3B82F6",strokeWidth:3}},{id:"termodinamica-segunda-ley",source:"termodinamica",target:"segunda-ley",type:"default",animated:!0,style:{stroke:"#3B82F6",strokeWidth:3}},{id:"termodinamica-energia-gibbs",source:"termodinamica",target:"energia-gibbs",type:"default",animated:!0,style:{stroke:"#3B82F6",strokeWidth:3}},{id:"termodinamica-equilibrio",source:"termodinamica",target:"equilibrio",type:"default",animated:!0,style:{stroke:"#3B82F6",strokeWidth:3}},{id:"sistemas-sistema-abierto",source:"sistemas",target:"sistema-abierto",type:"default",animated:!0,style:{stroke:"#10B981",strokeWidth:2}},{id:"sistemas-sistema-cerrado",source:"sistemas",target:"sistema-cerrado",type:"default",animated:!0,style:{stroke:"#10B981",strokeWidth:2}},{id:"sistemas-sistema-aislado",source:"sistemas",target:"sistema-aislado",type:"default",animated:!0,style:{stroke:"#10B981",strokeWidth:2}},{id:"primera-ley-energia-interna",source:"primera-ley",target:"energia-interna",type:"default",animated:!0,style:{stroke:"#F59E0B",strokeWidth:2}},{id:"primera-ley-trabajo",source:"primera-ley",target:"trabajo",type:"default",animated:!0,style:{stroke:"#F59E0B",strokeWidth:2}},{id:"primera-ley-calor",source:"primera-ley",target:"calor",type:"default",animated:!0,style:{stroke:"#F59E0B",strokeWidth:2}},{id:"segunda-ley-entropia",source:"segunda-ley",target:"entropia",type:"default",animated:!0,style:{stroke:"#EF4444",strokeWidth:2}},{id:"segunda-ley-espontaneidad",source:"segunda-ley",target:"espontaneidad",type:"default",animated:!0,style:{stroke:"#EF4444",strokeWidth:2}},{id:"energia-gibbs-delta-g",source:"energia-gibbs",target:"delta-g",type:"default",animated:!0,style:{stroke:"#8B5CF6",strokeWidth:2}},{id:"energia-gibbs-aplicaciones-metalurgicas",source:"energia-gibbs",target:"aplicaciones-metalurgicas",type:"default",animated:!0,style:{stroke:"#8B5CF6",strokeWidth:2}},{id:"equilibrio-equilibrio-quimico",source:"equilibrio",target:"equilibrio-quimico",type:"default",animated:!0,style:{stroke:"#06B6D4",strokeWidth:2}},{id:"equilibrio-equilibrio-fase",source:"equilibrio",target:"equilibrio-fase",type:"default",animated:!0,style:{stroke:"#06B6D4",strokeWidth:2}}],kp=(e,t)=>[{id:"central",type:"custom",position:{x:0,y:0},data:{label:e,description:`Mapa mental de ${e}`,icon:t,nodeType:"title"}}],jp=[],Sp={matematicas:{title:"Matem\xe1ticas",description:"Fundamentos matem\xe1ticos necesarios para la ingenier\xeda metal\xfargica. \xc1lgebra, c\xe1lculo, ecuaciones diferenciales.",icon:"\ud83d\udcd0",nodes:kp("Matem\xe1ticas","\ud83d\udcd0"),edges:jp},fisica:{title:"F\xedsica",description:"Principios f\xedsicos fundamentales aplicados a procesos metal\xfargicos. Mec\xe1nica, electromagnetismo, \xf3ptica.",icon:"\u269b\ufe0f",nodes:kp("F\xedsica","\u269b\ufe0f"),edges:jp},quimica:{title:"Qu\xedmica",description:"Fundamentos qu\xedmicos para entender reacciones y transformaciones en metalurgia.",icon:"\ud83e\uddea",nodes:kp("Qu\xedmica","\ud83e\uddea"),edges:jp},cinetica:{title:"Cin\xe9tica Qu\xedmica",description:"Velocidad de reacciones qu\xedmicas y procesos de transformaci\xf3n en metalurgia.",icon:"\u26a1",nodes:kp("Cin\xe9tica Qu\xedmica","\u26a1"),edges:jp},cienciaMateriales:{title:"Ciencia de Materiales",description:"Estudio de la estructura, propiedades y comportamiento de los materiales.",icon:"\ud83d\udd2c",nodes:kp("Ciencia de Materiales","\ud83d\udd2c"),edges:jp},estadistica:{title:"Estad\xedstica y Probabilidad",description:"M\xe9todos estad\xedsticos para an\xe1lisis de datos y control de calidad en metalurgia.",icon:"\ud83d\udcca",nodes:kp("Estad\xedstica y Probabilidad","\ud83d\udcca"),edges:jp},metodosNumericos:{title:"M\xe9todos Num\xe9ricos",description:"T\xe9cnicas computacionales para resolver problemas complejos en metalurgia.",icon:"\ud83d\udcbb",nodes:kp("M\xe9todos Num\xe9ricos","\ud83d\udcbb"),edges:jp},termodinamica:{title:"Termodin\xe1mica",description:"Fundamentos de termodin\xe1mica aplicada a procesos metal\xfargicos.",icon:"\ud83d\udd25",nodes:bp,edges:wp},mecanica:{title:"Mec\xe1nica",description:"Principios mec\xe1nicos aplicados a procesos de conformado y deformaci\xf3n.",icon:"\u2699\ufe0f",nodes:kp("Mec\xe1nica","\u2699\ufe0f"),edges:jp},transferenciaCalor:{title:"Transferencia de Calor",description:"Mecanismos de transferencia de calor en procesos metal\xfargicos.",icon:"\ud83c\udf21\ufe0f",nodes:kp("Transferencia de Calor","\ud83c\udf21\ufe0f"),edges:jp},electromagnetismo:{title:"Electromagnetismo",description:"Principios electromagn\xe9ticos aplicados a procesos metal\xfargicos.",icon:"\u26a1",nodes:kp("Electromagnetismo","\u26a1"),edges:jp},fisicoquimica:{title:"Fisicoqu\xedmica",description:"Interfase entre f\xedsica y qu\xedmica en procesos metal\xfargicos.",icon:"\ud83d\udd2c",nodes:kp("Fisicoqu\xedmica","\ud83d\udd2c"),edges:jp},electroquimica:{title:"Electroqu\xedmica",description:"Procesos electroqu\xedmicos en metalurgia y corrosi\xf3n.",icon:"\u26a1",nodes:kp("Electroqu\xedmica","\u26a1"),edges:jp},estructuraCristalina:{title:"Estructura Cristalina",description:"Organizaci\xf3n at\xf3mica y estructura cristalina de materiales met\xe1licos.",icon:"\ud83d\udc8e",nodes:kp("Estructura Cristalina","\ud83d\udc8e"),edges:jp},diagramasFase:{title:"Diagramas de Fase",description:"Representaci\xf3n gr\xe1fica de fases en equilibrio en sistemas met\xe1licos.",icon:"\ud83d\udcc8",nodes:kp("Diagramas de Fase","\ud83d\udcc8"),edges:jp},difusion:{title:"Difusi\xf3n",description:"Procesos de difusi\xf3n at\xf3mica en materiales met\xe1licos.",icon:"\ud83d\udd04",nodes:kp("Difusi\xf3n","\ud83d\udd04"),edges:jp},transformacionesFase:{title:"Transformaciones de Fase",description:"Cambios de fase y transformaciones microestructurales en metales.",icon:"\ud83d\udd04",nodes:kp("Transformaciones de Fase","\ud83d\udd04"),edges:jp},propiedadesMecanicas:{title:"Propiedades Mec\xe1nicas",description:"Caracter\xedsticas mec\xe1nicas de materiales met\xe1licos.",icon:"\ud83d\udcaa",nodes:kp("Propiedades Mec\xe1nicas","\ud83d\udcaa"),edges:jp},mineralogiaMenas:{title:"Mineralog\xeda de Menas",description:"Identificaci\xf3n y caracterizaci\xf3n de minerales en menas met\xe1licas.",icon:"\u26cf\ufe0f",nodes:kp("Mineralog\xeda de Menas","\u26cf\ufe0f"),edges:jp},preparacionMinerales:{title:"Preparaci\xf3n de Minerales",description:"Procesos de preparaci\xf3n y acondicionamiento de minerales.",icon:"\ud83c\udfd4\ufe0f",nodes:kp("Preparaci\xf3n de Minerales","\ud83c\udfd4\ufe0f"),edges:jp},conminucion:{title:"Conminuci\xf3n",description:"Reducci\xf3n de tama\xf1o de part\xedculas minerales.",icon:"\ud83d\udd28",nodes:kp("Conminuci\xf3n","\ud83d\udd28"),edges:jp},concentracionFlotacion:{title:"Concentraci\xf3n por Flotaci\xf3n",description:"Separaci\xf3n de minerales por flotaci\xf3n espumosa.",icon:"\ud83e\udee7",nodes:kp("Concentraci\xf3n por Flotaci\xf3n","\ud83e\udee7"),edges:jp},separacionMagnetica:{title:"Separaci\xf3n Magn\xe9tica",description:"Concentraci\xf3n de minerales magn\xe9ticos.",icon:"\ud83e\uddf2",nodes:kp("Separaci\xf3n Magn\xe9tica","\ud83e\uddf2"),edges:jp},"separacionGravim\xe9trica":{title:"Separaci\xf3n Gravim\xe9trica",description:"Concentraci\xf3n por diferencias de densidad.",icon:"\u2696\ufe0f",nodes:kp("Separaci\xf3n Gravim\xe9trica","\u2696\ufe0f"),edges:jp},pirometalurgia:{title:"Pirometalurgia",description:"Procesos metal\xfargicos a altas temperaturas.",icon:"\ud83d\udd25",nodes:kp("Pirometalurgia","\ud83d\udd25"),edges:jp},calcinacionTostacion:{title:"Calcinaci\xf3n y Tostaci\xf3n",description:"Procesos de calentamiento en presencia de aire.",icon:"\ud83d\udd25",nodes:kp("Calcinaci\xf3n y Tostaci\xf3n","\ud83d\udd25"),edges:jp},fusionMatas:{title:"Fusi\xf3n de Matas",description:"Procesos de fusi\xf3n para separaci\xf3n de metales.",icon:"\ud83d\udd25",nodes:kp("Fusi\xf3n de Matas","\ud83d\udd25"),edges:jp},reduccionCarbotermica:{title:"Reducci\xf3n Carbot\xe9rmica",description:"Reducci\xf3n de \xf3xidos met\xe1licos con carbono.",icon:"\u26a1",nodes:kp("Reducci\xf3n Carbot\xe9rmica","\u26a1"),edges:jp},refinacionPirometalurgica:{title:"Refinaci\xf3n Pirometal\xfargica",description:"Purificaci\xf3n de metales por procesos t\xe9rmicos.",icon:"\ud83d\udd25",nodes:kp("Refinaci\xf3n Pirometal\xfargica","\ud83d\udd25"),edges:jp},disenoReactores:{title:"Dise\xf1o de Reactores",description:"Dise\xf1o y optimizaci\xf3n de reactores metal\xfargicos.",icon:"\ud83c\udfed",nodes:kp("Dise\xf1o de Reactores","\ud83c\udfed"),edges:jp},hidrometalurgia:{title:"Hidrometalurgia",description:"Procesos metal\xfargicos en medio acuoso.",icon:"\ud83d\udca7",nodes:kp("Hidrometalurgia","\ud83d\udca7"),edges:jp},lixiviacion:{title:"Lixiviaci\xf3n",description:"Disoluci\xf3n selectiva de metales en soluciones acuosas.",icon:"\ud83d\udca7",nodes:kp("Lixiviaci\xf3n","\ud83d\udca7"),edges:jp},separacionLiquidoSolido:{title:"Separaci\xf3n L\xedquido-S\xf3lido",description:"T\xe9cnicas de separaci\xf3n de fases l\xedquidas y s\xf3lidas.",icon:"\ud83d\udd0d",nodes:kp("Separaci\xf3n L\xedquido-S\xf3lido","\ud83d\udd0d"),edges:jp},purificacionSoluciones:{title:"Purificaci\xf3n de Soluciones",description:"Limpieza y purificaci\xf3n de soluciones metal\xfargicas.",icon:"\ud83e\uddea",nodes:kp("Purificaci\xf3n de Soluciones","\ud83e\uddea"),edges:jp},precipitacion:{title:"Precipitaci\xf3n",description:"Separaci\xf3n de metales por precipitaci\xf3n qu\xedmica.",icon:"\ud83c\udf0a",nodes:kp("Precipitaci\xf3n","\ud83c\udf0a"),edges:jp},electrometalurgia:{title:"Electrometalurgia",description:"Procesos metal\xfargicos que involucran electricidad.",icon:"\u26a1",nodes:kp("Electrometalurgia","\u26a1"),edges:jp},electrodeposicion:{title:"Electrodeposici\xf3n",description:"Deposici\xf3n de metales por procesos electrol\xedticos.",icon:"\u26a1",nodes:kp("Electrodeposici\xf3n","\u26a1"),edges:jp},electrolisis:{title:"Electr\xf3lisis",description:"Descomposici\xf3n de compuestos por corriente el\xe9ctrica.",icon:"\u26a1",nodes:kp("Electr\xf3lisis","\u26a1"),edges:jp},corrosionElectroquimica:{title:"Corrosi\xf3n Electroqu\xedmica",description:"Mecanismos de corrosi\xf3n en medios electroqu\xedmicos.",icon:"\ud83d\udee1\ufe0f",nodes:kp("Corrosi\xf3n Electroqu\xedmica","\ud83d\udee1\ufe0f"),edges:jp},fundicion:{title:"Fundici\xf3n",description:"Procesos de fundici\xf3n y colada de metales.",icon:"\ud83d\udd25",nodes:kp("Fundici\xf3n","\ud83d\udd25"),edges:jp},disenoAleaciones:{title:"Dise\xf1o de Aleaciones",description:"Desarrollo y dise\xf1o de aleaciones met\xe1licas.",icon:"\ud83d\udd27",nodes:kp("Dise\xf1o de Aleaciones","\ud83d\udd27"),edges:jp},procesosFundicion:{title:"Procesos de Fundici\xf3n",description:"T\xe9cnicas y procesos de fundici\xf3n metal\xfargica.",icon:"\ud83d\udd25",nodes:kp("Procesos de Fundici\xf3n","\ud83d\udd25"),edges:jp},defectosFundicion:{title:"Defectos de Fundici\xf3n",description:"Identificaci\xf3n y control de defectos en piezas fundidas.",icon:"\ud83d\udd0d",nodes:kp("Defectos de Fundici\xf3n","\ud83d\udd0d"),edges:jp},tratamientosModificacion:{title:"Tratamientos de Modificaci\xf3n",description:"Modificaci\xf3n de microestructuras en metales fundidos.",icon:"\ud83d\udd27",nodes:kp("Tratamientos de Modificaci\xf3n","\ud83d\udd27"),edges:jp},conformadoMecanico:{title:"Conformado Mec\xe1nico",description:"Procesos de deformaci\xf3n pl\xe1stica de metales.",icon:"\ud83d\udd28",nodes:kp("Conformado Mec\xe1nico","\ud83d\udd28"),edges:jp},laminacion:{title:"Laminaci\xf3n",description:"Proceso de conformado por laminaci\xf3n.",icon:"\ud83d\udccf",nodes:kp("Laminaci\xf3n","\ud83d\udccf"),edges:jp},forja:{title:"Forja",description:"Conformado por deformaci\xf3n pl\xe1stica a alta temperatura.",icon:"\ud83d\udd28",nodes:kp("Forja","\ud83d\udd28"),edges:jp},extrusion:{title:"Extrusi\xf3n",description:"Proceso de conformado por extrusi\xf3n.",icon:"\ud83d\udd27",nodes:kp("Extrusi\xf3n","\ud83d\udd27"),edges:jp},trefilado:{title:"Trefilado",description:"Reducci\xf3n de di\xe1metro de alambres y barras.",icon:"\ud83d\udd27",nodes:kp("Trefilado","\ud83d\udd27"),edges:jp},conformadoChapas:{title:"Conformado de Chapas",description:"Procesos de conformado de l\xe1minas met\xe1licas.",icon:"\ud83d\udccb",nodes:kp("Conformado de Chapas","\ud83d\udccb"),edges:jp},tratamientosTermicos:{title:"Tratamientos T\xe9rmicos",description:"Procesos de calentamiento y enfriamiento controlado.",icon:"\ud83d\udd25",nodes:kp("Tratamientos T\xe9rmicos","\ud83d\udd25"),edges:jp},recocido:{title:"Recocido",description:"Tratamiento t\xe9rmico de recocido para ablandamiento.",icon:"\ud83d\udd25",nodes:kp("Recocido","\ud83d\udd25"),edges:jp},normalizado:{title:"Normalizado",description:"Tratamiento t\xe9rmico de normalizado.",icon:"\ud83d\udd25",nodes:kp("Normalizado","\ud83d\udd25"),edges:jp},temple:{title:"Temple",description:"Tratamiento t\xe9rmico de temple para endurecimiento.",icon:"\ud83d\udd25",nodes:kp("Temple","\ud83d\udd25"),edges:jp},revenido:{title:"Revenido",description:"Tratamiento t\xe9rmico de revenido para ajuste de propiedades.",icon:"\ud83d\udd25",nodes:kp("Revenido","\ud83d\udd25"),edges:jp},tratamientosTermoquimicos:{title:"Tratamientos Termoqu\xedmicos",description:"Procesos de difusi\xf3n de elementos en superficie.",icon:"\ud83d\udd25",nodes:kp("Tratamientos Termoqu\xedmicos","\ud83d\udd25"),edges:jp},soldaduraUnion:{title:"Soldadura y Uni\xf3n",description:"T\xe9cnicas de uni\xf3n de materiales met\xe1licos.",icon:"\ud83d\udd17",nodes:kp("Soldadura y Uni\xf3n","\ud83d\udd17"),edges:jp},procesosSoldadura:{title:"Procesos de Soldadura",description:"Diferentes procesos y t\xe9cnicas de soldadura.",icon:"\ud83d\udd17",nodes:kp("Procesos de Soldadura","\ud83d\udd17"),edges:jp},metalurgiaSoldadura:{title:"Metalurgia de la Soldadura",description:"Cambios metal\xfargicos durante procesos de soldadura.",icon:"\ud83d\udd17",nodes:kp("Metalurgia de la Soldadura","\ud83d\udd17"),edges:jp},matlab:{title:"MATLAB",description:"Software de computaci\xf3n num\xe9rica y an\xe1lisis de datos para ingenier\xeda metal\xfargica.",icon:"\ud83d\udcbb",nodes:kp("MATLAB","\ud83d\udcbb"),edges:jp},python:{title:"Python",description:"Lenguaje de programaci\xf3n para an\xe1lisis de datos y modelado en metalurgia.",icon:"\ud83d\udc0d",nodes:kp("Python","\ud83d\udc0d"),edges:jp},r:{title:"R",description:"Lenguaje de programaci\xf3n para an\xe1lisis estad\xedstico y visualizaci\xf3n de datos.",icon:"\ud83d\udcca",nodes:kp("R","\ud83d\udcca"),edges:jp},minitab:{title:"Minitab",description:"Software estad\xedstico para control de calidad y dise\xf1o de experimentos.",icon:"\ud83d\udcc8",nodes:kp("Minitab","\ud83d\udcc8"),edges:jp},jmp:{title:"JMP",description:"Software de an\xe1lisis estad\xedstico y visualizaci\xf3n de datos.",icon:"\ud83d\udcca",nodes:kp("JMP","\ud83d\udcca"),edges:jp},excelAvanzado:{title:"Excel Avanzado",description:"Herramientas avanzadas de Excel para an\xe1lisis de datos metal\xfargicos.",icon:"\ud83d\udcca",nodes:kp("Excel Avanzado","\ud83d\udcca"),edges:jp},hscChemistry:{title:"HSC Chemistry",description:"Software para c\xe1lculos termodin\xe1micos y equilibrios qu\xedmicos.",icon:"\ud83e\uddea",nodes:kp("HSC Chemistry","\ud83e\uddea"),edges:jp},metsim:{title:"METSIM",description:"Software de simulaci\xf3n de procesos metal\xfargicos.",icon:"\ud83c\udfed",nodes:kp("METSIM","\ud83c\udfed"),edges:jp},usimPac:{title:"USIM PAC",description:"Software de simulaci\xf3n y optimizaci\xf3n de procesos metal\xfargicos.",icon:"\u2699\ufe0f",nodes:kp("USIM PAC","\u2699\ufe0f"),edges:jp},limn:{title:"LIMN",description:"Software de simulaci\xf3n de flujos de fluidos en procesos metal\xfargicos.",icon:"\ud83c\udf0a",nodes:kp("LIMN","\ud83c\udf0a"),edges:jp},whittle:{title:"Whittle",description:"Software de optimizaci\xf3n de pit mining y planificaci\xf3n minera.",icon:"\u26cf\ufe0f",nodes:kp("Whittle","\u26cf\ufe0f"),edges:jp},analisisMultivariante:{title:"An\xe1lisis Multivariante",description:"T\xe9cnicas estad\xedsticas para an\xe1lisis de m\xfaltiples variables en metalurgia.",icon:"\ud83d\udcca",nodes:kp("An\xe1lisis Multivariante","\ud83d\udcca"),edges:jp},optimizacionLineal:{title:"Optimizaci\xf3n Lineal",description:"M\xe9todos de optimizaci\xf3n lineal aplicados a procesos metal\xfargicos.",icon:"\ud83d\udcd0",nodes:kp("Optimizaci\xf3n Lineal","\ud83d\udcd0"),edges:jp},redesNeuronales:{title:"Redes Neuronales",description:"Inteligencia artificial para modelado y predicci\xf3n en metalurgia.",icon:"\ud83e\udde0",nodes:kp("Redes Neuronales","\ud83e\udde0"),edges:jp},algoritmosGeneticos:{title:"Algoritmos Gen\xe9ticos",description:"Algoritmos de optimizaci\xf3n inspirados en evoluci\xf3n biol\xf3gica.",icon:"\ud83e\uddec",nodes:kp("Algoritmos Gen\xe9ticos","\ud83e\uddec"),edges:jp},controlEstadistico:{title:"Control Estad\xedstico",description:"T\xe9cnicas de control estad\xedstico de procesos metal\xfargicos.",icon:"\ud83d\udcca",nodes:kp("Control Estad\xedstico","\ud83d\udcca"),edges:jp},sistemasScada:{title:"Sistemas SCADA",description:"Sistemas de supervisi\xf3n, control y adquisici\xf3n de datos.",icon:"\ud83d\udda5\ufe0f",nodes:kp("Sistemas SCADA","\ud83d\udda5\ufe0f"),edges:jp},dcs:{title:"DCS",description:"Sistemas de control distribuido para procesos industriales.",icon:"\u2699\ufe0f",nodes:kp("DCS","\u2699\ufe0f"),edges:jp},sensores:{title:"Sensores",description:"Tecnolog\xedas de sensores para monitoreo de procesos metal\xfargicos.",icon:"\ud83d\udce1",nodes:kp("Sensores","\ud83d\udce1"),edges:jp},analizadoresLinea:{title:"Analizadores en L\xednea",description:"Equipos de an\xe1lisis autom\xe1tico en procesos metal\xfargicos.",icon:"\ud83d\udd2c",nodes:kp("Analizadores en L\xednea","\ud83d\udd2c"),edges:jp},controladoresPid:{title:"Controladores PID",description:"Controladores proporcional-integral-derivativo para procesos metal\xfargicos.",icon:"\ud83c\udf9b\ufe0f",nodes:kp("Controladores PID","\ud83c\udf9b\ufe0f"),edges:jp},autocad:{title:"AutoCAD",description:"Software de dise\xf1o asistido por computadora para ingenier\xeda metal\xfargica.",icon:"\ud83d\udcd0",nodes:kp("AutoCAD","\ud83d\udcd0"),edges:jp},solidworks:{title:"SolidWorks",description:"Software de dise\xf1o 3D y modelado param\xe9trico.",icon:"\ud83d\udd27",nodes:kp("SolidWorks","\ud83d\udd27"),edges:jp},catia:{title:"CATIA",description:"Software de dise\xf1o y fabricaci\xf3n asistida por computadora.",icon:"\ud83c\udfed",nodes:kp("CATIA","\ud83c\udfed"),edges:jp},inventor:{title:"Inventor",description:"Software de dise\xf1o 3D y simulaci\xf3n de productos.",icon:"\ud83d\udd27",nodes:kp("Inventor","\ud83d\udd27"),edges:jp},fusion360:{title:"Fusion 360",description:"Software de dise\xf1o 3D y fabricaci\xf3n en la nube.",icon:"\u2601\ufe0f",nodes:kp("Fusion 360","\u2601\ufe0f"),edges:jp},ansys:{title:"ANSYS",description:"Software de an\xe1lisis por elementos finitos para ingenier\xeda.",icon:"\u26a1",nodes:kp("ANSYS","\u26a1"),edges:jp},abaqus:{title:"ABAQUS",description:"Software de an\xe1lisis por elementos finitos y simulaci\xf3n.",icon:"\ud83d\udd2c",nodes:kp("ABAQUS","\ud83d\udd2c"),edges:jp},comsol:{title:"COMSOL",description:"Software de simulaci\xf3n multiphysics para ingenier\xeda.",icon:"\ud83c\udf10",nodes:kp("COMSOL","\ud83c\udf10"),edges:jp},lsDyna:{title:"LS-DYNA",description:"Software de an\xe1lisis din\xe1mico no lineal por elementos finitos.",icon:"\ud83d\udca5",nodes:kp("LS-DYNA","\ud83d\udca5"),edges:jp},deform:{title:"DEFORM",description:"Software de simulaci\xf3n de conformado de metales.",icon:"\ud83d\udd28",nodes:kp("DEFORM","\ud83d\udd28"),edges:jp},procast:{title:"ProCAST",description:"Software de simulaci\xf3n de procesos de fundici\xf3n.",icon:"\ud83d\udd25",nodes:kp("ProCAST","\ud83d\udd25"),edges:jp},magma:{title:"MAGMA",description:"Software de simulaci\xf3n de fundici\xf3n y solidificaci\xf3n.",icon:"\ud83d\udd25",nodes:kp("MAGMA","\ud83d\udd25"),edges:jp},flow3d:{title:"FLOW-3D",description:"Software de simulaci\xf3n de flujos de fluidos y metal fundido.",icon:"\ud83c\udf0a",nodes:kp("FLOW-3D","\ud83c\udf0a"),edges:jp},anycasting:{title:"AnyCasting",description:"Software de simulaci\xf3n de procesos de fundici\xf3n.",icon:"\ud83d\udd25",nodes:kp("AnyCasting","\ud83d\udd25"),edges:jp},novaflow:{title:"NovaFlow",description:"Software de simulaci\xf3n de flujos en procesos metal\xfargicos.",icon:"\ud83c\udf0a",nodes:kp("NovaFlow","\ud83c\udf0a"),edges:jp},dictra:{title:"DICTRA",description:"Software de simulaci\xf3n de difusi\xf3n en materiales.",icon:"\ud83d\udd04",nodes:kp("DICTRA","\ud83d\udd04"),edges:jp},thermocalc:{title:"Thermo-Calc",description:"Software de c\xe1lculos termodin\xe1micos y diagramas de fase.",icon:"\ud83d\udcc8",nodes:kp("Thermo-Calc","\ud83d\udcc8"),edges:jp},jmatpro:{title:"JMatPro",description:"Software de c\xe1lculo de propiedades de materiales.",icon:"\ud83d\udd2c",nodes:kp("JMatPro","\ud83d\udd2c"),edges:jp},mtdata:{title:"MTDATA",description:"Software de bases de datos termodin\xe1micas.",icon:"\ud83d\udcca",nodes:kp("MTDATA","\ud83d\udcca"),edges:jp},pandat:{title:"PANDAT",description:"Software de c\xe1lculo de diagramas de fase multicomponente.",icon:"\ud83d\udcc8",nodes:kp("PANDAT","\ud83d\udcc8"),edges:jp},metalografiaDigital:{title:"Metalograf\xeda Digital",description:"T\xe9cnicas digitales de an\xe1lisis microestructural de metales.",icon:"\ud83d\udd2c",nodes:kp("Metalograf\xeda Digital","\ud83d\udd2c"),edges:jp},ensayosMecanicos:{title:"Ensayos Mec\xe1nicos",description:"T\xe9cnicas de caracterizaci\xf3n mec\xe1nica de materiales met\xe1licos.",icon:"\ud83d\udcaa",nodes:kp("Ensayos Mec\xe1nicos","\ud83d\udcaa"),edges:jp},ensayosNoDestructivos:{title:"Ensayos No Destructivos",description:"T\xe9cnicas de inspecci\xf3n sin da\xf1ar el material.",icon:"\ud83d\udd0d",nodes:kp("Ensayos No Destructivos","\ud83d\udd0d"),edges:jp},mes:{title:"MES",description:"Sistemas de ejecuci\xf3n de manufactura para control de producci\xf3n.",icon:"\ud83c\udfed",nodes:kp("MES","\ud83c\udfed"),edges:jp},erp:{title:"ERP",description:"Sistemas de planificaci\xf3n de recursos empresariales.",icon:"\ud83d\udcbc",nodes:kp("ERP","\ud83d\udcbc"),edges:jp},leanManufacturing:{title:"Lean Manufacturing",description:"Metodolog\xedas de manufactura esbelta para optimizaci\xf3n de procesos.",icon:"\u26a1",nodes:kp("Lean Manufacturing","\u26a1"),edges:jp},sixSigma:{title:"Six Sigma",description:"Metodolog\xeda de mejora de procesos y control de calidad.",icon:"\ud83d\udcca",nodes:kp("Six Sigma","\ud83d\udcca"),edges:jp}};function Np(e){let{onClose:t}=e;return(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,To.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md relative text-center",children:[(0,To.jsx)("h2",{className:"text-xl font-bold mb-4 text-yellow-600",children:"Advertencia"}),(0,To.jsx)("p",{className:"mb-6 text-gray-700",children:"La edici\xf3n no est\xe1 disponible en dispositivos m\xf3viles o pantallas peque\xf1as. Por favor, utiliza una computadora o ampl\xeda la ventana para editar el roadmap."}),(0,To.jsx)("button",{onClick:t,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Cerrar"})]})})}const Cp={custom:e=>(0,To.jsx)(vp,{...e,onClick:()=>e.data.onNodeClick(e.id)})};function _p(e){let{node:t,onClose:n}=e;if(!t)return null;const r=(e=>({title:e.data.title||e.data.label||"Sin t\xedtulo",description:e.data.description||"Sin descripci\xf3n disponible.",freeResources:(e.data.links||[]).map(e=>({type:e.type||"art\xedculo",title:e.title||"Recurso sin t\xedtulo",url:e.url||"#"})),premiumResources:[]}))(t);return(0,To.jsxs)(To.Fragment,{children:[(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[200] transition-opacity duration-300",onClick:n}),(0,To.jsxs)("div",{className:"fixed top-0 right-0 h-screen w-full sm:w-3/4 md:w-2/3 lg:w-1/2 xl:w-2/5 bg-white z-[210] shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-4 md:p-6 border-b border-gray-200",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,To.jsx)("span",{className:"text-xl sm:text-2xl md:text-3xl",children:t.data.icon}),(0,To.jsx)("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-900 truncate",children:r.title})]}),(0,To.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 sm:p-2",children:(0,To.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,To.jsx)("div",{className:"flex-1 p-3 sm:p-4 md:p-6 overflow-y-auto",children:(0,To.jsxs)("div",{className:"space-y-4 sm:space-y-6 md:space-y-8",children:[(0,To.jsx)("div",{children:(0,To.jsx)("p",{className:"text-xs sm:text-sm md:text-base text-black leading-relaxed",children:r.description})}),r.freeResources&&r.freeResources.length>0&&(0,To.jsxs)("div",{children:[(0,To.jsxs)("div",{className:"relative mb-3 sm:mb-4",children:[(0,To.jsx)("div",{className:"absolute top-1/2 left-0 right-0 border-t border-green-500"}),(0,To.jsx)("div",{className:"text-left pl-3 sm:pl-4",children:(0,To.jsxs)("h4",{className:"text-xs sm:text-sm font-semibold text-green-700 border border-green-500 rounded-lg px-2 sm:px-3 py-1 bg-white inline-block relative z-10",children:[(0,To.jsx)("svg",{className:"inline w-3 h-3 mr-1 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),"Recursos gratuitos"]})})]}),(0,To.jsx)("div",{className:"space-y-1",children:r.freeResources.map((e,t)=>(0,To.jsxs)("div",{className:"flex items-center",children:[(0,To.jsx)("a",{href:e.url,className:"text-xs sm:text-sm font-semibold px-2 py-1 rounded mr-2 sm:mr-3 transition-colors hover:opacity-80 "+("art\xedculo"===e.type?"bg-yellow-500 text-black":"video"===e.type?"bg-purple-500 text-black":"libro"===e.type?"bg-blue-500 text-black":"bg-gray-500 text-black"),children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),(0,To.jsx)("a",{href:e.url,className:"text-gray-700 text-xs sm:text-sm md:text-base font-medium truncate hover:text-blue-600 transition-colors pr-2 sm:pr-4 underline decoration-gray-600 hover:decoration-blue-700",children:e.title})]},t))})]}),r.premiumResources&&r.premiumResources.length>0&&(0,To.jsxs)("div",{children:[(0,To.jsxs)("div",{className:"relative mb-3 sm:mb-4",children:[(0,To.jsx)("div",{className:"absolute top-1/2 left-0 right-0 border-t border-purple-500"}),(0,To.jsx)("div",{className:"text-left pl-3 sm:pl-4",children:(0,To.jsxs)("h4",{className:"text-xs sm:text-sm font-semibold text-purple-700 border border-purple-500 rounded-lg px-2 sm:px-3 py-1 bg-white inline-block relative z-10",children:[(0,To.jsx)("svg",{className:"inline w-3 h-3 mr-1 text-purple-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Recursos premium"]})})]}),(0,To.jsx)("div",{className:"space-y-1",children:r.premiumResources.map((e,t)=>(0,To.jsxs)("div",{className:"flex items-center",children:[(0,To.jsx)("a",{href:e.url,className:"text-xs sm:text-sm font-semibold px-2 py-1 rounded mr-2 sm:mr-3 transition-colors hover:opacity-80 bg-purple-500 text-black",children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),(0,To.jsx)("a",{href:e.url,className:"text-gray-700 text-xs sm:text-sm md:text-base font-medium truncate hover:text-blue-600 transition-colors pr-2 sm:pr-4 underline decoration-gray-600 hover:decoration-blue-700",children:e.title})]},t))})]})]})})]})]})}function Ep(){const{fitView:e}=ju();return(0,r.useEffect)(()=>{const t=setTimeout(()=>{console.log("FlowWithFitView: Ejecutando fit view autom\xe1tico"),e({padding:.2,includeHiddenNodes:!1,duration:800,minZoom:.1,maxZoom:1.5})},1500);return()=>clearTimeout(t)},[e]),null}function Pp(e){let{roadmapType:t="termodinamica",customNodes:n,customEdges:o,readOnly:a=!1,topVersion:i=null}=e;const s=Sp[t],l=$o(t),c=n||(l?l.nodes:s?s.nodes:bp),d=o||(l?l.edges:s?s.edges:wp);console.log("GraphLayout - customNodes:",n),console.log("GraphLayout - customEdges:",o),console.log("GraphLayout - initialRoadmapNodes:",c),console.log("GraphLayout - initialRoadmapEdges:",d);const[u,h,p]=Jh(c),[m,f,g]=Zh(d.map(e=>({...e,markerEnd:{type:Zc.ArrowClosed}})));(0,r.useEffect)(()=>{n&&n.length>0&&(console.log("Aplicando nodos personalizados:",n),h(n))},[n,h]),(0,r.useEffect)(()=>{o&&o.length>0&&(console.log("Aplicando edges personalizados:",o),f(o.map(e=>({...e,markerEnd:{type:Zc.ArrowClosed}}))))},[o,f]);const[v,x]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),{user:w}=Lo(),[k,j]=(ne(),(0,r.useState)(!1)),[S,N]=(0,r.useState)(!1),C=u.map(e=>({...e,data:{...e.data,onNodeClick:e=>x(e)}}));n||a||yp(u,m,h);const _=(0,r.useCallback)(e=>f(t=>yd(e,t)),[f]),E=u.find(e=>e.id===v);return(0,To.jsxs)("div",{className:"w-full h-screen flex flex-col",children:[(0,To.jsx)("div",{className:"react-flow-container",children:(0,To.jsxs)(Xh,{nodes:C,edges:m,onNodesChange:p,onEdgesChange:g,onConnect:_,nodeTypes:Cp,fitView:!1,fitViewOptions:{padding:.2,includeHiddenNodes:!1},defaultViewport:{x:0,y:0,zoom:.2},minZoom:.05,maxZoom:2,nodesDraggable:!1,nodesConnectable:!1,elementsSelectable:!0,panOnScroll:!1,zoomOnScroll:!1,panOnDrag:!0,zoomOnPinch:!0,panOnScrollMode:"free",attributionPosition:"bottom-left",translateExtent:[[-1e4,-1e4],[1e4,1e4]],onlyRenderVisibleElements:!1,children:[(0,To.jsx)(lp,{}),(0,To.jsx)(fp,{variant:"dots",gap:20,size:1,color:"#ffffff",style:{backgroundColor:"transparent"}}),(0,To.jsx)(Ep,{})]})}),(0,To.jsx)(_p,{node:E,onClose:()=>x(null)}),y&&(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,To.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md relative",children:[(0,To.jsx)("button",{onClick:()=>b(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-3xl font-bold leading-none focus:outline-none",style:{lineHeight:"1",width:"2.5rem",height:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"\xd7"}),(0,To.jsx)(Ao,{onClose:()=>b(!1)})]})}),k&&(0,To.jsx)(Np,{onClose:()=>j(!1)})]})}function Tp(e){let{title:t,description:n,icon:o,children:a,onBackClick:i,showPrintButton:s=!0,showShareButton:l=!0,showSuggestionsButton:c=!0,customBackText:d="All Roadmaps",recognitionPanel:u=null}=e;const h=ne();(0,r.useEffect)(()=>{const e=setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100);return()=>clearTimeout(e)},[]);return(0,To.jsxs)("div",{className:"min-h-screen bg-gray-50 roadmap-page",style:{overflow:"visible"},children:[(0,To.jsx)("div",{className:"h-2 sm:h-4 md:h-6 lg:h-8"}),(0,To.jsx)("div",{className:"max-w-6xl mx-auto px-8 sm:px-12 md:px-16 lg:px-20 xl:px-24 mb-2",style:{overflow:"visible"},children:(0,To.jsx)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",style:{overflow:"visible"},children:(0,To.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,To.jsx)("div",{className:"flex items-center",children:(0,To.jsxs)("button",{onClick:()=>{i?i():(h("/"),setTimeout(()=>{window.location.reload()},100))},className:"flex items-center px-3 sm:px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-xs sm:text-sm font-semibold hover:bg-gray-300 transition-all duration-300 shadow-sm hover:shadow-md",children:[(0,To.jsx)(po,{className:"mr-1 sm:mr-2"}),(0,To.jsx)("span",{className:"hidden sm:inline",children:d}),(0,To.jsx)("span",{className:"sm:hidden",children:"All"})]})}),(0,To.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2 md:space-x-3",children:[s&&(0,To.jsxs)("button",{className:"flex items-center px-2 sm:px-3 py-2 bg-orange-500 text-white rounded-md text-xs font-semibold hover:bg-orange-600 transition",onClick:()=>{const e=document.querySelectorAll(".no-print");e.forEach(e=>{e.style.display="none"});const r=document.createElement("style");r.textContent="\n      @media print {\n        body { margin: 0; padding: 0; }\n        .print-container { \n          width: 100% !important; \n          height: auto !important; \n          max-width: none !important;\n          margin: 0 !important;\n          padding: 20px !important;\n        }\n        .print-header {\n          background: white !important;\n          color: black !important;\n          padding: 20px !important;\n          margin-bottom: 20px !important;\n          border: 1px solid #ccc !important;\n          border-radius: 8px !important;\n        }\n        .print-content {\n          background: white !important;\n          color: black !important;\n          padding: 20px !important;\n          border: 1px solid #ccc !important;\n          border-radius: 8px !important;\n          min-height: 600px !important;\n        }\n        .print-title {\n          font-size: 24px !important;\n          font-weight: bold !important;\n          margin-bottom: 10px !important;\n          color: black !important;\n        }\n        .print-description {\n          font-size: 16px !important;\n          color: #666 !important;\n          margin-bottom: 20px !important;\n        }\n        .print-info {\n          font-size: 12px !important;\n          color: #888 !important;\n          margin-top: 20px !important;\n          text-align: center !important;\n        }\n        @page { margin: 1cm; }\n      }\n    ",document.head.appendChild(r);const a=window.open("","_blank");a.document.write(`\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>${t} - MetalRoadmap</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 0; padding: 0; }\n            .print-container { \n              width: 100%; \n              max-width: 800px; \n              margin: 0 auto; \n              padding: 20px; \n            }\n            .print-header {\n              background: white;\n              color: black;\n              padding: 20px;\n              margin-bottom: 20px;\n              border: 1px solid #ccc;\n              border-radius: 8px;\n            }\n            .print-content {\n              background: white;\n              color: black;\n              padding: 20px;\n              border: 1px solid #ccc;\n              border-radius: 8px;\n              min-height: 600px;\n            }\n            .print-title {\n              font-size: 24px;\n              font-weight: bold;\n              margin-bottom: 10px;\n              color: black;\n            }\n            .print-description {\n              font-size: 16px;\n              color: #666;\n              margin-bottom: 20px;\n            }\n            .print-info {\n              font-size: 12px;\n              color: #888;\n              margin-top: 20px;\n              text-align: center;\n            }\n            @media print {\n              @page { margin: 1cm; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="print-container">\n            <div class="print-header">\n              <div class="print-title">${o} ${t}</div>\n              <div class="print-description">${n}</div>\n              <div class="print-info">\n                Impreso desde MetalRoadmap - ${(new Date).toLocaleDateString()}\n              </div>\n            </div>\n            <div class="print-content">\n              <h3>Mapa Mental Interactivo</h3>\n              <p>Este roadmap contiene un mapa mental interactivo que se puede explorar en la versi\xf3n digital.</p>\n              <p>Para acceder al contenido completo, visita: ${window.location.href}</p>\n            </div>\n          </div>\n        </body>\n      </html>\n    `),a.document.close(),setTimeout(()=>{a.print(),a.close(),e.forEach(e=>{e.style.display=""}),document.head.removeChild(r)},500)},title:"Imprimir",children:[(0,To.jsx)(jo,{className:"mr-1"}),(0,To.jsx)("span",{className:"hidden sm:inline",children:"Imprimir"})]}),l&&(0,To.jsxs)("button",{className:"flex items-center px-2 sm:px-3 py-2 bg-orange-500 text-white rounded-md text-xs font-semibold hover:bg-orange-600 transition",onClick:()=>navigator.share?navigator.share({title:document.title,url:window.location.href}):alert("Funci\xf3n no soportada en este navegador."),title:"Compartir",children:[(0,To.jsx)(No,{className:"mr-1"}),(0,To.jsx)("span",{className:"hidden sm:inline",children:"Compartir"})]})]})]}),(0,To.jsxs)("div",{className:"mb-4",children:[(0,To.jsxs)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 mb-2 select-none pointer-events-none",children:[o," ",t]}),(0,To.jsx)("p",{className:"text-xs sm:text-sm md:text-lg text-gray-600",children:n})]}),(0,To.jsxs)("div",{className:"flex justify-end items-center space-x-2",children:[u?(0,To.jsx)("div",{className:"flex items-center space-x-3 mr-4 bg-blue-50 p-2 rounded-lg border border-blue-200",children:u}):(0,To.jsx)("div",{className:"text-xs text-gray-500 mr-4",children:"Cargando reconocimiento..."}),c&&(0,To.jsxs)("button",{className:"flex items-center px-2 sm:px-3 py-2 bg-gray-200 text-gray-700 rounded-md text-xs sm:text-sm font-semibold hover:bg-gray-300 transition",children:[(0,To.jsx)(wo,{className:"mr-1 sm:mr-2"}),(0,To.jsx)("span",{className:"hidden sm:inline",children:"Sugerencias"}),(0,To.jsx)("span",{className:"sm:hidden",children:"Sug"})]})]})]})})}),(0,To.jsx)("div",{className:"max-w-6xl mx-auto px-8 sm:px-12 md:px-16 lg:px-20 xl:px-24",style:{overflow:"visible"},children:(0,To.jsx)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:a})})]})}function Mp(){return(0,To.jsx)(Tp,{title:"Termodin\xe1mica Metal\xfargica",description:"Mapa mental interactivo de conceptos fundamentales de termodin\xe1mica aplicada a procesos metal\xfargicos",icon:"\ud83d\udd25",children:(0,To.jsx)(Pp,{})})}const Rp=e=>{let{version:t,onClose:n,onProposalCreated:o}=e;const{user:a}=Lo(),[i,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)({title:"",description:"",changes:[{type:"node",action:"add",before:"",after:""}]}),d=(e,t)=>{c(n=>({...n,[e]:t}))},u=(e,t,n)=>{c(r=>({...r,changes:r.changes.map((r,o)=>o===e?{...r,[t]:n}:r)}))};return(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,To.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,To.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Nueva Propuesta de Edici\xf3n"}),(0,To.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,To.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,To.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Creando propuesta para la versi\xf3n del ",new Date(t.created_at).toLocaleDateString("es-ES")]})]}),(0,To.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a)if(l.title.trim())if(l.changes.every(e=>!e.after.trim()))alert("Debes agregar al menos un cambio");else try{s(!0);const e={id:Date.now(),version_id:t.id,author:{name:a.email||"Usuario"},title:l.title,description:l.description,changes:l.changes.filter(e=>e.after.trim()),created_at:(new Date).toISOString(),status:"pending",votes:[],comments:[]};console.log("Creando propuesta:",e),o(e),n()}catch(r){console.error("Error creating proposal:",r),alert("Error al crear la propuesta: "+r.message)}finally{s(!1)}else alert("Debes agregar un t\xedtulo a la propuesta");else alert("Debes iniciar sesi\xf3n para crear una propuesta")},className:"p-6 space-y-6",children:[(0,To.jsxs)("div",{children:[(0,To.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xedtulo de la propuesta *"}),(0,To.jsx)("input",{type:"text",value:l.title,onChange:e=>d("title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente tu propuesta...",required:!0})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n (opcional)"}),(0,To.jsx)("textarea",{value:l.description,onChange:e=>d("description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Explica el razonamiento detr\xe1s de tus cambios..."})]}),(0,To.jsxs)("div",{children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,To.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cambios propuestos *"}),(0,To.jsxs)("button",{type:"button",onClick:()=>{c(e=>({...e,changes:[...e.changes,{type:"node",action:"add",before:"",after:""}]}))},className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,To.jsx)("span",{children:"Agregar cambio"})]})]}),(0,To.jsx)("div",{className:"space-y-4",children:l.changes.map((e,t)=>(0,To.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,To.jsxs)("h4",{className:"text-sm font-medium text-gray-900",children:["Cambio #",t+1]}),l.changes.length>1&&(0,To.jsx)("button",{type:"button",onClick:()=>(e=>{c(t=>({...t,changes:t.changes.filter((t,n)=>n!==e)}))})(t),className:"text-red-600 hover:text-red-800",children:(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,To.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,To.jsxs)("div",{children:[(0,To.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tipo"}),(0,To.jsxs)("select",{value:e.type,onChange:e=>u(t,"type",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:[(0,To.jsx)("option",{value:"node",children:"Nodo"}),(0,To.jsx)("option",{value:"connection",children:"Conexi\xf3n"})]})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Acci\xf3n"}),(0,To.jsxs)("select",{value:e.action,onChange:e=>u(t,"action",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:[(0,To.jsx)("option",{value:"add",children:"Agregar"}),(0,To.jsx)("option",{value:"modify",children:"Modificar"}),(0,To.jsx)("option",{value:"remove",children:"Eliminar"})]})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Estado actual (opcional)"}),(0,To.jsx)("input",{type:"text",value:e.before,onChange:e=>u(t,"before",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent",placeholder:"Texto actual..."})]})]}),(0,To.jsxs)("div",{className:"mt-3",children:[(0,To.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Nuevo contenido *"}),(0,To.jsx)("textarea",{value:e.after,onChange:e=>u(t,"after",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Describe el nuevo contenido...",required:!0})]})]},t))})]})]}),(0,To.jsxs)("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,To.jsx)("span",{className:"font-medium",children:"Nota:"})," Tu propuesta ser\xe1 revisada por la comunidad"]}),(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,To.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:i?"Creando...":"Crear Propuesta"})]})]})]})})},Lp=e=>{let{proposal:t,onClose:n,onVote:o}=e;const{user:a}=Lo(),[i,s]=(0,r.useState)(null),[l,c]=(0,r.useState)(""),d=e=>{a?s(e):alert("Debes iniciar sesi\xf3n para votar")},u=(e,t)=>{if(0===e.length)return 0;const n=e.filter(e=>e.vote===t).length;return Math.round(n/e.length*100)};return(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,To.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,To.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Detalles de la Propuesta"}),(0,To.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,To.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,To.jsxs)("div",{className:"p-6 space-y-6",children:[(0,To.jsxs)("div",{children:[(0,To.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.title}),(0,To.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Propuesta por: ",t.author.name," \u2022 ",new Date(t.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),t.description&&(0,To.jsx)("p",{className:"text-gray-700 text-sm",children:t.description})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Cambios propuestos:"}),(0,To.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:t.changes.map((e,t)=>(0,To.jsxs)("div",{className:"border-l-4 border-blue-500 pl-3",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,To.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"node"===e.type?"Nodo":"Conexi\xf3n"}),(0,To.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,To.jsx)("span",{className:"text-sm text-gray-600",children:e.action})]}),(0,To.jsx)("div",{className:"text-sm text-gray-600",children:(0,To.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,To.jsxs)("div",{children:[(0,To.jsx)("span",{className:"font-medium",children:"Antes:"}),(0,To.jsx)("div",{className:"mt-1 p-2 bg-red-50 rounded text-xs",children:e.before||"N/A"})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("span",{className:"font-medium",children:"Despu\xe9s:"}),(0,To.jsx)("div",{className:"mt-1 p-2 bg-green-50 rounded text-xs",children:e.after||"N/A"})]})]})})]},t))})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Votaci\xf3n actual:"}),(0,To.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,To.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,To.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Aprobado"}),(0,To.jsxs)("span",{className:"text-sm font-bold text-green-700",children:[u(t.votes,"approve"),"%"]})]}),(0,To.jsx)("div",{className:"w-full bg-green-200 rounded-full h-2",children:(0,To.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${u(t.votes,"approve")}%`}})}),(0,To.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:[t.votes.filter(e=>"approve"===e.vote).length," votos"]})]}),(0,To.jsxs)("div",{className:"bg-red-50 rounded-lg p-3",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,To.jsx)("span",{className:"text-sm font-medium text-red-700",children:"Rechazado"}),(0,To.jsxs)("span",{className:"text-sm font-bold text-red-700",children:[u(t.votes,"reject"),"%"]})]}),(0,To.jsx)("div",{className:"w-full bg-red-200 rounded-full h-2",children:(0,To.jsx)("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${u(t.votes,"reject")}%`}})}),(0,To.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:[t.votes.filter(e=>"reject"===e.vote).length," votos"]})]})]})]}),a&&(0,To.jsxs)("div",{children:[(0,To.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Tu voto:"}),(0,To.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,To.jsx)("button",{onClick:()=>d("approve"),className:"px-4 py-2 rounded-lg border-2 transition-colors "+("approve"===i?"border-green-500 bg-green-50 text-green-700":"border-gray-300 hover:border-green-500"),children:"\ud83d\udc4d Aprobar"}),(0,To.jsx)("button",{onClick:()=>d("reject"),className:"px-4 py-2 rounded-lg border-2 transition-colors "+("reject"===i?"border-red-500 bg-red-50 text-red-700":"border-gray-300 hover:border-red-500"),children:"\ud83d\udc4e Rechazar"})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario (opcional):"}),(0,To.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Explica tu voto..."})]})]}),t.comments&&t.comments.length>0&&(0,To.jsxs)("div",{children:[(0,To.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Comentarios:"}),(0,To.jsx)("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:t.comments.map((e,t)=>(0,To.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,To.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.author.name}),(0,To.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,To.jsx)("p",{className:"text-sm text-gray-600",children:e.text})]},t))})]})]}),(0,To.jsxs)("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,To.jsx)("span",{className:"font-medium",children:"Estado:"}),(0,To.jsxs)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs "+("pending"===t.status?"bg-yellow-100 text-yellow-800":"approved"===t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["pending"===t.status&&"En votaci\xf3n","approved"===t.status&&"Aprobado","rejected"===t.status&&"Rechazado"]})]}),(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("button",{onClick:n,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"}),a&&i&&(0,To.jsx)("button",{onClick:()=>{i?(o(t.id,i,l),n()):alert("Debes seleccionar un voto")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Enviar Voto"})]})]})]})})},Ap=e=>{var t,n;let{roadmapType:o,onVersionSelect:a,onEditVersion:i}=e;const{user:s}=Lo(),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[h,p]=(0,r.useState)({}),[m,f]=(0,r.useState)({}),[g,v]=(0,r.useState)({}),[x,y]=(0,r.useState)({}),[b,w]=(0,r.useState)(!1),[k,j]=(0,r.useState)(null),[S,N]=(0,r.useState)(!1),[C,_]=(0,r.useState)(null),[E,P]=(0,r.useState)(null),[T,M]=(0,r.useState)(!1);(0,r.useEffect)(()=>{R(),s&&(L(),O())},[o,s]);const R=async()=>{try{u(!0),console.log("Cargando versiones para roadmap:",o);const{data:e,error:t}=await Qr.from("roadmap_versions").select("*").eq("roadmap_type",o).eq("is_public",!0).order("total_votes",{ascending:!1}).limit(5);if(t)return console.error("Error en consulta Supabase:",t),console.log("Detalles del error:",t.message,t.details,t.hint),void c([]);console.log("Versiones encontradas:",e),console.log("Query ejecutada correctamente"),c(e||[])}catch(e){console.error("Error loading top versions:",e),c([])}finally{u(!1)}},L=async()=>{try{const{data:e,error:t}=await Qr.from("roadmap_votes").select("version_id, vote_type").eq("user_id",s.id).in("version_id",l.map(e=>e.id));if(t)throw t;const n={};null===e||void 0===e||e.forEach(e=>{n[e.version_id]=e.vote_type}),p(n)}catch(e){console.error("Error loading user votes:",e)}},A=async e=>{try{y(t=>({...t,[e]:!0}));const t=[{id:1,author:{name:"Usuario Ejemplo"},created_at:(new Date).toISOString(),changes:[{type:"node",action:"Agregar",before:null,after:"Nuevo concepto de metalurgia"}],votes:[{vote:"approve"},{vote:"approve"},{vote:"reject"}],status:"pending",comments:[]}];v(n=>({...n,[e]:t}))}catch(t){console.error("Error loading proposals:",t)}finally{y(t=>({...t,[e]:!1}))}},O=async()=>{if(s)try{M(!0);P(null)}catch(e){console.error("Error loading user proposal:",e)}finally{M(!1)}},z=async(e,t)=>{if(s)try{const n=h[e];if(n===t){const{data:n}=await Qr.from("roadmap_versions").select("total_votes, up_votes, down_votes").eq("id",e).single();await Qr.from("roadmap_votes").delete().eq("version_id",e).eq("user_id",s.id),await Qr.from("roadmap_versions").update({total_votes:((null===n||void 0===n?void 0:n.total_votes)||0)-1,["up"===t?"up_votes":"down_votes"]:((null===n||void 0===n?void 0:n["up"===t?"up_votes":"down_votes"])||0)-1}).eq("id",e),p(t=>{const n={...t};return delete n[e],n})}else{const{data:r}=await Qr.from("roadmap_versions").select("total_votes, up_votes, down_votes").eq("id",e).single();await Qr.from("roadmap_votes").upsert({version_id:e,user_id:s.id,vote_type:t});let o=((null===r||void 0===r?void 0:r.total_votes)||0)+1,a=(null===r||void 0===r?void 0:r.up_votes)||0,i=(null===r||void 0===r?void 0:r.down_votes)||0;"up"===t?a+=1:i+=1,n&&("up"===n?a-=1:i-=1),await Qr.from("roadmap_versions").update({total_votes:o,up_votes:a,down_votes:i}).eq("id",e),p(n=>({...n,[e]:t}))}R()}catch(n){console.error("Error voting:",n),alert("Error al votar: "+n.message)}else alert("Debes iniciar sesi\xf3n para votar")};return d?(0,To.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,To.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Versiones Mejor Votadas"}),(0,To.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,To.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})]}):(0,To.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,To.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Versiones Mejor Votadas"}),(0,To.jsxs)("div",{className:"text-sm text-gray-600",children:[l.length," versiones p\xfablicas"]})]}),s&&E&&(0,To.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,To.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Tu Propuesta Pendiente"}),(0,To.jsx)("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"En votaci\xf3n"})]}),(0,To.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:E.description||"Propuesta de edici\xf3n"}),(0,To.jsxs)("div",{className:"flex items-center justify-between text-xs text-blue-600",children:[(0,To.jsxs)("span",{children:[(null===(t=E.changes)||void 0===t?void 0:t.length)||0," cambios propuestos"]}),(0,To.jsxs)("span",{children:[(null===(n=E.votes)||void 0===n?void 0:n.length)||0," votos recibidos"]})]})]}),0===l.length?(0,To.jsxs)("div",{className:"text-center py-8",children:[(0,To.jsx)("div",{className:"text-gray-400 mb-4",children:(0,To.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,To.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay versiones p\xfablicas"}),(0,To.jsx)("p",{className:"text-gray-600",children:"A\xfan no se han publicado versiones p\xfablicas de este roadmap."})]}):(0,To.jsx)("div",{className:"space-y-4",children:l.map((e,t)=>(0,To.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors",children:[(0,To.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,To.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["#",t+1]})}),(0,To.jsxs)("div",{children:[(0,To.jsx)("p",{className:"font-medium text-gray-900",children:"Versi\xf3n por Usuario"}),(0,To.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("div",{className:"text-lg font-bold text-gray-900",children:e.total_votes||0}),(0,To.jsx)("div",{className:"text-xs text-gray-500",children:"votos"})]}),(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsxs)("div",{className:"text-sm font-medium text-green-600",children:["+",e.up_votes||0]}),(0,To.jsx)("div",{className:"text-xs text-gray-500",children:"positivos"})]})]})]}),e.description&&(0,To.jsx)("p",{className:"text-gray-700 mb-3 text-sm",children:e.description}),(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("button",{onClick:()=>z(e.id,"up"),className:"p-2 rounded-lg transition-colors "+("up"===h[e.id]?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600 hover:bg-green-100 hover:text-green-700"),title:"Votar positivamente",children:(0,To.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,To.jsx)("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),(0,To.jsx)("button",{onClick:()=>z(e.id,"down"),className:"p-2 rounded-lg transition-colors "+("down"===h[e.id]?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600 hover:bg-red-100 hover:text-red-700"),title:"Votar negativamente",children:(0,To.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,To.jsx)("path",{fillRule:"evenodd",d:"M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l4.293-4.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,To.jsxs)("div",{className:"flex space-x-2",children:[(0,To.jsxs)("button",{onClick:()=>(e=>{const t=m[e];f(n=>({...n,[e]:!t})),t||g[e]||A(e)})(e.id),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors flex items-center space-x-1 relative",children:[(0,To.jsx)("svg",{className:"w-4 h-4 transition-transform duration-200 "+(m[e.id]?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,To.jsx)("span",{children:"Propuestas"}),g[e.id]&&g[e.id].length>0&&(0,To.jsx)("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:g[e.id].length})]}),a&&(0,To.jsx)("button",{onClick:()=>a(e),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Mostrar Aqu\xed"})]})]}),m[e.id]&&(0,To.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,To.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Propuestas de Edici\xf3n"}),E?(0,To.jsxs)("div",{className:"px-3 py-1 text-xs bg-gray-300 text-gray-600 rounded-lg flex items-center space-x-1 cursor-not-allowed",title:"Ya tienes una propuesta pendiente",children:[(0,To.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,To.jsx)("span",{children:"Propuesta Pendiente"})]}):(0,To.jsxs)("button",{onClick:()=>(e=>{s?E?alert("Ya tienes una propuesta pendiente. No puedes crear otra propuesta hasta que la actual sea aprobada o rechazada."):i&&i(e):alert("Debes iniciar sesi\xf3n para crear una propuesta")})(e),className:"px-3 py-1 text-xs bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-1",children:[(0,To.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,To.jsx)("span",{children:"Editar y Proponer"})]})]}),x[e.id]?(0,To.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,To.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"})}):g[e.id]&&g[e.id].length>0?(0,To.jsx)("div",{className:"space-y-3",children:g[e.id].map(e=>(0,To.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("span",{className:"text-xs font-medium text-gray-700",children:e.author.name}),(0,To.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,To.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("es-ES")})]}),(0,To.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs "+("pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["pending"===e.status&&"En votaci\xf3n","approved"===e.status&&"Aprobado","rejected"===e.status&&"Rechazado"]})]}),(0,To.jsx)("div",{className:"text-xs text-gray-600 mb-2",children:e.changes.map((e,t)=>(0,To.jsxs)("div",{className:"mb-1",children:[(0,To.jsxs)("span",{className:"font-medium",children:[e.action,":"]})," ",e.after]},t))}),(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,To.jsxs)("span",{className:"text-green-600",children:["\ud83d\udc4d ",e.votes.filter(e=>"approve"===e.vote).length]}),(0,To.jsxs)("span",{className:"text-red-600",children:["\ud83d\udc4e ",e.votes.filter(e=>"reject"===e.vote).length]})]}),(0,To.jsx)("button",{onClick:()=>(e=>{_(e),N(!0)})(e),className:"text-xs text-blue-600 hover:text-blue-800",children:"Ver detalles"})]})]},e.id))}):(0,To.jsx)("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No hay propuestas de edici\xf3n para esta versi\xf3n"})]})]},e.id))}),b&&k&&(0,To.jsx)(Rp,{version:k,onClose:()=>{w(!1),j(null)},onProposalCreated:e=>{v(t=>({...t,[k.id]:[...t[k.id]||[],e]}))}}),S&&C&&(0,To.jsx)(Lp,{proposal:C,onClose:()=>{N(!1),_(null)},onVote:(e,t,n)=>{console.log("Voto registrado:",{proposalId:e,vote:t,comment:n}),k&&A(k.id)}})]})};function Op(){return(0,To.jsx)("footer",{className:"bg-blue-900 py-6 pb-10 text-white sm:py-16 relative z-10",children:(0,To.jsxs)("div",{className:"container mx-auto px-4",children:[(0,To.jsxs)("p",{className:"mb-8 flex flex-col justify-center gap-0 font-medium text-blue-200 sm:mb-16 sm:flex-row sm:gap-4",children:[(0,To.jsx)("a",{className:"border-b border-b-blue-700 px-2 py-1.5 transition-colors hover:text-white sm:border-b-0 sm:px-0 sm:py-0",href:"/roadmaps",children:"Roadmaps"}),(0,To.jsx)("a",{className:"border-b border-b-blue-700 px-2 py-1.5 transition-colors hover:text-white sm:border-b-0 sm:px-0 sm:py-0",href:"/best-practices",children:"Best Practices"}),(0,To.jsx)("a",{className:"border-b border-b-blue-700 px-2 py-1.5 transition-colors hover:text-white sm:border-b-0 sm:px-0 sm:py-0",href:"/guides",children:"Guides"}),(0,To.jsx)("a",{className:"border-b border-b-blue-700 px-2 py-1.5 transition-colors hover:text-white sm:border-b-0 sm:px-0 sm:py-0",href:"/videos",children:"Videos"}),(0,To.jsx)("a",{className:"border-b border-b-blue-700 px-2 py-1.5 transition-colors hover:text-white sm:border-b-0 sm:px-0 sm:py-0",href:"/about",children:"FAQs"}),(0,To.jsx)("a",{className:"px-2 py-1.5 transition-colors hover:text-white sm:border-b-0 sm:px-0 sm:py-0",href:"https://youtube.com/theroadmap?sub_confirmation=1",target:"_blank",rel:"noopener noreferrer",children:"YouTube"})]}),(0,To.jsxs)("div",{className:"flex flex-col justify-between gap-8 lg:flex-row lg:gap-2",children:[(0,To.jsxs)("div",{className:"max-w-[425px]",children:[(0,To.jsxs)("p",{className:"text-md flex items-center",children:[(0,To.jsxs)("div",{className:"inline-flex items-center text-lg font-medium text-white cursor-default",children:[(0,To.jsx)("img",{src:"/assets/logo.png",alt:"my-metal-roadmap",className:"w-10 h-10 mr-2 filter brightness-0 invert"}),(0,To.jsx)("span",{className:"ml-2",children:"my-metal-roadmap"})]}),(0,To.jsx)("span",{className:"mx-2 text-blue-300",children:"by"}),(0,To.jsxs)("a",{className:"font-regular rounded-md bg-blue-600 px-1.5 py-1 text-sm hover:bg-blue-700",href:"https://www.linkedin.com/in/alex-j-geri-660918139",target:"_blank",rel:"noopener noreferrer",children:[(0,To.jsx)("span",{className:"hidden sm:inline",children:"Alex J. Geri"}),(0,To.jsx)("span",{className:"inline sm:hidden",children:"Alex J. Geri"})]})]}),(0,To.jsx)("p",{className:"my-4 text-blue-200/60",children:"Roadmaps educativos, mejores pr\xe1cticas, recursos y comunidad para crecer en tu carrera."}),(0,To.jsx)("div",{className:"text-sm text-blue-300",children:(0,To.jsxs)("p",{children:["\xa9 my-metal-roadmap",(0,To.jsx)("span",{className:"mx-1.5",children:"\xb7"}),(0,To.jsx)("a",{href:"/terms",className:"hover:text-white",children:"T\xe9rminos"}),(0,To.jsx)("span",{className:"mx-1.5",children:"\xb7"}),(0,To.jsx)("a",{href:"/privacy",className:"hover:text-white",children:"Privacidad"}),(0,To.jsx)("span",{className:"mx-1.5",children:"\xb7"}),(0,To.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"inline-block h-5 w-5 fill-current",children:[(0,To.jsx)("g",{clipPath:"url(#clip0_2344_20)",children:(0,To.jsx)("path",{d:"M0 0V24H24V0H0ZM8 19H5V8H8V19ZM6.5 6.732C5.534 6.732 4.75 5.942 4.75 4.968C4.75 3.994 5.534 3.204 6.5 3.204C7.466 3.204 8.25 3.994 8.25 4.968C8.25 5.942 7.467 6.732 6.5 6.732ZM20 19H17V13.396C17 10.028 13 10.283 13 13.396V19H10V8H13V9.765C14.397 7.179 20 6.988 20 12.241V19Z",fill:"currentColor"})}),(0,To.jsx)("defs",{children:(0,To.jsx)("clipPath",{id:"clip0_2344_20",children:(0,To.jsx)("rect",{width:"24",height:"24",rx:"2",fill:"white"})})})]}),(0,To.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"inline-block h-5 w-5 ml-2",children:(0,To.jsx)("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0C.488 3.45.029 5.804 0 12c.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"})}),(0,To.jsxs)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",id:"Bluesky--Streamline-Simple-Icons",height:"24",width:"24",className:"inline-block h-5 w-5 fill-current ml-2",children:[(0,To.jsx)("desc",{children:"Bluesky Streamline Icon: https://streamlinehq.com"}),(0,To.jsx)("title",{children:"Bluesky"}),(0,To.jsx)("path",{d:"M12 10.8c-1.087 -2.114 -4.046 -6.053 -6.798 -7.995C2.566 0.944 1.561 1.266 0.902 1.565 0.139 1.908 0 3.08 0 3.768c0 0.69 0.378 5.65 0.624 6.479 0.815 2.736 3.713 3.66 6.383 3.364 0.136 -0.02 0.275 -0.039 0.415 -0.056 -0.138 0.022 -0.276 0.04 -0.415 0.056 -3.912 0.58 -7.387 2.005 -2.83 7.078 5.013 5.19 6.87 -1.113 7.823 -4.308 0.953 3.195 2.05 9.271 7.733 4.308 4.267 -4.308 1.172 -6.498 -2.74 -7.078a8.741 8.741 0 0 1 -0.415 -0.056c0.14 0.017 0.279 0.036 0.415 0.056 2.67 0.297 5.568 -0.628 6.383 -3.364 0.246 -0.828 0.624 -5.79 0.624 -6.478 0 -0.69 -0.139 -1.861 -0.902 -2.206 -0.659 -0.298 -1.664 -0.62 -4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z",fill:"currentColor",strokeWidth:"1"})]})]})})]}),(0,To.jsxs)("div",{className:"max-w-[340px] text-left lg:text-right",children:[(0,To.jsx)("p",{className:"my-4 text-blue-200/60",children:"El mejor recurso para roadmaps, recursos y comunidad educativa en metalurgia y ciencia."}),(0,To.jsx)("div",{className:"text-sm text-blue-300",children:(0,To.jsxs)("p",{children:[(0,To.jsx)("a",{href:"/privacy",className:"text-blue-300 hover:text-white",children:"Pol\xedtica de Privacidad"}),(0,To.jsx)("span",{className:"mx-1.5",children:"\xb7"}),(0,To.jsx)("a",{href:"/terms",className:"text-blue-300 hover:text-white",children:"T\xe9rminos"})]})})]})]})]})})}function zp(){const{roadmapType:e}=re(),t=ne(),[n,o]=(0,r.useState)(null),[a,i]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),u=Sp[e],h=$o(e),p=null!==h;(0,r.useEffect)(()=>{(async()=>{try{d(!0);const{data:t,error:n}=await Qr.from("roadmap_versions").select("*").eq("roadmap_type",e).eq("is_public",!0).order("total_votes",{ascending:!1}).limit(1).single();if(n&&"PGRST116"!==n.code)console.error("Error cargando versi\xf3n mejor votada:",n);else if(t)if(console.log("Versi\xf3n mejor votada cargada:",t),i(t),o(t),t.user_id){const{data:e,error:n}=await Qr.from("auth.users").select("id, email, user_metadata").eq("id",t.user_id).single();l(!n&&e?e:null)}else l(null)}catch(t){console.error("Error cargando versi\xf3n mejor votada:",t)}finally{d(!1)}})()},[e]);return u?(0,To.jsxs)(To.Fragment,{children:[(0,To.jsxs)(Tp,{title:u.title,description:u.description,icon:u.icon,recognitionPanel:a?(0,To.jsx)(xp,{topVersion:a,authorInfo:s}):(0,To.jsx)("div",{className:"text-xs text-red-500",children:"No hay versi\xf3n mejor votada"}),children:[p&&h&&(0,To.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,To.jsxs)("span",{className:"text-sm text-green-700 font-medium",children:["Mostrando versi\xf3n guardada (",new Date(h.lastModified).toLocaleDateString(),")"]})]}),(0,To.jsx)("button",{onClick:()=>{window.confirm("\xbfEst\xe1s seguro de que quieres restablecer el roadmap a su estado original?")&&(Do(e),window.location.reload())},className:"px-3 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",title:"Restablecer a estado original",children:"Restablecer"})]})}),c&&(0,To.jsx)("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),(0,To.jsx)("span",{className:"text-sm text-gray-600",children:"Cargando versi\xf3n mejor votada..."})]})}),(0,To.jsx)(Pp,{roadmapType:e,customNodes:n?n.nodes:null,customEdges:n?n.edges:null,readOnly:!0})]}),(0,To.jsx)("div",{className:"bg-gray-50 py-8",children:(0,To.jsx)("div",{className:"max-w-6xl mx-auto px-8 sm:px-12 md:px-16 lg:px-20 xl:px-24",children:(0,To.jsx)(Ap,{roadmapType:e,onVersionSelect:e=>{o(e)},onEditVersion:n=>{if(n&&n.nodes&&n.edges){const r={nodes:n.nodes,edges:n.edges,lastModified:(new Date).toISOString(),versionId:n.id,versionInfo:n},o=`roadmap_${e}_version_${n.id}`;localStorage.setItem(o,JSON.stringify(r)),t(`/edit/${e}?version=${n.id}`)}}})})}),(0,To.jsx)(Op,{})]}):(0,To.jsx)("div",{className:"w-full h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Roadmap no encontrado"}),(0,To.jsxs)("p",{className:"text-gray-600 mb-6",children:['El roadmap "',e,'" no existe.']}),(0,To.jsx)("button",{onClick:()=>t("/"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Volver al Inicio"})]})})}const Ip=e=>{let{id:t,x:n,y:o,width:a,height:i,style:s,color:l,strokeColor:c,strokeWidth:d,className:u,borderRadius:h,shapeRendering:p,onClick:m,selected:f}=e;const{background:g,backgroundColor:v}=s||{},x=l||g||v;return r.createElement("rect",{className:da(["react-flow__minimap-node",{selected:f},u]),x:n,y:o,rx:h,ry:h,width:a,height:i,fill:x,stroke:c,strokeWidth:d,shapeRendering:p,onClick:m?e=>m(e,t):void 0})};Ip.displayName="MiniMapNode";var $p=(0,r.memo)(Ip);const Dp=e=>e.nodeOrigin,Bp=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),Fp=e=>e instanceof Function?e:()=>e;var Hp=(0,r.memo)(function(e){let{nodeStrokeColor:t="transparent",nodeColor:n="#e2e2e2",nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i=2,nodeComponent:s=$p,onClick:l}=e;const c=yc(Bp,ya),d=yc(Dp),u=Fp(n),h=Fp(t),p=Fp(o),m="undefined"===typeof window||window.chrome?"crispEdges":"geometricPrecision";return r.createElement(r.Fragment,null,c.map(e=>{const{x:t,y:n}=kd(e,d).positionAbsolute;return r.createElement(s,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:p(e),color:u(e),borderRadius:a,strokeColor:h(e),strokeWidth:i,shapeRendering:m,onClick:l,id:e.id})}))});const Up=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?(r=jd(t,e.nodeOrigin),o=n,Lc(Mc(Rc(r),Rc(o)))):n,rfId:e.rfId};var r,o};function qp(e){let{style:t,className:n,nodeStrokeColor:o="transparent",nodeColor:a="#e2e2e2",nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:l=2,nodeComponent:c,maskColor:d="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:h=1,position:p="bottom-right",onClick:m,onNodeClick:f,pannable:g=!1,zoomable:v=!1,ariaLabel:x="React Flow mini map",inversePan:y=!1,zoomStep:b=10,offsetScale:w=5}=e;const k=bc(),j=(0,r.useRef)(null),{boundingRect:S,viewBB:N,rfId:C}=yc(Up,ya),_=t?.width??200,E=t?.height??150,P=S.width/_,T=S.height/E,M=Math.max(P,T),R=M*_,L=M*E,A=w*M,O=S.x-(R-S.width)/2-A,z=S.y-(L-S.height)/2-A,I=R+2*A,$=L+2*A,D=`react-flow__minimap-desc-${C}`,B=(0,r.useRef)(0);B.current=M,(0,r.useEffect)(()=>{if(j.current){const e=Di(j.current),t=e=>{const{transform:t,d3Selection:n,d3Zoom:r}=k.getState();if("wheel"!==e.sourceEvent.type||!n||!r)return;const o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*b,a=t[2]*Math.pow(2,o);r.scaleTo(n,a)},n=e=>{const{transform:t,d3Selection:n,d3Zoom:r,translateExtent:o,width:a,height:i}=k.getState();if("mousemove"!==e.sourceEvent.type||!n||!r)return;const s=B.current*Math.max(1,t[2])*(y?-1:1),l={x:t[0]-e.sourceEvent.movementX*s,y:t[1]-e.sourceEvent.movementY*s},c=[[0,0],[a,i]],d=Wl.translate(l.x,l.y).scale(t[2]),u=r.constrain()(d,c,o);r.transform(n,u)},r=ec().on("zoom",g?n:null).on("zoom.wheel",v?t:null);return e.call(r),()=>{e.on("zoom",null)}}},[g,v,y,b]);const F=m?e=>{const t=Ki(e);m(e,{x:t[0],y:t[1]})}:void 0,H=f?(e,t)=>{const n=k.getState().nodeInternals.get(t);f(e,n)}:void 0;return r.createElement(kc,{position:p,style:t,className:da(["react-flow__minimap",n]),"data-testid":"rf__minimap"},r.createElement("svg",{width:_,height:E,viewBox:`${O} ${z} ${I} ${$}`,role:"img","aria-labelledby":D,ref:j,onClick:F},x&&r.createElement("title",{id:D},x),r.createElement(Hp,{onClick:H,nodeColor:a,nodeStrokeColor:o,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:l,nodeComponent:c}),r.createElement("path",{className:"react-flow__minimap-mask",d:`M${O-A},${z-A}h${I+2*A}v${$+2*A}h${-I-2*A}z\n        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fill:d,fillRule:"evenodd",stroke:u,strokeWidth:h,pointerEvents:"none"})))}qp.displayName="MiniMap";var Wp=(0,r.memo)(qp);const Vp=[{id:"1",type:"input",data:{label:"Concepto inicial"},position:{x:250,y:5}}],Yp=[];function Kp(){const e=ne(),{user:t,loading:n}=Lo(),[o,a]=(0,r.useState)({emoji:"\ud83d\udd25",title:"",description:"",nodes:[]}),[i,s]=(0,r.useState)({label:"",description:"",icon:"\ud83d\udcda"}),[l,c,d]=Jh(Vp),[u,h,p]=Zh(Yp),m=(0,r.useCallback)(e=>h(t=>yd(e,t)),[h]);(0,r.useEffect)(()=>{if(!n&&!t)return alert("Debes iniciar sesi\xf3n para crear roadmaps"),void e("/")},[t,n,e]);return n?(0,To.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsx)("div",{className:"text-center",children:(0,To.jsx)("p",{className:"text-gray-600",children:"Cargando..."})})}):t?(0,To.jsxs)("div",{className:"w-full h-[calc(100vh-80px)] bg-gray-50 flex flex-col",children:[(0,To.jsx)("div",{className:"flex items-center justify-between px-6 py-3 bg-white border-b border-gray-200 shadow-sm",children:(0,To.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Editor de Roadmap"})}),(0,To.jsx)("div",{className:"flex-1",children:(0,To.jsxs)(Xh,{nodes:l,edges:u,onNodesChange:d,onEdgesChange:p,onConnect:m,fitView:!0,children:[(0,To.jsx)(Wp,{}),(0,To.jsx)(lp,{}),(0,To.jsx)(fp,{gap:16,color:"#e5e7eb"})]})})]}):(0,To.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsx)("div",{className:"text-center",children:(0,To.jsx)("p",{className:"text-gray-600",children:"Redirigiendo..."})})})}function Xp(){const e=ne(),{user:t,loading:n}=Lo(),[o,a]=(0,r.useState)([]),[i,s]=(0,r.useState)({}),[l,c]=(0,r.useState)({}),[d,u]=(0,r.useState)(!0),[h,p]=(0,r.useState)([]),[m,f]=(0,r.useState)(""),[g,v]=(0,r.useState)("all"),[x,y]=(0,r.useState)("all"),[b,w]=(0,r.useState)("lastAccessed"),[k,j]=(0,r.useState)(!0),[S,N]=(0,r.useState)(!0),[C,_]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!n&&!t)return alert("Debes iniciar sesi\xf3n para ver tus roadmaps"),void e("/");t&&E(t.id)},[t,n,e]);const E=(0,r.useCallback)(async e=>{try{const[t,n,r,o]=await Promise.all([eo.getUserRoadmaps(e),Bo.getAllProgress(e),Bo.getProgressStats(e),eo.getUserRoadmapVersions(e)]);a(t);const i=n.reduce((e,t)=>(e[t.roadmap_type]=t,e),{});s(i),c(r),p(o)}catch(t){console.error("Error cargando datos:",t),alert("Error al cargar tus roadmaps")}finally{u(!1)}},[]),P=(0,r.useCallback)(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este roadmap?"))try{const{error:n}=await Qr.from("roadmaps").delete().eq("id",e);if(n)throw n;await E(t.id),alert("Roadmap eliminado exitosamente")}catch(n){console.error("Error eliminando roadmap:",n),alert("Error al eliminar el roadmap")}},[null===t||void 0===t?void 0:t.id,E]),T=(0,r.useCallback)((t,n)=>{e(n?`/edit/${t}?version=${n}`:`/edit/${t}`)},[e]),M=(0,r.useCallback)(t=>{e(`/roadmap/${t}`)},[e]),R=(0,r.useMemo)(()=>{let e=Go.map(e=>{const t=h.filter(t=>t.roadmap_type===e.id).sort((e,t)=>new Date(t.created_at)-new Date(e.created_at))[0];return{...e,versionId:(null===t||void 0===t?void 0:t.id)||null,hasUserVersion:!!t,lastModified:(null===t||void 0===t?void 0:t.updated_at)||null}});return m&&(e=ta(e,m)),"all"!==g&&(e=Qo(e,g)),"all"!==x&&(e=ea(e,x)),e=e.filter(e=>{const t=i[e.id],n=t?t.progress_percentage:0;return!(100===n&&!k)&&(!(n>0&&n<100&&!S)&&!(0===n&&!C))}),e.sort((e,t)=>{const n=i[e.id],r=i[t.id];switch(b){case"lastAccessed":const o=n?new Date(n.last_accessed):new Date(0);return(r?new Date(r.last_accessed):new Date(0))-o;case"progress":const a=n?n.progress_percentage:0;return(r?r.progress_percentage:0)-a;case"difficulty":return Zo.findIndex(t=>t.id===e.difficulty)-Zo.findIndex(e=>e.id===t.difficulty);case"name":return e.title.localeCompare(t.title);default:return 0}}),e},[m,g,x,b,k,S,C,i,h]),L=(0,r.useCallback)(e=>i[e]||{progress_percentage:0,completed_nodes:[],time_spent:0,last_accessed:null},[i]),A=(0,r.useCallback)(e=>{if(e<60)return`${e}m`;const t=Math.floor(e/60),n=e%60;return n>0?`${t}h ${n}m`:`${t}h`},[]),O=(0,r.useCallback)(e=>{const t=Zo.find(t=>t.id===e);return t?t.color:"#6B7280"},[]),z=(0,r.useCallback)(e=>{const t=Jo.find(t=>t.id===e);return t?t.color:"#6B7280"},[]);return n?(0,To.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,To.jsx)("p",{className:"text-gray-600",children:"Cargando..."})]})}):t?(0,To.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,To.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,To.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsxs)("div",{children:[(0,To.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Roadmaps"}),(0,To.jsx)("p",{className:"mt-2 text-gray-600",children:"Gestiona tu progreso de aprendizaje"})]}),(0,To.jsxs)("button",{onClick:()=>e("/create"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,To.jsx)(ko,{className:"w-5 h-5"}),(0,To.jsx)("span",{children:"Crear Roadmap"})]})]}),(0,To.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,To.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,To.jsxs)("div",{className:"flex items-center",children:[(0,To.jsx)(Eo,{className:"w-8 h-8 text-blue-600"}),(0,To.jsxs)("div",{className:"ml-3",children:[(0,To.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Progreso Promedio"}),(0,To.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:[l.averageProgress||0,"%"]})]})]})}),(0,To.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,To.jsxs)("div",{className:"flex items-center",children:[(0,To.jsx)(vo,{className:"w-8 h-8 text-green-600"}),(0,To.jsxs)("div",{className:"ml-3",children:[(0,To.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Completados"}),(0,To.jsx)("p",{className:"text-2xl font-bold text-green-900",children:l.completedRoadmaps||0})]})]})}),(0,To.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,To.jsxs)("div",{className:"flex items-center",children:[(0,To.jsx)(go,{className:"w-8 h-8 text-yellow-600"}),(0,To.jsxs)("div",{className:"ml-3",children:[(0,To.jsx)("p",{className:"text-sm font-medium text-yellow-600",children:"En Progreso"}),(0,To.jsx)("p",{className:"text-2xl font-bold text-yellow-900",children:l.inProgressRoadmaps||0})]})]})}),(0,To.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg",children:(0,To.jsxs)("div",{className:"flex items-center",children:[(0,To.jsx)(fo,{className:"w-8 h-8 text-purple-600"}),(0,To.jsxs)("div",{className:"ml-3",children:[(0,To.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"Tiempo Total"}),(0,To.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:A(l.totalTimeSpent||0)})]})]})})]})]})}),(0,To.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,To.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,To.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,To.jsx)(xo,{className:"w-5 h-5 mr-2"}),"Filtros y B\xfasqueda"]}),(0,To.jsx)("div",{className:"flex items-center space-x-4",children:(0,To.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,To.jsx)("option",{value:"lastAccessed",children:"\xdaltimo acceso"}),(0,To.jsx)("option",{value:"progress",children:"Progreso"}),(0,To.jsx)("option",{value:"difficulty",children:"Dificultad"}),(0,To.jsx)("option",{value:"name",children:"Nombre"})]})})]}),(0,To.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,To.jsxs)("div",{className:"relative",children:[(0,To.jsx)(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,To.jsx)("input",{type:"text",placeholder:"Buscar roadmaps...",value:m,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,To.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,To.jsx)("option",{value:"all",children:"Todas las categor\xedas"}),Jo.map(e=>(0,To.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,To.jsxs)("select",{value:x,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,To.jsx)("option",{value:"all",children:"Todas las dificultades"}),Zo.map(e=>(0,To.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,To.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,To.jsxs)("label",{className:"flex items-center text-sm",children:[(0,To.jsx)("input",{type:"checkbox",checked:k,onChange:e=>j(e.target.checked),className:"mr-2"}),"Completados"]}),(0,To.jsxs)("label",{className:"flex items-center text-sm",children:[(0,To.jsx)("input",{type:"checkbox",checked:S,onChange:e=>N(e.target.checked),className:"mr-2"}),"En Progreso"]}),(0,To.jsxs)("label",{className:"flex items-center text-sm",children:[(0,To.jsx)("input",{type:"checkbox",checked:C,onChange:e=>_(e.target.checked),className:"mr-2"}),"No Iniciados"]})]})]})]}),d?(0,To.jsxs)("div",{className:"text-center py-12",children:[(0,To.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,To.jsx)("p",{className:"text-gray-600",children:"Cargando roadmaps..."})]}):(0,To.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:R.map(e=>{const t=L(e.id),n=Jo.find(t=>t.id===e.category),r=Zo.find(t=>t.id===e.difficulty);return(0,To.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:(0,To.jsxs)("div",{className:"p-6",children:[(0,To.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("span",{className:"text-3xl",children:e.icon}),(0,To.jsxs)("div",{children:[(0,To.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,To.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),e.hasUserVersion&&(0,To.jsxs)("div",{className:"flex items-center space-x-1 bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs",children:[(0,To.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,To.jsx)("span",{children:"Personalizado"})]})]}),(0,To.jsxs)("div",{className:"flex items-center space-x-4 mb-4 text-xs text-gray-500",children:[(0,To.jsxs)("span",{className:"flex items-center",children:[(0,To.jsx)("div",{className:"w-3 h-3 rounded-full mr-1",style:{backgroundColor:z(e.category)}}),null===n||void 0===n?void 0:n.name]}),(0,To.jsxs)("span",{className:"flex items-center",children:[(0,To.jsx)("div",{className:"w-3 h-3 rounded-full mr-1",style:{backgroundColor:O(e.difficulty)}}),null===r||void 0===r?void 0:r.name]}),(0,To.jsxs)("span",{className:"flex items-center",children:[(0,To.jsx)(go,{className:"w-3 h-3 mr-1"}),e.estimatedTime]})]}),(0,To.jsxs)("div",{className:"mb-4",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,To.jsx)("span",{className:"text-gray-600",children:"Progreso"}),(0,To.jsxs)("span",{className:"font-medium",children:[t.progress_percentage,"%"]})]}),(0,To.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,To.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${t.progress_percentage}%`}})})]}),(0,To.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-500 mb-4",children:[(0,To.jsxs)("div",{children:[(0,To.jsx)("span",{className:"font-medium",children:"Nodos:"})," ",e.totalNodes]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("span",{className:"font-medium",children:"Conexiones:"})," ",e.totalConnections]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("span",{className:"font-medium",children:"Tiempo:"})," ",A(t.time_spent)]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("span",{className:"font-medium",children:"Versi\xf3n:"}),e.hasUserVersion?(0,To.jsx)("span",{className:"text-green-600 font-semibold",children:"Personalizada"}):(0,To.jsx)("span",{className:"text-gray-500",children:"Original"})]})]}),(0,To.jsxs)("div",{className:"flex flex-wrap gap-1 mb-4",children:[e.tags.slice(0,3).map((e,t)=>(0,To.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:e},t)),e.tags.length>3&&(0,To.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.tags.length-3]})]}),(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("button",{onClick:()=>M(e.id),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:"Ver"}),(0,To.jsx)("button",{onClick:()=>T(e.id,e.versionId),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded-lg transition-colors",children:"Editar"})]}),(0,To.jsx)("button",{onClick:()=>P(e.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Eliminar roadmap",children:(0,To.jsx)(_o,{className:"w-4 h-4"})})]})]})},e.id)})}),!d&&0===R.length&&(0,To.jsxs)("div",{className:"text-center py-12",children:[(0,To.jsx)("div",{className:"text-gray-400 mb-4",children:(0,To.jsx)(So,{className:"w-16 h-16 mx-auto"})}),(0,To.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron roadmaps"}),(0,To.jsx)("p",{className:"text-gray-600",children:"Intenta ajustar los filtros o crear un nuevo roadmap."})]})]})]}):(0,To.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsx)("div",{className:"text-center",children:(0,To.jsx)("p",{className:"text-gray-600",children:"Redirigiendo..."})})})}function Gp(){return(0,To.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,To.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,To.jsxs)("div",{className:"mb-8",children:[(0,To.jsxs)(ot,{to:"/",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4",children:[(0,To.jsx)(po,{className:"mr-2"}),"Volver al inicio"]}),(0,To.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Pol\xedtica de Privacidad"}),(0,To.jsx)("p",{className:"text-gray-600",children:"\xdaltima actualizaci\xf3n: Enero 2025"})]}),(0,To.jsx)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 sm:p-8",children:(0,To.jsxs)("div",{className:"prose prose-lg max-w-none",children:[(0,To.jsx)("h2",{children:"1. Informaci\xf3n General"}),(0,To.jsx)("p",{children:'MetalRoadmap ("nosotros", "nuestro", "la aplicaci\xf3n") es una plataforma educativa especializada en ingenier\xeda metal\xfargica que permite a los usuarios crear y gestionar roadmaps de aprendizaje personalizados.'}),(0,To.jsx)("h2",{children:"2. Informaci\xf3n que Recolectamos"}),(0,To.jsx)("h3",{children:"2.1 Informaci\xf3n de Registro"}),(0,To.jsxs)("ul",{children:[(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Direcci\xf3n de correo electr\xf3nico"}),": Para crear y gestionar tu cuenta"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Nombre"}),": Opcional, obtenido desde LinkedIn o proporcionado por el usuario"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Contrase\xf1a"}),": Solo para registro con email (no almacenamos contrase\xf1as en texto plano)"]})]}),(0,To.jsx)("h3",{children:"2.2 Informaci\xf3n de LinkedIn (Opcional)"}),(0,To.jsx)("p",{children:"Si eliges iniciar sesi\xf3n con LinkedIn, podemos recibir:"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"Nombre y apellido"}),(0,To.jsx)("li",{children:"Direcci\xf3n de correo electr\xf3nico"}),(0,To.jsx)("li",{children:"Foto de perfil (si est\xe1 disponible)"}),(0,To.jsx)("li",{children:"Informaci\xf3n b\xe1sica del perfil p\xfablico"})]}),(0,To.jsx)("h3",{children:"2.3 Contenido del Usuario"}),(0,To.jsxs)("ul",{children:[(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Roadmaps creados"}),": T\xedtulos, descripciones, emojis"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Conceptos y nodos"}),": Informaci\xf3n educativa que agregas"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Recursos"}),": Enlaces y referencias que compartes"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Metadatos"}),": Fechas de creaci\xf3n, modificaciones"]})]}),(0,To.jsx)("h2",{children:"3. C\xf3mo Usamos tu Informaci\xf3n"}),(0,To.jsx)("h3",{children:"3.1 Prop\xf3sitos Principales"}),(0,To.jsxs)("ul",{children:[(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Autenticaci\xf3n"}),": Verificar tu identidad y mantener tu sesi\xf3n"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Funcionalidad"}),": Permitirte crear, editar y gestionar roadmaps"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Mejoras"}),": Analizar el uso para mejorar la aplicaci\xf3n"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Comunicaci\xf3n"}),": Enviar notificaciones importantes sobre tu cuenta"]})]}),(0,To.jsx)("h3",{children:"3.2 An\xe1lisis y Mejoras"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"Uso de datos agregados para mejorar la experiencia del usuario"}),(0,To.jsx)("li",{children:"No vendemos, alquilamos o compartimos datos personales con terceros"})]}),(0,To.jsx)("h2",{children:"4. Almacenamiento y Seguridad"}),(0,To.jsx)("h3",{children:"4.1 Base de Datos"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"Utilizamos Supabase (PostgreSQL) para almacenar datos"}),(0,To.jsx)("li",{children:"Todos los datos est\xe1n protegidos con Row Level Security (RLS)"}),(0,To.jsx)("li",{children:"Cada usuario solo puede acceder a sus propios datos"})]}),(0,To.jsx)("h3",{children:"4.2 Seguridad"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"Conexiones encriptadas (HTTPS)"}),(0,To.jsx)("li",{children:"Autenticaci\xf3n segura"}),(0,To.jsx)("li",{children:"Contrase\xf1as hasheadas (cuando aplica)"}),(0,To.jsx)("li",{children:"Acceso restringido a datos personales"})]}),(0,To.jsx)("h2",{children:"5. Compartir Informaci\xf3n"}),(0,To.jsx)("h3",{children:"5.1 No Vendemos Datos"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"No vendemos, alquilamos o comercializamos tus datos personales"}),(0,To.jsx)("li",{children:"No compartimos informaci\xf3n con anunciantes"})]}),(0,To.jsx)("h3",{children:"5.2 Proveedores de Servicios"}),(0,To.jsx)("p",{children:"Podemos compartir datos con:"}),(0,To.jsxs)("ul",{children:[(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Supabase"}),": Para almacenamiento y autenticaci\xf3n"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Vercel"}),": Para hosting de la aplicaci\xf3n"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"LinkedIn"}),": Solo si usas login con LinkedIn"]})]}),(0,To.jsx)("h2",{children:"6. Tus Derechos"}),(0,To.jsx)("h3",{children:"6.1 Acceso y Control"}),(0,To.jsxs)("ul",{children:[(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Ver tus datos"}),": Puedes ver toda la informaci\xf3n que tenemos sobre ti"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Editar"}),": Puedes actualizar tu informaci\xf3n de perfil"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Eliminar"}),": Puedes eliminar tu cuenta y todos tus datos"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Exportar"}),": Puedes solicitar una copia de tus datos"]})]}),(0,To.jsx)("h3",{children:"6.2 Eliminaci\xf3n de Datos"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"Al eliminar tu cuenta, todos tus roadmaps y datos se eliminan permanentemente"}),(0,To.jsx)("li",{children:"Los datos eliminados no se pueden recuperar"})]}),(0,To.jsx)("h2",{children:"7. Cookies y Tecnolog\xedas de Seguimiento"}),(0,To.jsx)("h3",{children:"7.1 Cookies Necesarias"}),(0,To.jsxs)("ul",{children:[(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Sesi\xf3n"}),": Para mantener tu sesi\xf3n activa"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Preferencias"}),": Para recordar tus configuraciones"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Seguridad"}),": Para proteger contra ataques"]})]}),(0,To.jsx)("h3",{children:"7.2 No Usamos"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"Cookies de publicidad"}),(0,To.jsx)("li",{children:"Seguimiento de terceros"}),(0,To.jsx)("li",{children:"An\xe1lisis invasivo"})]}),(0,To.jsx)("h2",{children:"8. Menores de Edad"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"Nuestra aplicaci\xf3n no est\xe1 dirigida a menores de 13 a\xf1os"}),(0,To.jsx)("li",{children:"No recolectamos intencionalmente informaci\xf3n de menores de 13 a\xf1os"}),(0,To.jsx)("li",{children:"Si eres padre y crees que tu hijo nos ha proporcionado informaci\xf3n, cont\xe1ctanos"})]}),(0,To.jsx)("h2",{children:"9. Cambios a esta Pol\xedtica"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"Notificaremos cambios importantes por email"}),(0,To.jsx)("li",{children:'La fecha de "\xfaltima actualizaci\xf3n" se modificar\xe1'}),(0,To.jsx)("li",{children:"El uso continuado significa aceptaci\xf3n de los cambios"})]}),(0,To.jsx)("h2",{children:"10. Contacto"}),(0,To.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,To.jsxs)("h3",{className:"flex items-center text-blue-800 mb-2",children:[(0,To.jsx)(bo,{className:"mr-2"}),"Para preguntas sobre privacidad:"]}),(0,To.jsxs)("ul",{className:"text-blue-700",children:[(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Email"}),": [tu-email@dominio.com]"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Sitio web"}),": [tu-sitio-web.com/privacy]"]})]})]}),(0,To.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,To.jsxs)("h3",{className:"flex items-center text-green-800 mb-2",children:[(0,To.jsx)(Co,{className:"mr-2"}),"Para solicitudes de datos:"]}),(0,To.jsxs)("ul",{className:"text-green-700",children:[(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Acceso a datos"}),": Solicita una copia de tus datos"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Eliminaci\xf3n"}),": Solicita eliminar tu cuenta y datos"]}),(0,To.jsxs)("li",{children:[(0,To.jsx)("strong",{children:"Correcci\xf3n"}),": Solicita corregir informaci\xf3n incorrecta"]})]})]}),(0,To.jsx)("h2",{children:"11. Jurisdicci\xf3n"}),(0,To.jsx)("p",{children:"Esta pol\xedtica se rige por las leyes de [tu pa\xeds/regi\xf3n] y cumple con:"}),(0,To.jsxs)("ul",{children:[(0,To.jsx)("li",{children:"GDPR (Europa)"}),(0,To.jsx)("li",{children:"CCPA (California)"}),(0,To.jsx)("li",{children:"LGPD (Brasil)"}),(0,To.jsx)("li",{children:"Otras regulaciones aplicables"})]}),(0,To.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-8",children:[(0,To.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,To.jsx)("strong",{children:"Nota"}),": Esta pol\xedtica de privacidad es un template. Debes personalizarla con:"]}),(0,To.jsxs)("ul",{className:"text-yellow-700 text-sm mt-2",children:[(0,To.jsx)("li",{children:"Tu informaci\xf3n de contacto real"}),(0,To.jsx)("li",{children:"Tu jurisdicci\xf3n legal"}),(0,To.jsx)("li",{children:"Cualquier pr\xe1ctica espec\xedfica de tu aplicaci\xf3n"}),(0,To.jsx)("li",{children:"Revisi\xf3n legal si es necesario para tu caso de uso"})]})]})]})})]})})}function Jp(){const e=ne();return(0,r.useEffect)(()=>{(async()=>{try{const t=new URLSearchParams(window.location.hash.substring(1)),n=t.get("access_token"),r=t.get("refresh_token");if(n&&r){const{data:t,error:o}=await Qr.auth.setSession({access_token:n,refresh_token:r});if(o)return console.error("Error setting session:",o),void e("/");window.history.replaceState({},document.title,window.location.pathname),e("/")}else e("/")}catch(t){console.error("Error in auth callback:",t),e("/")}})()},[e]),(0,To.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,To.jsx)("p",{className:"text-gray-600",children:"Procesando autenticaci\xf3n..."})]})})}const Zp=!1,Qp={id:"dev-user-123",email:"dev@localhost.com",name:"Usuario Desarrollo"},em=Zp,tm=e=>{let{proposal:t,onVote:n,onClose:o}=e;const{user:a}=Lo(),[i,s]=(0,r.useState)(null),[l,c]=(0,r.useState)(""),d=e=>{em||a?s(e):alert("Debes iniciar sesi\xf3n para votar")},u=(e,t)=>{if(0===e.length)return 0;const n=e.filter(e=>e.vote===t).length;return Math.round(n/e.length*100)};return(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,To.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,To.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Propuesta de Edici\xf3n"}),(0,To.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:(0,To.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,To.jsxs)("div",{className:"p-6 space-y-6",children:[(0,To.jsxs)("div",{children:[(0,To.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Propuesta por: ",t.author.name]}),(0,To.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:new Date(t.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Cambios propuestos:"}),(0,To.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:t.changes.map((e,t)=>(0,To.jsxs)("div",{className:"border-l-4 border-blue-500 pl-3",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,To.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"node"===e.type?"Nodo":"Conexi\xf3n"}),(0,To.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,To.jsx)("span",{className:"text-sm text-gray-600",children:e.action})]}),(0,To.jsx)("div",{className:"text-sm text-gray-600",children:(0,To.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,To.jsxs)("div",{children:[(0,To.jsx)("span",{className:"font-medium",children:"Antes:"}),(0,To.jsx)("div",{className:"mt-1 p-2 bg-red-50 rounded text-xs",children:e.before||"N/A"})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("span",{className:"font-medium",children:"Despu\xe9s:"}),(0,To.jsx)("div",{className:"mt-1 p-2 bg-green-50 rounded text-xs",children:e.after||"N/A"})]})]})})]},t))})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Votaci\xf3n actual:"}),(0,To.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,To.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,To.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Aprobado"}),(0,To.jsxs)("span",{className:"text-sm font-bold text-green-700",children:[u(t.votes,"approve"),"%"]})]}),(0,To.jsx)("div",{className:"w-full bg-green-200 rounded-full h-2",children:(0,To.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${u(t.votes,"approve")}%`}})}),(0,To.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:[t.votes.filter(e=>"approve"===e.vote).length," votos"]})]}),(0,To.jsxs)("div",{className:"bg-red-50 rounded-lg p-3",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,To.jsx)("span",{className:"text-sm font-medium text-red-700",children:"Rechazado"}),(0,To.jsxs)("span",{className:"text-sm font-bold text-red-700",children:[u(t.votes,"reject"),"%"]})]}),(0,To.jsx)("div",{className:"w-full bg-red-200 rounded-full h-2",children:(0,To.jsx)("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${u(t.votes,"reject")}%`}})}),(0,To.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:[t.votes.filter(e=>"reject"===e.vote).length," votos"]})]})]})]}),a&&(0,To.jsxs)("div",{children:[(0,To.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Tu voto:"}),(0,To.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,To.jsx)("button",{onClick:()=>d("approve"),className:"px-4 py-2 rounded-lg border-2 transition-colors "+("approve"===i?"border-green-500 bg-green-50 text-green-700":"border-gray-300 hover:border-green-500"),children:"\ud83d\udc4d Aprobar"}),(0,To.jsx)("button",{onClick:()=>d("reject"),className:"px-4 py-2 rounded-lg border-2 transition-colors "+("reject"===i?"border-red-500 bg-red-50 text-red-700":"border-gray-300 hover:border-red-500"),children:"\ud83d\udc4e Rechazar"})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentario (opcional):"}),(0,To.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Explica tu voto..."})]})]}),t.comments&&t.comments.length>0&&(0,To.jsxs)("div",{children:[(0,To.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Comentarios:"}),(0,To.jsx)("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:t.comments.map((e,t)=>(0,To.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,To.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.author.name}),(0,To.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,To.jsx)("p",{className:"text-sm text-gray-600",children:e.text})]},t))})]})]}),(0,To.jsxs)("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,To.jsx)("span",{className:"font-medium",children:"Estado:"}),(0,To.jsxs)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs "+("pending"===t.status?"bg-yellow-100 text-yellow-800":"approved"===t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["pending"===t.status&&"En votaci\xf3n","approved"===t.status&&"Aprobado","rejected"===t.status&&"Rechazado"]})]}),(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("button",{onClick:o,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cerrar"}),a&&i&&(0,To.jsx)("button",{onClick:()=>{i?(n(t.id,i,l),o()):alert("Debes seleccionar un voto")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Enviar Voto"})]})]})]})})},nm={custom:vp};function rm(){const{fitView:e}=ju();return r.useEffect(()=>{e({padding:.2})},[e]),null}const om=e=>{let{nodes:t,edges:n,roadmapInfo:r,onClose:o}=e;return(0,To.jsxs)("div",{className:"fixed inset-0 bg-white z-50",children:[(0,To.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,To.jsx)("span",{className:"text-3xl",children:r.icon}),(0,To.jsxs)("div",{children:[(0,To.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:r.title}),(0,To.jsx)("p",{className:"text-sm text-gray-600",children:r.description})]})]}),(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("span",{className:"text-sm text-gray-500 bg-green-100 text-green-800 px-3 py-1 rounded-full",children:"Vista Previa"}),(0,To.jsxs)("button",{onClick:o,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors flex items-center space-x-2",children:[(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,To.jsx)("span",{children:"Cerrar Vista"})]})]})]}),(0,To.jsx)("div",{className:"flex-1",children:(0,To.jsxs)(Xh,{nodes:t,edges:n,nodeTypes:nm,fitView:!1,fitViewOptions:{padding:.2,includeHiddenNodes:!1},defaultViewport:{x:0,y:0,zoom:.6},minZoom:.1,maxZoom:2,nodesDraggable:!1,nodesConnectable:!1,elementsSelectable:!1,panOnScroll:!0,zoomOnScroll:!0,panOnDrag:!0,zoomOnPinch:!0,panOnScrollMode:"free",attributionPosition:"bottom-left",preventScrolling:!1,zoomOnDoubleClick:!1,multiSelectionKeyCode:null,children:[(0,To.jsx)(rm,{}),(0,To.jsx)(lp,{}),(0,To.jsx)(fp,{variant:"dots",gap:20,size:1,color:"#e5e7eb",style:{backgroundColor:"#f9fafb"}})]})})]})},am=e=>{let{roadmapInfo:t,onShowToolsPanel:n,showToolsPanel:r,onPresentationMode:o,presentationMode:a,onShowLiveView:i,onSave:s,onEditModal:l,onExit:c,saveStatus:d="idle",hasUnsavedChanges:u=!1,proposalMode:h=!1,onToggleProposalMode:p=()=>{},onCreateProposal:m=()=>{},isProposalOnlyMode:f=!1}=e;return(0,To.jsx)("div",{className:"w-full bg-white border-b border-gray-100 px-6 py-4 editor-header relative z-50",children:(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("img",{src:"/assets/logo.png",alt:"Logo",className:"w-8 h-8"}),(0,To.jsxs)("div",{className:"max-w-md",children:[(0,To.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:t.title}),(0,To.jsx)("p",{className:"text-xs text-gray-500 truncate",children:t.description})]})]}),f&&(0,To.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:[(0,To.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,To.jsx)("span",{children:"Modo Propuesta"})]}),(0,To.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",title:"Editar t\xedtulo y descripci\xf3n",children:(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[!f&&(0,To.jsx)("button",{onClick:p,className:"px-3 py-2 text-sm font-medium rounded-lg transition-colors "+(h?"bg-orange-100 text-orange-600":"text-gray-700 bg-gray-100 hover:bg-gray-200"),title:"Modo propuesta de edici\xf3n",children:(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,To.jsxs)("button",{onClick:i,className:"px-4 py-2 text-sm font-medium text-gray-400 bg-gray-100 rounded-lg cursor-not-allowed transition-colors line-through",disabled:!0,children:[(0,To.jsx)("span",{className:"hidden sm:inline",children:"Vista"}),(0,To.jsx)("span",{className:"sm:hidden",children:"\ud83d\udc41\ufe0f"})]}),f?(0,To.jsxs)("button",{onClick:m,className:"px-4 py-2 text-sm font-medium bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors flex items-center space-x-2",children:[(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,To.jsx)("span",{children:"Crear Propuesta"})]}):h?(0,To.jsxs)("button",{onClick:m,className:"px-4 py-2 text-sm font-medium bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors flex items-center space-x-2",children:[(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,To.jsx)("span",{children:"Crear Propuesta"})]}):(0,To.jsx)("button",{onClick:s,disabled:"saving"===d,className:"px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center space-x-2 "+("saving"===d?"bg-gray-400 cursor-not-allowed":u?"bg-blue-600 hover:bg-blue-700 text-white":"bg-green-600 hover:bg-green-700 text-white"),children:"saving"===d?(0,To.jsxs)(To.Fragment,{children:[(0,To.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,To.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,To.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,To.jsx)("span",{children:"Guardando..."})]}):u?(0,To.jsxs)(To.Fragment,{children:[(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),(0,To.jsx)("span",{children:"Guardar"})]}):(0,To.jsxs)(To.Fragment,{children:[(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,To.jsx)("span",{children:"Guardado"})]})}),(0,To.jsx)("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-white bg-orange-500 rounded-lg hover:bg-orange-600 transition-colors",title:"Salir",children:"Salir"})]})]})})},im=e=>{let{showComponentsPanel:t,showRoadmapsPanel:n,onToggleComponentsPanel:r,onToggleRoadmapsPanel:o}=e;return(0,To.jsxs)("div",{className:"w-12 h-full bg-white flex flex-col items-center justify-start z-30 border-r border-gray-200",children:[(0,To.jsx)("button",{onClick:r,className:"w-10 h-10 ml-3 mt-2 mb-1 flex items-center justify-center rounded transition-colors hover:bg-blue-50 "+(t?"bg-blue-100 text-blue-600":"text-gray-500"),title:"Componentes",children:(0,To.jsx)("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,To.jsx)("button",{onClick:o,className:"w-10 h-10 ml-3 mt-1 mb-2 flex items-center justify-center rounded transition-colors hover:bg-blue-50 "+(n?"bg-blue-100 text-blue-600":"text-gray-500"),title:"Roadmaps",children:(0,To.jsx)("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7"})})})]})},sm=e=>{let{showComponentsPanel:t,onClose:n,searchComponents:r,onSearchChange:o,filteredComponents:a,onAddComponent:i}=e;if(!t)return null;return(0,To.jsxs)("div",{className:"absolute left-0 top-0 w-80 h-full bg-white border-r border-gray-200 z-20 flex flex-col shadow-lg",children:[(0,To.jsxs)("div",{className:"flex items-center px-4 py-3 border-b border-gray-100",children:[(0,To.jsx)("span",{className:"font-medium text-gray-700 text-base",children:"Componentes"}),(0,To.jsx)("button",{onClick:n,className:"ml-auto text-gray-400 hover:text-gray-600 transition-colors",children:(0,To.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,To.jsx)("div",{className:"p-4 border-b border-gray-100",children:(0,To.jsxs)("div",{className:"relative",children:[(0,To.jsx)("input",{type:"text",placeholder:"Buscar componentes...",value:r,onChange:o,className:"w-full px-3 py-2 pl-10 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),(0,To.jsx)("svg",{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,To.jsx)("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:(0,To.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,To.jsx)("div",{draggable:!0,onDragStart:t=>((e,t)=>{e.dataTransfer.setData("application/json",JSON.stringify(t))})(t,e),className:"p-3 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors cursor-move bg-white",children:(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("span",{className:"text-2xl",children:e.icon}),(0,To.jsx)("div",{className:"flex-1",children:(0,To.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:e.name})})]})},e.id))})})]})},lm=e=>{let{showPropertiesPanel:t,selectedNode:n,selectedEdge:o,onClose:a,onUpdateNode:i,onUpdateEdge:s,propertiesTab:l,onTabChange:c}=e;if(!t||!n&&!o)return null;const d=(null===n||void 0===n?void 0:n.data.nodeType)||(null===n||void 0===n?void 0:n.data.type),u=n&&["topic","subtopic","todo"].includes(d),[h,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{n&&n.data.links?p(n.data.links):p([])},[n]);const m=()=>{const e={id:Date.now().toString(),type:"video",title:"",url:""},t=[...h,e];p(t),i(n.id,"links",t)},f=(e,t,r)=>{const o=h.map(n=>n.id===e?{...n,[t]:r}:n);p(o),i(n.id,"links",o)},g=()=>{switch(d){case"title":return(0,To.jsx)("div",{className:"flex flex-col mt-4",children:(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Etiqueta"}),(0,To.jsx)("input",{type:"text",value:n.data.label,onChange:e=>i(n.id,"label",e.target.value),placeholder:"Ingresar etiqueta",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]})});case"topic":case"subtopic":return(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Etiqueta"}),(0,To.jsx)("input",{type:"text",value:n.data.label,onChange:e=>i(n.id,"label",e.target.value),placeholder:"Ingresar etiqueta",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Tipo"}),(0,To.jsx)("div",{className:"w-full",children:(0,To.jsxs)("select",{value:n.data.nodeType||"topic",onChange:e=>i(n.id,"nodeType",e.target.value),className:"focus:outline-hidden mt-2 flex h-8 w-full items-center rounded-sm border border-gray-200 px-4 text-sm focus:ring-1 focus:ring-black",style:{minWidth:"100%",textOverflow:"unset",width:"100%",paddingTop:"0.3rem",paddingBottom:"0.3rem"},children:[(0,To.jsx)("option",{value:"topic",style:{width:"100%"},children:"Tema"}),(0,To.jsx)("option",{value:"subtopic",style:{width:"100%"},children:"Subtema"})]})})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Descripci\xf3n"}),(0,To.jsx)("textarea",{value:n.data.description,onChange:e=>i(n.id,"description",e.target.value),rows:3,placeholder:"Ingresar descripci\xf3n",className:"focus:outline-hidden mt-2 flex items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]})]});case"todo":return(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Tarea"}),(0,To.jsx)("input",{type:"text",value:n.data.label,onChange:e=>i(n.id,"label",e.target.value),placeholder:"Ingresar tarea",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]}),(0,To.jsx)("div",{className:"mt-4 flex flex-col",children:(0,To.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,To.jsx)("input",{type:"checkbox",checked:n.data.completed||!1,onChange:e=>i(n.id,"completed",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,To.jsx)("span",{className:"text-xs uppercase text-gray-400",children:"Completada"})]})})]});case"paragraph":return(0,To.jsx)("div",{className:"flex flex-col mt-4",children:(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Contenido"}),(0,To.jsx)("textarea",{value:n.data.label,onChange:e=>i(n.id,"label",e.target.value),rows:6,placeholder:"Ingresar contenido del p\xe1rrafo...",className:"focus:outline-hidden mt-2 flex items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]})});case"button":return(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Texto del Bot\xf3n"}),(0,To.jsx)("input",{type:"text",value:n.data.label,onChange:e=>i(n.id,"label",e.target.value),placeholder:"Ingresar texto del bot\xf3n",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"URL"}),(0,To.jsx)("input",{type:"url",value:n.data.url||"",onChange:e=>i(n.id,"url",e.target.value),placeholder:"https://ejemplo.com",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]})]});case"checklist":return(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"T\xedtulo de la Lista"}),(0,To.jsx)("input",{type:"text",value:n.data.label,onChange:e=>i(n.id,"label",e.target.value),placeholder:"Ingresar t\xedtulo de la lista",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Elementos (uno por l\xednea)"}),(0,To.jsx)("textarea",{value:(n.data.items||[]).join("\n"),onChange:e=>i(n.id,"items",e.target.value.split("\n").filter(e=>e.trim())),rows:6,placeholder:"Elemento 1\nElemento 2\nElemento 3",className:"focus:outline-hidden mt-2 flex items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]})]});case"links-group":return(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"T\xedtulo del Grupo"}),(0,To.jsx)("input",{type:"text",value:n.data.label,onChange:e=>i(n.id,"label",e.target.value),placeholder:"Ingresar t\xedtulo del grupo",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Enlaces (uno por l\xednea)"}),(0,To.jsx)("textarea",{value:(n.data.links||[]).join("\n"),onChange:e=>i(n.id,"links",e.target.value.split("\n").filter(e=>e.trim())),rows:6,placeholder:"https://ejemplo1.com\nhttps://ejemplo2.com",className:"focus:outline-hidden mt-2 flex items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]})]});case"resource-button":return(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Nombre del Recurso"}),(0,To.jsx)("input",{type:"text",value:n.data.label,onChange:e=>i(n.id,"label",e.target.value),placeholder:"Ingresar nombre del recurso",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"URL del Recurso"}),(0,To.jsx)("input",{type:"url",value:n.data.url||"",onChange:e=>i(n.id,"url",e.target.value),placeholder:"https://ejemplo.com",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Tipo de Recurso"}),(0,To.jsxs)("select",{value:n.data.resourceType||"link",onChange:e=>i(n.id,"resourceType",e.target.value),className:"focus:outline-hidden mt-2 flex h-8 w-full items-center rounded-sm border border-gray-200 px-4 text-sm focus:ring-1 focus:ring-black",style:{paddingTop:"0.3rem",paddingBottom:"0.3rem"},children:[(0,To.jsx)("option",{value:"link",children:"Enlace"}),(0,To.jsx)("option",{value:"video",children:"Video"}),(0,To.jsx)("option",{value:"document",children:"Documento"}),(0,To.jsx)("option",{value:"tool",children:"Herramienta"})]})]})]});case"horizontal-line":case"vertical-line":return(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Grosor de L\xednea"}),(0,To.jsx)("div",{className:"mt-2 flex gap-2",children:[1,2,3,4,5,6,8,10].map(e=>(0,To.jsx)("button",{onClick:()=>i(n.id,"lineWidth",e),className:"flex h-6 w-6 min-w-max items-center justify-center rounded-md px-1 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+((n.data.lineWidth||2)===e?"bg-blue-500 text-white":"bg-gray-200"),children:(0,To.jsx)("span",{className:"text-xs font-medium",children:e})},e))})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Color de L\xednea"}),(0,To.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:[{label:"G",color:"#6B7280",name:"Gris"},{label:"N",color:"#000000",name:"Negro"},{label:"A",color:"#3B82F6",name:"Azul"},{label:"V",color:"#10B981",name:"Verde"},{label:"R",color:"#EF4444",name:"Rojo"},{label:"M",color:"#8B5CF6",name:"Morado"},{label:"C",color:"#F59E0B",name:"Naranja"}].map(e=>(0,To.jsx)("button",{"aria-label":e.name,onClick:()=>i(n.id,"lineColor",e.color),className:"flex h-6 w-6 min-w-max shrink-0 items-center justify-center rounded-md border px-1 text-sm font-medium uppercase "+((n.data.lineColor||"#6B7280")===e.color?"ring-2 ring-blue-500":""),style:{backgroundColor:e.color,color:(e.color,"#ffffff"),borderColor:e.color},children:e.label},e.label))})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Estilo de L\xednea"}),(0,To.jsxs)("select",{value:n.data.lineStyle||"solid",onChange:e=>i(n.id,"lineStyle",e.target.value),className:"focus:outline-hidden mt-2 flex h-8 w-full items-center rounded-sm border border-gray-200 px-4 text-sm focus:ring-1 focus:ring-black",style:{paddingTop:"0.3rem",paddingBottom:"0.3rem"},children:[(0,To.jsx)("option",{value:"solid",children:"S\xf3lida"}),(0,To.jsx)("option",{value:"dashed",children:"Discontinua"}),(0,To.jsx)("option",{value:"dotted",children:"Punteada"})]})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Tama\xf1o de L\xednea"}),(0,To.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,To.jsx)("input",{type:"range",min:"0",max:"500",value:n.data.lineSize||100,onChange:e=>i(n.id,"lineSize",parseInt(e.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,To.jsx)("span",{className:"text-sm text-gray-600 min-w-[3rem] text-right",children:n.data.lineSize||100})]})]})]});default:return(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Label"}),(0,To.jsx)("input",{type:"text",value:n.data.label,onChange:e=>i(n.id,"label",e.target.value),placeholder:"Enter label",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Description"}),(0,To.jsx)("textarea",{value:n.data.description,onChange:e=>i(n.id,"description",e.target.value),rows:3,placeholder:"Enter description",className:"focus:outline-hidden mt-2 flex items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black"})]})]})}},v=e=>{i(n.id,"fontSize",{S:"12px",M:"14px",L:"16px",XL:"18px",XXL:"24px"}[e])},x=()=>({"12px":"S","14px":"M","16px":"L","18px":"XL","24px":"XXL"}[n.data.fontSize||"16px"]||"L");return(0,To.jsxs)("div",{className:"fixed right-0 w-80 bg-white border-l border-gray-200 z-50 flex flex-col shadow-lg properties-panel",style:{top:"5rem",height:"calc(100vh - 5rem)"},children:[u&&(0,To.jsxs)("div",{className:"flex gap-2 px-4 py-4 border-b border-gray-100",children:[(0,To.jsx)("button",{className:"focus:outline-hidden rounded-full px-3 py-1 text-sm font-medium "+("properties"===l?"bg-gray-200 text-black":"text-gray-500 hover:bg-gray-100"),onClick:()=>c("properties"),children:"Propiedades"}),(0,To.jsx)("button",{className:"focus:outline-hidden rounded-full px-3 py-1 text-sm font-medium "+("content"===l?"bg-gray-200 text-black":"text-gray-500 hover:bg-gray-100"),onClick:()=>c("content"),children:"Contenido y Enlaces"})]}),(0,To.jsx)("div",{className:"grow basis-0 overflow-hidden overflow-y-auto p-4",children:o?(()=>{var e,t,n,r,a,i,l,c,d;return o?(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("h3",{className:"text-xs uppercase text-gray-400 mt-4",children:"Estilo de Flecha"}),(0,To.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,To.jsx)("label",{htmlFor:"edge-color",className:"text-sm font-medium tracking-tight",children:"Color"}),(0,To.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,To.jsxs)("div",{className:"relative",children:[(0,To.jsx)("span",{className:"block h-4 w-4 rounded-sm shadow-sm",style:{backgroundColor:(null===(e=o.style)||void 0===e?void 0:e.stroke)||"#2B78E4"}}),(0,To.jsx)("input",{id:"edge-color",className:"absolute inset-0 h-full w-full cursor-pointer opacity-0",type:"color",value:(null===(t=o.style)||void 0===t?void 0:t.stroke)||"#2B78E4",onChange:e=>{const t=e.target.value;s(o.id,"style",{...o.style,stroke:t}),s(o.id,"markerEnd",{...o.markerEnd,color:t})}})]}),(0,To.jsx)("input",{className:"focus:outline-hidden w-16 text-sm tabular-nums focus:border-none",type:"text",value:(null===(n=o.style)||void 0===n?void 0:n.stroke)||"#2B78E4",onChange:e=>{const t=e.target.value;s(o.id,"style",{...o.style,stroke:t}),s(o.id,"markerEnd",{...o.markerEnd,color:t})}})]})]}),(0,To.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,To.jsx)("h3",{className:"text-sm font-medium tracking-tight",children:"Estilo de L\xednea"}),(0,To.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,To.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+("straight"===o.type?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>{s(o.id,"type","straight"),s(o.id,"data",{...o.data,lineStyle:"straight"})},children:(0,To.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,To.jsx)("path",{d:"M1 8H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,To.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+("angle"===o.type?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>{s(o.id,"type","angle"),s(o.id,"data",{...o.data,lineStyle:"angle"})},children:(0,To.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,To.jsx)("path",{d:"M1 8H8L8 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,To.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+("curved"===o.type?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>{s(o.id,"type","curved"),s(o.id,"data",{...o.data,lineStyle:"curved"})},children:(0,To.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,To.jsx)("path",{d:"M1 8C4 8 8 4 8 8C8 12 12 8 15 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,To.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,To.jsx)("h3",{className:"text-sm font-medium tracking-tight",children:"Grosor"}),(0,To.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,To.jsx)("button",{disabled:(null===(r=o.style)||void 0===r?void 0:r.strokeWidth)<=1,className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{var e;return s(o.id,"style",{...o.style,strokeWidth:Math.max(1,((null===(e=o.style)||void 0===e?void 0:e.strokeWidth)||3)-1)})},children:(0,To.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 stroke-2",children:(0,To.jsx)("path",{d:"M5 12h14"})})}),(0,To.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md bg-gray-200 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60",onClick:()=>{var e;return s(o.id,"style",{...o.style,strokeWidth:((null===(e=o.style)||void 0===e?void 0:e.strokeWidth)||3)+1})},children:(0,To.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 stroke-2",children:[(0,To.jsx)("path",{d:"M12 5v14"}),(0,To.jsx)("path",{d:"M5 12h14"}),(0,To.jsx)("path",{d:"M12 5v14"})]})})]})]}),(0,To.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,To.jsx)("h3",{className:"text-sm font-medium tracking-tight",children:"Tipo de L\xednea"}),(0,To.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,To.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+(null!==(a=o.style)&&void 0!==a&&a.strokeDasharray?"bg-gray-200":"bg-blue-500 text-white"),onClick:()=>s(o.id,"style",{...o.style,strokeDasharray:void 0}),children:(0,To.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,To.jsx)("path",{d:"M1 8H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,To.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+("3,3"===(null===(i=o.style)||void 0===i?void 0:i.strokeDasharray)?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>s(o.id,"style",{...o.style,strokeDasharray:"3,3"}),children:(0,To.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,To.jsx)("path",{d:"M1 8H3M5 8H7M9 8H11M13 8H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,To.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+("6,6"===(null===(l=o.style)||void 0===l?void 0:l.strokeDasharray)?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>s(o.id,"style",{...o.style,strokeDasharray:"6,6"}),children:(0,To.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:(0,To.jsx)("path",{d:"M1 8H2M4 8H5M7 8H8M10 8H11M13 8H14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,To.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,To.jsx)("h3",{className:"text-sm font-medium tracking-tight",children:"Estilo de Flecha"}),(0,To.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,To.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+("arrow"===(null===(c=o.markerEnd)||void 0===c?void 0:c.type)?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>s(o.id,"markerEnd",{type:"arrow"}),children:(0,To.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 stroke-2",children:[(0,To.jsx)("path",{d:"m12 19-7-7 7-7"}),(0,To.jsx)("path",{d:"M19 12H5"})]})}),(0,To.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-md text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+("arrowclosed"===(null===(d=o.markerEnd)||void 0===d?void 0:d.type)?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>s(o.id,"markerEnd",{type:"arrowclosed"}),children:(0,To.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 fill-black",children:(0,To.jsx)("path",{d:"M18 15h-6v4l-7-7 7-7v4h6v6z"})})})]})]})]}):null})():u?"properties"===l?(0,To.jsxs)("div",{className:"flex flex-col",children:[g(),(0,To.jsx)("hr",{className:"my-5 border-gray-200"}),"horizontal-line"!==d&&"vertical-line"!==d&&(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Tama\xf1o de Fuente"}),(0,To.jsx)("div",{className:"mt-2 flex gap-2",children:["S","M","L","XL","XXL"].map(e=>(0,To.jsx)("button",{onClick:()=>v(e),className:"flex h-6 w-6 min-w-max items-center justify-center rounded-md px-1 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+(x()===e?"bg-blue-500 text-white":"bg-gray-200"),children:(0,To.jsx)("span",{className:"text-xs font-medium",children:e})},e))})]}),("topic"===n.data.nodeType||"subtopic"===n.data.nodeType)&&(0,To.jsx)(To.Fragment,{children:(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Color del Nodo"}),(0,To.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:[{label:"a",color:"#333333",borderColor:"#333333",textColor:"#ffffff"},{label:"b",color:"#fdff00",borderColor:"#d6d700",textColor:"#000000"},{label:"c",color:"#ffe599",borderColor:"#f3c950",textColor:"#000000"},{label:"d",color:"#c6f6d5",borderColor:"#c6f6d5",textColor:"#000000"},{label:"e",color:"#a8caff",borderColor:"#74adff",textColor:"#000000"},{label:"f",color:"#cbcbcb",borderColor:"#aaaaaa",textColor:"#000000"},{label:"g",color:"#fed7e2",borderColor:"#fdcaa9",textColor:"#000000"},{label:"h",color:"#f4f4f4",borderColor:"#cccccc",textColor:"#000000"}].map(e=>(0,To.jsx)("button",{"aria-label":e.label,onClick:()=>i(n.id,"backgroundColor",e.color),className:"flex h-6 w-6 min-w-max shrink-0 items-center justify-center rounded-md border px-1 text-sm font-medium uppercase "+(n.data.backgroundColor===e.color?"ring-2 ring-blue-500":""),style:{backgroundColor:e.color,color:e.textColor,borderColor:e.borderColor},children:e.label},e.label))})]})})]}):(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsxs)("div",{className:"flex flex-col",children:[(0,To.jsx)("label",{htmlFor:"title",className:"text-xs uppercase text-gray-400",children:"T\xedtulo"}),(0,To.jsx)("input",{id:"title",placeholder:"Ingresar t\xedtulo",className:"focus:outline-hidden mt-2 flex h-8 items-center rounded-sm border border-gray-200 px-2 py-3 text-sm focus:ring-1 focus:ring-black",type:"text",value:n.data.label||"",name:"title",onChange:e=>i(n.id,"label",e.target.value)})]}),(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsxs)("label",{htmlFor:"description",className:"flex items-center text-xs uppercase text-gray-400",children:["Descripci\xf3n",(0,To.jsx)("button",{"data-state":"closed",children:(0,To.jsx)("span",{className:"group relative normal-case",children:(0,To.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-info ml-1 inline-block",children:[(0,To.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,To.jsx)("path",{d:"M12 16v-4"}),(0,To.jsx)("path",{d:"M12 8h.01"})]})})})]}),(0,To.jsx)("div",{className:"relative",children:(0,To.jsx)("div",{contentEditable:"true",translate:"no",className:"tiptap ProseMirror content-editor prose prose-quoteless prose-h1:mb-2.5 prose-h1:mt-7 prose-h2:mb-3 prose-h2:mt-0 prose-h3:mb-[5px] prose-h3:mt-[10px] prose-p:mb-2 prose-p:mt-0 prose-blockquote:font-normal prose-blockquote:not-italic prose-blockquote:text-gray-700 prose-li:m-0 prose-li:mb-0.5 mt-2 min-h-[300px] border border-gray-200 rounded-sm p-2 focus:outline-hidden focus:ring-1 focus:ring-black",tabIndex:"0",dangerouslySetInnerHTML:{__html:n.data.description||'<p><br class="ProseMirror-trailingBreak"></p>'},onBlur:e=>i(n.id,"description",e.target.innerHTML)})})]}),(0,To.jsxs)("div",{className:"mt-4 space-y-2 border-t border-gray-200 pt-4",children:[h.map((e,t)=>(0,To.jsxs)("div",{className:"flex flex-col gap-1 overflow-hidden rounded-md border border-gray-200",children:[(0,To.jsxs)("div",{className:"flex flex-col gap-2 p-3",children:[(0,To.jsxs)("select",{className:"focus-visible:outline-hidden flex h-8 rounded-md border border-gray-200 bg-transparent px-3 py-1 text-sm transition-colors placeholder:text-gray-600 focus-visible:ring-1 focus-visible:ring-gray-500 disabled:cursor-not-allowed disabled:opacity-50",value:e.type,onChange:t=>f(e.id,"type",t.target.value),children:[(0,To.jsx)("option",{value:"video",children:"Video"}),(0,To.jsx)("option",{value:"article",children:"Art\xedculo"}),(0,To.jsx)("option",{value:"opensource",children:"C\xf3digo Abierto"}),(0,To.jsx)("option",{value:"course",children:"Curso"}),(0,To.jsx)("option",{value:"website",children:"Sitio Web"}),(0,To.jsx)("option",{value:"podcast",children:"Podcast"})]}),(0,To.jsxs)("div",{className:"relative flex grow flex-col gap-1.5",children:[(0,To.jsx)("input",{id:`link-title-${e.id}`,placeholder:"T\xedtulo del recurso",className:"focus-visible:outline-hidden flex h-8 w-full rounded-md border border-gray-200 bg-transparent px-3 py-1 pl-7 text-sm transition-colors placeholder:text-gray-600 focus-visible:ring-1 focus-visible:ring-gray-500 disabled:cursor-not-allowed disabled:opacity-50",type:"text",value:e.title,onChange:t=>f(e.id,"title",t.target.value)}),(0,To.jsx)("label",{htmlFor:`link-title-${e.id}`,className:"absolute left-[8px] top-[9px]",children:(0,To.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-circle-check h-[14px] w-[14px]",children:[(0,To.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,To.jsx)("path",{d:"m9 12 2 2 4-4"})]})})]}),(0,To.jsxs)("div",{className:"relative flex grow flex-col gap-1.5",children:[(0,To.jsx)("input",{id:`link-url-${e.id}`,spellCheck:"false",placeholder:"URL del recurso",className:"focus-visible:outline-hidden flex h-8 w-full rounded-md border border-gray-200 bg-transparent px-3 py-1 pl-7 text-sm transition-colors placeholder:text-gray-600 focus-visible:ring-1 focus-visible:ring-gray-500 disabled:cursor-not-allowed disabled:opacity-50",type:"text",value:e.url,onChange:t=>f(e.id,"url",t.target.value)}),(0,To.jsx)("label",{htmlFor:`link-url-${e.id}`,className:"absolute left-[8px] top-[9px]",children:(0,To.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-link",children:[(0,To.jsx)("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),(0,To.jsx)("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})})]})]}),(0,To.jsxs)("button",{className:"flex h-7 w-full shrink-0 items-center justify-center border-t border-red-200 bg-red-100 text-red-700 disabled:cursor-not-allowed disabled:opacity-70",onClick:()=>(e=>{const t=h.filter(t=>t.id!==e);p(t),i(n.id,"links",t)})(e.id),children:[(0,To.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-trash",children:[(0,To.jsx)("path",{d:"M3 6h18"}),(0,To.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,To.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),(0,To.jsx)("span",{className:"ml-2 text-sm",children:"Eliminar"})]})]},e.id)),(0,To.jsx)("button",{className:"mt-2.5 flex h-8 w-full items-center justify-center rounded-sm border border-gray-200 text-sm font-medium hover:bg-gray-100",onClick:m,children:"Agregar Enlace"})]})]}):(0,To.jsxs)("div",{className:"flex flex-col",children:[g(),"title"!==d&&"paragraph"!==d&&(0,To.jsx)("hr",{className:"my-5 border-gray-200"}),"horizontal-line"!==d&&"vertical-line"!==d&&(0,To.jsxs)("div",{className:("title"===d||"paragraph"===d?"mt-2":"mt-4")+" flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Tama\xf1o de Fuente"}),(0,To.jsx)("div",{className:"mt-2 flex gap-2",children:["S","M","L","XL","XXL"].map(e=>(0,To.jsx)("button",{onClick:()=>v(e),className:"flex h-6 w-6 min-w-max items-center justify-center rounded-md px-1 text-sm font-medium hover:bg-gray-200/80 disabled:cursor-not-allowed disabled:text-gray-600 disabled:opacity-60 "+(x()===e?"bg-blue-500 text-white":"bg-gray-200"),children:(0,To.jsx)("span",{className:"text-xs font-medium",children:e})},e))})]}),("topic"===n.data.nodeType||"subtopic"===n.data.nodeType)&&(0,To.jsx)(To.Fragment,{children:(0,To.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Color del Nodo"}),(0,To.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:[{label:"a",color:"#333333",borderColor:"#333333",textColor:"#ffffff"},{label:"b",color:"#fdff00",borderColor:"#d6d700",textColor:"#000000"},{label:"c",color:"#ffe599",borderColor:"#f3c950",textColor:"#000000"},{label:"d",color:"#c6f6d5",borderColor:"#c6f6d5",textColor:"#000000"},{label:"e",color:"#a8caff",borderColor:"#74adff",textColor:"#000000"},{label:"f",color:"#cbcbcb",borderColor:"#aaaaaa",textColor:"#000000"},{label:"g",color:"#fed7e2",borderColor:"#fdcaa9",textColor:"#000000"},{label:"h",color:"#f4f4f4",borderColor:"#cccccc",textColor:"#000000"}].map(e=>(0,To.jsx)("button",{"aria-label":e.label,onClick:()=>i(n.id,"backgroundColor",e.color),className:"flex h-6 w-6 min-w-max shrink-0 items-center justify-center rounded-md border px-1 text-sm font-medium uppercase "+(n.data.backgroundColor===e.color?"ring-2 ring-blue-500":""),style:{backgroundColor:e.color,color:e.textColor,borderColor:e.borderColor},children:e.label},e.label))})]})}),"paragraph"===n.data.nodeType&&(0,To.jsx)(To.Fragment,{children:(0,To.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,To.jsx)("label",{className:"text-xs uppercase text-gray-400",children:"Color de Fondo"}),(0,To.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,To.jsx)("button",{onClick:()=>i(n.id,"backgroundColor","transparent"),className:"flex h-6 w-6 min-w-max shrink-0 items-center justify-center rounded-md border px-1 text-sm font-medium uppercase "+("transparent"!==n.data.backgroundColor&&n.data.backgroundColor?"":"ring-2 ring-blue-500"),style:{backgroundColor:"transparent",color:"#000000",borderColor:"#e5e7eb"},children:"T"}),(0,To.jsx)("button",{onClick:()=>i(n.id,"backgroundColor","#ffffff"),className:"flex h-6 w-6 min-w-max shrink-0 items-center justify-center rounded-md border px-1 text-sm font-medium uppercase "+("#ffffff"===n.data.backgroundColor?"ring-2 ring-blue-500":""),style:{backgroundColor:"#ffffff",color:"#000000",borderColor:"#d1d5db"},children:"B"})]})]})})]})})]})},cm=Zp,dm=r.memo(e=>{let{id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i,targetPosition:s,style:l={},markerEnd:c,markerStart:d}=e;const[u]=cd({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s});return(0,To.jsx)("path",{id:t,style:l,className:"react-flow__edge-path",d:u,markerEnd:c,markerStart:d})}),um=r.memo(e=>{let{id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i,targetPosition:s,style:l={},markerEnd:c,markerStart:d}=e;const[u]=id({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s});return(0,To.jsx)("path",{id:t,style:l,className:"react-flow__edge-path",d:u,markerEnd:c,markerStart:d})}),hm=r.memo(e=>{let{id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i,targetPosition:s,style:l={},markerEnd:c,markerStart:d}=e;const[u]=pd({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s});return(0,To.jsx)("path",{id:t,style:l,className:"react-flow__edge-path",d:u,markerEnd:c,markerStart:d})}),pm={custom:vp},mm={straight:dm,angle:um,curved:hm};function fm(e){let{guideLines:t}=e;const{getViewport:n}=ju(),{x:r,y:o,zoom:a}=n(),i=e=>e*a+r,s=e=>e*a+o,l=window.innerWidth,c=window.innerHeight;return(0,To.jsx)("svg",{className:"absolute inset-0 pointer-events-none",style:{width:"100%",height:"100%",zIndex:50},children:t.map((e,t)=>"vertical"===e.type?(0,To.jsx)("line",{x1:i(e.value),x2:i(e.value),y1:0,y2:c,stroke:"#2563eb",strokeWidth:3,opacity:.85},e.key+t):(0,To.jsx)("line",{y1:s(e.value),y2:s(e.value),x1:0,x2:l,stroke:"#2563eb",strokeWidth:3,opacity:.85},e.key+t))})}function gm(e){let{onNodeAdd:t}=e;const{project:n}=ju();return(0,r.useEffect)(()=>{const e=e=>{e.preventDefault();const r=document.querySelector(".react-flow").getBoundingClientRect(),o=e.dataTransfer.getData("application/json");if(!o)return;const a=JSON.parse(o),i=n({x:e.clientX-r.left,y:e.clientY-r.top});t(a,i)},r=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},o=document.querySelector(".react-flow");return o&&(o.addEventListener("drop",e),o.addEventListener("dragover",r)),()=>{o&&(o.removeEventListener("drop",e),o.removeEventListener("dragover",r))}},[t,n]),null}function vm(e){let{nodes:t}=e;const{fitView:n}=ju(),o=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{const e=setTimeout(()=>{console.log("AutoFitView: Ejecutando fitView inicial"),n({padding:.2,includeHiddenNodes:!1,minZoom:.1,maxZoom:1.5}),o.current=!0},2e3);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{if(t&&t.length>0&&!o.current){const e=setTimeout(()=>{console.log("AutoFitView: Ejecutando fitView con",t.length,"nodos"),n({padding:.2,includeHiddenNodes:!1,minZoom:.1,maxZoom:1.5}),o.current=!0},1e3);return()=>clearTimeout(e)}},[t,n]),null}const xm=()=>{const{roadmapType:e}=re(),t=ne(),{user:n}=Lo(),[o]=ct(),a=o.get("version"),i=o.get("mode"),s=Sp,l=(0,r.useMemo)(()=>s[e],[e,s]),c=(0,r.useMemo)(()=>"proposal"===i?`${null===l||void 0===l?void 0:l.title} (Modo Propuesta)`:a?`${null===l||void 0===l?void 0:l.title} (Editando Versi\xf3n)`:null===l||void 0===l?void 0:l.title,[null===l||void 0===l?void 0:l.title,a,i]),d=(0,r.useMemo)(()=>"proposal"===i,[i]),u=(0,r.useMemo)(()=>(null===l||void 0===l?void 0:l.nodes)||[],[null===l||void 0===l?void 0:l.nodes]),h=(0,r.useMemo)(()=>((null===l||void 0===l?void 0:l.edges)||[]).map(e=>({...e,type:"straight",markerEnd:{type:Zc.ArrowClosed,color:"#1e3a8a"},style:{stroke:"#1e3a8a",strokeWidth:3}})),[null===l||void 0===l?void 0:l.edges]);if(!l)return(0,To.jsx)("div",{className:"w-full h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Roadmap no encontrado"}),(0,To.jsxs)("p",{className:"text-gray-600 mb-6",children:['El roadmap "',e,'" no existe.']}),(0,To.jsx)("button",{onClick:()=>t("/"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Volver al Inicio"})]})});const[p,m,f]=Jh(u),[g,v,x]=Zh(h);if(!p||0===p.length)return(0,To.jsx)("div",{className:"w-full h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("h1",{className:"text-2xl font-bold text-red-700 mb-4",children:"No se pudieron cargar los nodos del roadmap"}),(0,To.jsx)("p",{className:"text-gray-600 mb-6",children:"Verifica tu conexi\xf3n o la configuraci\xf3n de la base de datos."}),(0,To.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Reintentar"})]})});(0,r.useEffect)(()=>{(async()=>{if(a)try{const t=`roadmap_${e}_version_${a}`,r=localStorage.getItem(t);if(r){const e=JSON.parse(r);if(e.nodes&&e.edges)return console.log("Cargando datos de versi\xf3n desde localStorage:",a),m(e.nodes),v(e.edges.map(e=>({...e,type:e.type||"straight",markerEnd:e.markerEnd||{type:Zc.ArrowClosed,color:"#1e3a8a"},style:e.style||{stroke:"#1e3a8a",strokeWidth:3}}))),void localStorage.removeItem(t)}if(n){console.log("Cargando datos de versi\xf3n desde BD:",a);const{data:e,error:t}=await Qr.from("roadmap_versions").select("*").eq("id",a).single();if(t)return void console.error("Error cargando versi\xf3n desde BD:",t);e&&e.nodes&&e.edges&&(console.log("Versi\xf3n cargada desde BD:",e),m(e.nodes),v(e.edges.map(e=>({...e,type:e.type||"straight",markerEnd:e.markerEnd||{type:Zc.ArrowClosed,color:"#1e3a8a"},style:e.style||{stroke:"#1e3a8a",strokeWidth:3}}))))}}catch(t){console.error("Error cargando datos de versi\xf3n:",t)}})()},[a,e,m,v,n]),(0,r.useEffect)(()=>{ge("proposal"===i)},[i]),(0,r.useEffect)(()=>{(async()=>{if(!a&&n)try{console.log("Cargando versi\xf3n m\xe1s reciente del usuario para:",e);const{data:t,error:r}=await Qr.from("roadmap_versions").select("*").eq("user_id",n.id).eq("roadmap_type",e).order("created_at",{ascending:!1}).limit(1).single();if(r&&"PGRST116"!==r.code)return void console.error("Error cargando versi\xf3n m\xe1s reciente:",r);t&&t.nodes&&t.edges&&(console.log("Cargando versi\xf3n m\xe1s reciente del usuario:",t.id),m(t.nodes),v(t.edges.map(e=>({...e,type:e.type||"straight",markerEnd:e.markerEnd||{type:Zc.ArrowClosed,color:"#1e3a8a"},style:e.style||{stroke:"#1e3a8a",strokeWidth:3}}))))}catch(t){console.error("Error cargando versi\xf3n m\xe1s reciente del usuario:",t)}})()},[a,e,n,m,v]);const[y,b]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),[j,S]=(0,r.useState)(!1),[N,C]=(0,r.useState)("idle"),[_,E]=(0,r.useState)(!1),[P,T]=(0,r.useState)([]),[M,R]=(0,r.useState)(null),[L,A]=(0,r.useState)(""),[O,z]=(0,r.useState)(!1),[I,$]=(0,r.useState)(""),[D,B]=(0,r.useState)(!1),[F,H]=(0,r.useState)(!1),[U,q]=(0,r.useState)(!1),[W,V]=(0,r.useState)(""),[Y,K]=(0,r.useState)(!1),[X,G]=(0,r.useState)(l.title),[J,Z]=(0,r.useState)(l.description),[Q,ee]=(0,r.useState)("properties"),[te,oe]=(0,r.useState)(!1),[ae,ie]=(0,r.useState)(1),[se,le]=(0,r.useState)(!0),[ce,de]=(0,r.useState)(!1),[ue,he]=(0,r.useState)(!1),[pe,me]=(0,r.useState)(!1),[fe,ge]=(0,r.useState)(!1),[ve,xe]=(0,r.useState)(null),[ye,be]=(0,r.useState)([]),[we,ke]=(0,r.useState)(null),je=(0,r.useMemo)(()=>Go.filter(e=>e.title.toLowerCase().includes(W.toLowerCase())||e.description.toLowerCase().includes(W.toLowerCase())),[W]),Se=(0,r.useMemo)(()=>Xo.filter(e=>e.name.toLowerCase().includes(I.toLowerCase())||e.description.toLowerCase().includes(I.toLowerCase())),[I]),Ne=(0,r.useMemo)(()=>y?p.find(e=>e.id===y):null,[y,p]),Ce=(0,r.useMemo)(()=>w?g.find(e=>e.id===w):null,[w,g]);(0,r.useEffect)(()=>{(async()=>{if(cm)console.log("Modo desarrollo: omitiendo carga de propuestas de Supabase");else try{const t=await zo.getProposals(e);T(t)}catch(t){console.error("Error loading proposals:",t)}})(),(async()=>{if(n)try{const{data:t,error:r}=await Qr.from("edit_proposals").select("*").eq("roadmap_type",e).eq("user_id",n.id).eq("status","pending").single();!r&&t&&xe(t)}catch(t){console.log("No hay propuesta pendiente del usuario")}})()},[e,cm,n]);const _e=(0,r.useCallback)(e=>{b(e),k(null),B(!0)},[]),Ee=(0,r.useCallback)((e,t)=>{k(t.id),b(null),B(!0)},[]),Pe=(0,r.useCallback)(e=>{document.querySelector(".properties-panel");const t=document.querySelector(".properties-overlay");e.target===t&&(B(!1),b(null),k(null))},[]);(0,r.useEffect)(()=>{if(D){const e=e=>{"Escape"===e.key&&(B(!1),b(null),k(null))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}},[D]);const Te=(0,r.useCallback)((e,t,n)=>{v(r=>r.map(r=>{if(r.id===e){const e={...r,[t]:n};return"data"===t&&n.lineStyle&&(e.type=n.lineStyle),"style"===t&&n.stroke&&(e.markerEnd={...e.markerEnd,color:n.stroke}),e}return r})),S(!0)},[v]),Me=(0,r.useCallback)((e,t)=>{const n={id:`${e.type}-${Date.now()}`,type:"custom",position:t,data:{...e.defaultData,label:e.defaultData.label}};m(e=>e.concat(n))},[m]),Re=((0,r.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),(0,r.useCallback)(async()=>{if(d)alert('No puedes guardar como nueva versi\xf3n cuando est\xe1s editando una versi\xf3n espec\xedfica. Usa el bot\xf3n "Crear Propuesta" para proponer cambios.');else if(n){C("saving");try{let t=null;if(console.log("Guardando versi\xf3n en BD para roadmap:",e),console.log("Datos a guardar:",{roadmapType:e,userId:n.id,nodesCount:p.length,edgesCount:g.length,versionId:a||"nueva versi\xf3n"}),a){const{data:e,error:r}=await Qr.from("roadmap_versions").update({nodes:p,edges:g,description:`Versi\xf3n actualizada por ${n.email} - ${(new Date).toLocaleString()}`,updated_at:(new Date).toISOString()}).eq("id",a).eq("user_id",n.id).select().single();if(r)throw console.error("Error al actualizar versi\xf3n:",r),r;t=e,console.log("Versi\xf3n actualizada exitosamente:",e)}else{const{data:r,error:o}=await Qr.from("roadmap_versions").insert({roadmap_type:e,user_id:n.id,nodes:p,edges:g,description:`Nueva versi\xf3n creada por ${n.email} - ${(new Date).toLocaleString()}`,is_public:!0,total_votes:0,up_votes:0,down_votes:0}).select().single();if(o)throw console.error("Error al guardar en BD:",o),o;t=r,console.log("Nueva versi\xf3n guardada exitosamente:",r)}cm&&(Io(e,p,g),console.log("Respaldo en localStorage guardado (modo desarrollo)")),C("saved"),S(!1);const r=document.createElement("div");if(r.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 translate-x-full",r.innerHTML=`\n        <div class="flex items-center space-x-2">\n          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n          </svg>\n          <span class="font-medium">\n            ${a?"\xa1Versi\xf3n actualizada exitosamente!":"\xa1Nueva versi\xf3n guardada exitosamente!"}\n          </span>\n        </div>\n      `,document.body.appendChild(r),setTimeout(()=>{r.classList.remove("translate-x-full")},100),setTimeout(()=>{r.classList.add("translate-x-full"),setTimeout(()=>{document.body.removeChild(r)},300)},3e3),C("idle"),!a&&t&&t.id){const n=`/edit/${e}?version=${t.id}`;window.history.replaceState({},"",n),console.log("URL actualizada con nuevo versionId:",n)}}catch(t){console.error("Error saving changes:",t),C("error");const e=document.createElement("div");e.className="fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 translate-x-full",e.innerHTML=`\n        <div class="flex items-center space-x-2">\n          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n          </svg>\n          <span class="font-medium">Error al guardar: ${t.message}</span>\n        </div>\n      `,document.body.appendChild(e),setTimeout(()=>{e.classList.remove("translate-x-full")},100),setTimeout(()=>{e.classList.add("translate-x-full"),setTimeout(()=>{document.body.removeChild(e)},300)},5e3)}}else alert("Debes iniciar sesi\xf3n para guardar cambios")},[cm,n,p,g,l,e,a,d])),Le=(0,r.useCallback)(async()=>{if(!n)return void alert("Debes iniciar sesi\xf3n para crear una propuesta");try{const{data:t,error:r}=await Qr.from("edit_proposals").select("*").eq("roadmap_type",e).eq("user_id",n.id).eq("status","pending").single();if(t&&!ve)return void alert("Ya tienes una propuesta pendiente. No puedes crear otra propuesta hasta que la actual sea aprobada o rechazada.")}catch(m){console.log("No hay propuesta pendiente del usuario")}const t=l.nodes,r=l.edges,o=[],a=p.filter(e=>!t.find(t=>t.id===e.id)),i=p.filter(e=>{const n=t.find(t=>t.id===e.id);return n&&JSON.stringify(n)!==JSON.stringify(e)}),s=t.filter(e=>!p.find(t=>t.id===e.id)),c=g.filter(e=>!r.find(t=>t.id===e.id)),d=g.filter(e=>{const t=r.find(t=>t.id===e.id);return t&&JSON.stringify(t)!==JSON.stringify(e)}),u=r.filter(e=>!g.find(t=>t.id===e.id));if(a.forEach(e=>{o.push({type:"node",action:"add",before:null,after:e.data.label})}),i.forEach(e=>{const n=t.find(t=>t.id===e.id);o.push({type:"node",action:"modify",before:n.data.label,after:e.data.label})}),s.forEach(e=>{o.push({type:"node",action:"remove",before:e.data.label,after:null})}),c.forEach(e=>{const t=p.find(t=>t.id===e.source),n=p.find(t=>t.id===e.target);o.push({type:"connection",action:"add",before:null,after:`${(null===t||void 0===t?void 0:t.data.label)||"Nodo"} \u2192 ${(null===n||void 0===n?void 0:n.data.label)||"Nodo"}`})}),d.forEach(e=>{const n=r.find(t=>t.id===e.id),a=p.find(t=>t.id===e.source),i=p.find(t=>t.id===e.target),s=t.find(e=>e.id===n.source),l=t.find(e=>e.id===n.target);o.push({type:"connection",action:"modify",before:`${(null===s||void 0===s?void 0:s.data.label)||"Nodo"} \u2192 ${(null===l||void 0===l?void 0:l.data.label)||"Nodo"}`,after:`${(null===a||void 0===a?void 0:a.data.label)||"Nodo"} \u2192 ${(null===i||void 0===i?void 0:i.data.label)||"Nodo"}`})}),u.forEach(e=>{const n=t.find(t=>t.id===e.source),r=t.find(t=>t.id===e.target);o.push({type:"connection",action:"remove",before:`${(null===n||void 0===n?void 0:n.data.label)||"Nodo"} \u2192 ${(null===r||void 0===r?void 0:r.data.label)||"Nodo"}`,after:null})}),0===o.length)return void alert("No hay cambios para proponer. Realiza algunas modificaciones primero.");const h={title:`Propuesta de edici\xf3n para ${l.title}`,description:L||"Cambios propuestos por el usuario",changes:o,author:{name:n.email||"Usuario"},created_at:(new Date).toISOString(),status:"pending",votes:[],comments:[]};try{if(cm)return console.log("Propuesta creada:",h),alert("Propuesta creada exitosamente (modo desarrollo)"),ge(!1),void A("");let t;if(ve){const{data:e,error:n}=await Qr.from("edit_proposals").update({title:h.title,description:h.description,changes:h.changes,updated_at:(new Date).toISOString()}).eq("id",ve.id).select().single();if(n)throw n;t=e,alert("Propuesta actualizada exitosamente")}else{const{data:r,error:o}=await Qr.from("edit_proposals").insert({roadmap_type:e,user_id:n.id,title:h.title,description:h.description,changes:h.changes,status:"pending"}).select().single();if(o)throw o;t=r,alert("Propuesta creada exitosamente")}ge(!1),A("")}catch(m){console.error("Error creating/updating proposal:",m),alert("Error al procesar la propuesta: "+m.message)}},[n,p,g,l,e,L,cm]),Ae=(0,r.useCallback)(async(t,r,o)=>{try{const a=cm?Qp.id:n.id;await zo.voteOnProposal(t,a,r,o);const i=await zo.getProposals(e);T(i)}catch(a){console.error("Error voting on proposal:",a),alert("Error al votar: "+a.message)}},[cm,n,e]),Oe=(0,r.useCallback)(e=>{const t={id:`node-${Date.now()}`,type:"custom",position:{x:400*Math.random()+100,y:300*Math.random()+100},data:{...e.defaultData,freeResources:[],premiumResources:[]}};m(e=>[...e,t]),S(!0)},[m]),ze=(0,r.useCallback)((e,t,n)=>{m(r=>r.map(r=>r.id===e?"positionX"===t?{...r,position:{...r.position,x:n}}:"positionY"===t?{...r,position:{...r.position,y:n}}:{...r,data:{...r.data,[t]:n}}:r)),S(!0)},[m]),Ie=(0,r.useCallback)(e=>{window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este nodo?")&&(m(t=>t.filter(t=>t.id!==e)),v(t=>t.filter(t=>t.source!==e&&t.target!==e)),b(null),B(!1),S(!0))},[m,v]),$e=(0,r.useCallback)(e=>{const t=p.find(t=>t.id===e);if(t){const e={...t,id:`node-${Date.now()}`,position:{x:t.position.x+50,y:t.position.y+50},data:{...t.data,label:`${t.data.label} (copia)`}};m(t=>[...t,e]),S(!0)}},[p,m]),De=((0,r.useCallback)(()=>{ie(e=>Math.min(e+.1,2))},[]),(0,r.useCallback)(()=>{ie(e=>Math.max(e-.1,.1))},[]),(0,r.useCallback)(()=>{ie(.6)},[]),(0,r.useCallback)(()=>{},[]),(0,r.useCallback)(()=>{y&&$e(y)},[y,$e]),(0,r.useCallback)(()=>{y&&Ie(y)},[y,Ie]),(0,r.useCallback)(()=>{me(!pe)},[pe]),(0,r.useCallback)(()=>{de(!ce),ce||(B(!1),H(!1),q(!1),oe(!1))},[ce])),Be=((0,r.useCallback)(()=>{const t={roadmap:{title:l.title,description:l.description,type:e},nodes:p,edges:g,metadata:{exportedAt:(new Date).toISOString(),version:"1.0",totalNodes:p.length,totalConnections:g.length}},n=JSON.stringify(t,null,2),r=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(r),a=document.createElement("a");a.href=o,a.download=`${e}-export-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(o)},[l,e,p,g]),(0,r.useCallback)(e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{const t=JSON.parse(e.target.result);t.nodes&&t.edges?(m(t.nodes),v(t.edges),S(!0),alert("Datos importados correctamente")):alert("Formato de archivo inv\xe1lido")}catch(t){console.error("Error importing data:",t),alert("Error al importar los datos")}},e.readAsText(t)}},[m,v]),(0,r.useCallback)(()=>{const t={roadmap:l.title,summary:{totalNodes:p.length,totalConnections:g.length,nodeTypes:p.reduce((e,t)=>{const n=t.data.type||"unknown";return e[n]=(e[n]||0)+1,e},{})},nodes:p.map(e=>({id:e.id,label:e.data.label,type:e.data.type,description:e.data.description})),connections:g.map(e=>({source:e.source,target:e.target,type:e.type}))},n=JSON.stringify(t,null,2),r=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(r),a=document.createElement("a");a.href=o,a.download=`${e}-report-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(o)},[l,e,p,g]),p),Fe=(0,r.useCallback)(e=>{const t={...e,markerEnd:{type:Zc.ArrowClosed},style:{stroke:"#1e3a8a",strokeWidth:3}};v(e=>yd(t,e)),S(!0)},[v]),He=e=>{const{position:t,data:n,width:r=120,height:o=60}=e;return{left:t.x,right:t.x+(e.width||r),top:t.y,bottom:t.y+(e.height||o),centerX:t.x+(e.width||r)/2,centerY:t.y+(e.height||o)/2,width:e.width||r,height:e.height||o}},Ue=(0,r.useCallback)((e,t)=>{if(!t||!t.id||!t.position)return console.warn("Nodo inv\xe1lido en drag:",t),void be([]);ke(t.id);const n=He(t),r=[];p.forEach(e=>{if(!e||!e.id||!e.position||e.id===t.id)return;const o=He(e);o&&([{type:"vertical",pos:n.left,other:o.left,key:"left"},{type:"vertical",pos:n.right,other:o.right,key:"right"},{type:"vertical",pos:n.centerX,other:o.centerX,key:"centerX"}].forEach(t=>{let{type:n,pos:o,other:a,key:i}=t;Math.abs(o-a)<8&&r.push({type:n,value:a,key:`${e&&e.id?e.id:"safe"}-${i}`})}),[{type:"horizontal",pos:n.top,other:o.top,key:"top"},{type:"horizontal",pos:n.bottom,other:o.bottom,key:"bottom"},{type:"horizontal",pos:n.centerY,other:o.centerY,key:"centerY"}].forEach(t=>{let{type:n,pos:o,other:a,key:i}=t;Math.abs(o-a)<8&&r.push({type:n,value:a,key:`${e&&e.id?e.id:"safe"}-${i}`})}))}),be(r)},[p]),qe=(0,r.useCallback)((e,t)=>{if(ke(null),be([]),!t||!t.id||!t.position)return;const n=He(t);let r={x:0,y:0};p.forEach(e=>{if(!e||!e.id||!e.position||e.id===t.id)return;const o=He(e);o&&([{pos:n.left,other:o.left,axis:"x",delta:n.left-o.left},{pos:n.right,other:o.right,axis:"x",delta:n.right-o.right},{pos:n.centerX,other:o.centerX,axis:"x",delta:n.centerX-o.centerX}].forEach(e=>{let{pos:t,other:n,axis:o,delta:a}=e;Math.abs(t-n)<8&&Math.abs(a)>0&&(0===r[o]||Math.abs(a)<Math.abs(r[o]))&&(r[o]=-a)}),[{pos:n.top,other:o.top,axis:"y",delta:n.top-o.top},{pos:n.bottom,other:o.bottom,axis:"y",delta:n.bottom-o.bottom},{pos:n.centerY,other:o.centerY,axis:"y",delta:n.centerY-o.centerY}].forEach(e=>{let{pos:t,other:n,axis:o,delta:a}=e;Math.abs(t-n)<8&&Math.abs(a)>0&&(0===r[o]||Math.abs(a)<Math.abs(r[o]))&&(r[o]=-a)}))}),0===r.x&&0===r.y||m(e=>e.map(e=>e.id===t.id?{...e,position:{x:e.position.x+r.x,y:e.position.y+r.y}}:e))},[p,m]);return(0,To.jsxs)("div",{className:"w-screen h-screen flex flex-col m-0 p-0 overflow-hidden",style:{position:"relative"},children:[(0,To.jsx)(am,{roadmapInfo:{...l,title:c},onShowToolsPanel:()=>oe(!te),showToolsPanel:te,onPresentationMode:De,presentationMode:ce,onShowLiveView:()=>z(!O),onSave:Re,onEditModal:()=>K(!0),onExit:()=>t("/"),saveStatus:N,hasUnsavedChanges:j,proposalMode:fe,onToggleProposalMode:()=>ge(!fe),onCreateProposal:Le,isProposalOnlyMode:d}),(fe||d)&&(0,To.jsx)("div",{className:"bg-orange-50 border-b border-orange-200 px-6 py-3 relative z-40",children:(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,To.jsxs)("div",{children:[(0,To.jsx)("h3",{className:"text-sm font-medium text-orange-800",children:d?"Editando Versi\xf3n - Modo Propuesta Autom\xe1tico":ve?"Editando Propuesta Existente":"Modo Propuesta de Edici\xf3n"}),(0,To.jsx)("p",{className:"text-xs text-orange-600",children:d?"Est\xe1s editando una versi\xf3n espec\xedfica. El modo propuesta se activ\xf3 autom\xe1ticamente. Solo puedes crear propuestas.":ve?"Est\xe1s editando tu propuesta pendiente. Los cambios se actualizar\xe1n autom\xe1ticamente.":a?"Los cambios que hagas se guardar\xe1n como una propuesta basada en esta versi\xf3n":"Los cambios que hagas se guardar\xe1n como una propuesta para la comunidad"})]})]}),(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("textarea",{value:L,onChange:e=>A(e.target.value),placeholder:"Describe tu propuesta (opcional)...",className:"px-3 py-1 text-xs border border-orange-300 rounded-lg focus:ring-1 focus:ring-orange-500 focus:border-transparent resize-none",rows:1,style:{width:"200px"}}),!d&&(0,To.jsx)("button",{onClick:()=>ge(!1),className:"text-orange-600 hover:text-orange-800 transition-colors",children:(0,To.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),(0,To.jsxs)("div",{className:"flex-1 flex flex-row bg-gray-50 m-0 p-0 h-full border-0 gap-0 relative",children:[(0,To.jsx)(im,{showComponentsPanel:F,showRoadmapsPanel:U,onToggleComponentsPanel:()=>{H(!F),q(!1),oe(!1)},onToggleRoadmapsPanel:()=>{q(!U),H(!1),oe(!1)}}),U&&(0,To.jsxs)("div",{className:"w-80 h-full bg-white border-l border-gray-200 z-30 flex flex-col shadow-none",children:[(0,To.jsx)("div",{className:"flex items-center px-4 py-3 border-b border-gray-100",children:(0,To.jsx)("span",{className:"font-medium text-gray-700 text-base",children:"Roadmaps"})}),(0,To.jsx)("div",{className:"p-4 border-b border-gray-100",children:(0,To.jsxs)("div",{className:"relative",children:[(0,To.jsx)("input",{type:"text",placeholder:"Buscar roadmaps...",value:W,onChange:e=>V(e.target.value),className:"w-full px-3 py-2 pl-10 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),(0,To.jsx)("svg",{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,To.jsx)("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:(0,To.jsx)("div",{className:"space-y-2",children:0===je.length?(0,To.jsx)("div",{className:"text-center text-gray-400 py-8 text-sm",children:"No se encontraron roadmaps"}):je.map(e=>(0,To.jsx)("div",{className:"p-3 border rounded-lg transition-colors cursor-pointer "+(e.isCurrent?"border-blue-200 bg-blue-50":"border-gray-100 hover:border-blue-300 hover:bg-blue-50"),onClick:()=>t(e.path),children:(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("span",{className:"text-2xl",children:e.icon}),(0,To.jsxs)("div",{className:"flex-1",children:[(0,To.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:e.title}),(0,To.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),e.isCurrent?(0,To.jsx)("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded-full",children:"Actual"}):(0,To.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e.id))})})]}),(0,To.jsxs)("div",{className:"react-flow-container m-0 p-0 h-full w-full border-0 flex-1 relative",children:[F&&(0,To.jsx)(sm,{showComponentsPanel:F,onClose:()=>H(!1),searchComponents:I,onSearchChange:e=>$(e.target.value),filteredComponents:Se,onAddComponent:Oe}),(0,To.jsxs)(Xh,{nodes:Be,edges:g,onNodesChange:e=>{f(e),S(!0)},onEdgesChange:e=>{x(e),S(!0)},onEdgeClick:Ee,onConnect:Fe,nodeTypes:pm,edgeTypes:mm,fitView:!1,fitViewOptions:{padding:.3,includeHiddenNodes:!1,minZoom:.1,maxZoom:1.5},defaultViewport:{x:0,y:0,zoom:1},minZoom:.1,maxZoom:2,nodesDraggable:!ce,nodesConnectable:!ce,elementsSelectable:!ce,panOnScroll:!1,zoomOnScroll:!1,panOnDrag:!0,zoomOnPinch:!0,panOnScrollMode:"free",attributionPosition:"bottom-left",preventScrolling:!1,zoomOnDoubleClick:!1,multiSelectionKeyCode:null,deleteKeyCode:ce?null:"Delete",connectionMode:"loose",snapToGrid:!1,snapGrid:[15,15],className:"w-full h-full",onNodeClick:(e,t)=>_e(t.id),onNodeDrag:Ue,onNodeDragStop:qe,children:[(0,To.jsx)(lp,{}),(0,To.jsx)(fp,{variant:"lines",gap:50,size:1,color:"#ffffff",style:{backgroundColor:"transparent"}}),(0,To.jsx)(gm,{onNodeAdd:Me}),ye.length>0&&(0,To.jsx)(fm,{guideLines:ye}),(0,To.jsx)(vm,{nodes:p})]}),D&&(0,To.jsx)("div",{className:"fixed inset-0 z-35 bg-transparent properties-overlay",onClick:Pe}),(0,To.jsx)(lm,{showPropertiesPanel:D,selectedNode:Ne,selectedEdge:Ce,onClose:()=>B(!1),onUpdateNode:ze,onUpdateEdge:Te,propertiesTab:Q,onTabChange:ee})]})]}),_&&(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,To.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:["saving"===N&&(0,To.jsxs)(To.Fragment,{children:[(0,To.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),(0,To.jsx)("p",{className:"text-gray-700",children:"Creando propuesta..."})]}),"saved"===N&&(0,To.jsxs)(To.Fragment,{children:[(0,To.jsx)("div",{className:"text-green-500",children:(0,To.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,To.jsx)("p",{className:"text-gray-700",children:"\xa1Propuesta creada exitosamente!"})]}),"error"===N&&(0,To.jsxs)(To.Fragment,{children:[(0,To.jsx)("div",{className:"text-red-500",children:(0,To.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,To.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,To.jsx)("p",{className:"text-gray-700",children:"Error al crear propuesta"})]})]}),"idle"===N&&(0,To.jsxs)("div",{className:"mt-4",children:[(0,To.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n de la propuesta:"}),(0,To.jsx)("textarea",{value:L,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Describe los cambios que propones..."}),(0,To.jsxs)("div",{className:"mt-4 flex space-x-3",children:[(0,To.jsx)("button",{onClick:()=>E(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,To.jsx)("button",{onClick:Re,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Crear Propuesta"})]})]})]})}),M&&(0,To.jsx)(tm,{proposal:M,onVote:Ae,onClose:()=>R(null)}),O&&(0,To.jsx)(om,{nodes:p,edges:g,roadmapInfo:l,onClose:()=>z(!1)}),Y&&(0,To.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,To.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-lg mx-4",children:[(0,To.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Editar Roadmap"}),(0,To.jsxs)("div",{className:"space-y-4",children:[(0,To.jsxs)("div",{children:[(0,To.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xedtulo"}),(0,To.jsx)("input",{type:"text",value:X,onChange:e=>G(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nuevo t\xedtulo..."})]}),(0,To.jsxs)("div",{children:[(0,To.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,To.jsx)("textarea",{value:J,onChange:e=>Z(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Nueva descripci\xf3n..."})]})]}),(0,To.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,To.jsx)("button",{onClick:()=>K(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,To.jsx)("button",{onClick:()=>{l.title=X,l.description=J,K(!1)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Guardar Cambios"})]})]})}),cm&&(0,To.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,To.jsxs)("div",{className:"bg-yellow-500 text-white text-xs px-2 py-1 rounded-full shadow-lg opacity-75 hover:opacity-100 transition-opacity",children:[(0,To.jsx)("span",{className:"w-1.5 h-1.5 bg-white rounded-full inline-block mr-1"}),"DEV"]})}),j&&n&&(0,To.jsx)("div",{className:"fixed bottom-4 left-4 z-50",children:(0,To.jsx)("div",{className:"bg-blue-500 text-white text-xs px-3 py-2 rounded-lg shadow-lg opacity-90 hover:opacity-100 transition-opacity",children:(0,To.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,To.jsx)("div",{className:"animate-pulse w-2 h-2 bg-white rounded-full"}),(0,To.jsx)("span",{children:"Guardando autom\xe1ticamente..."})]})})})]})},ym=Zp;function bm(e){let{children:t}=e;const n=ne(),{user:r,loading:o}=Lo();return ym?(0,To.jsx)("div",{className:"min-h-screen bg-gray-50",children:t}):o?(0,To.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,To.jsx)("p",{className:"text-gray-600",children:"Cargando..."})]})}):r?(0,To.jsx)("div",{className:"min-h-screen bg-gray-50",children:t}):(0,To.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acceso Requerido"}),(0,To.jsx)("p",{className:"text-gray-600 mb-6",children:"Debes iniciar sesi\xf3n para acceder al editor de roadmaps."}),(0,To.jsx)("button",{onClick:()=>n("/"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Volver al Inicio"})]})})}const wm=()=>{const{roadmapType:e,versionId:t}=re(),n=ne(),[o,a]=(0,r.useState)(null),[i,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{d()},[t]);const d=async()=>{try{s(!0),console.log("Cargando versi\xf3n con ID:",t);const{data:e,error:n}=await Qr.from("roadmap_versions").select("*").eq("id",t).eq("is_public",!0).single();if(console.log("Consulta ejecutada, resultado:",{versionData:e,error:n}),n)throw n;console.log("RoadmapVersionPage - versionData:",e),console.log("RoadmapVersionPage - nodes:",e.nodes),console.log("RoadmapVersionPage - edges:",e.edges),a(e)}catch(l){console.error("Error loading version:",l),c("No se pudo cargar la versi\xf3n del roadmap")}finally{s(!1)}};return i?(0,To.jsx)("div",{className:"w-full h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,To.jsx)("p",{className:"text-gray-600",children:"Cargando versi\xf3n..."})]})}):l||!o?(0,To.jsx)("div",{className:"w-full h-screen bg-gray-50 flex items-center justify-center",children:(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Versi\xf3n no encontrada"}),(0,To.jsx)("p",{className:"text-gray-600 mb-6",children:l||"La versi\xf3n solicitada no existe o no es p\xfablica."}),(0,To.jsx)("button",{onClick:()=>n(`/roadmap/${e}`),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Volver al Roadmap"})]})}):(0,To.jsxs)(Tp,{title:`${e.charAt(0).toUpperCase()+e.slice(1)} - Versi\xf3n de Usuario`,description:`Versi\xf3n editada el ${new Date(o.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}`,icon:"\ud83d\udcca",children:[(0,To.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,To.jsxs)("div",{className:"flex items-center justify-between",children:[(0,To.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,To.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,To.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"U"})}),(0,To.jsxs)("div",{children:[(0,To.jsx)("p",{className:"font-medium text-gray-900",children:"Versi\xf3n por Usuario"}),(0,To.jsx)("p",{className:"text-sm text-gray-600",children:new Date(o.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,To.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsx)("div",{className:"text-lg font-bold text-gray-900",children:o.total_votes||0}),(0,To.jsx)("div",{className:"text-xs text-gray-500",children:"votos"})]}),(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsxs)("div",{className:"text-sm font-medium text-green-600",children:["+",o.up_votes||0]}),(0,To.jsx)("div",{className:"text-xs text-gray-500",children:"positivos"})]}),(0,To.jsxs)("div",{className:"text-center",children:[(0,To.jsxs)("div",{className:"text-sm font-medium text-red-600",children:["-",o.down_votes||0]}),(0,To.jsx)("div",{className:"text-xs text-gray-500",children:"negativos"})]})]})]}),o.description&&(0,To.jsx)("p",{className:"text-gray-700 mt-3 text-sm",children:o.description})]}),(0,To.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[console.log("Renderizando GraphLayout con:",{roadmapType:e,customNodes:o.nodes,customEdges:o.edges}),(0,To.jsx)(Pp,{roadmapType:e,customNodes:o.nodes,customEdges:o.edges,readOnly:!0})]}),(0,To.jsx)("div",{className:"mt-6 text-center",children:(0,To.jsx)("button",{onClick:()=>n(`/roadmap/${e}`),className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Volver al Roadmap Original"})})]})};function km(e){let{children:t}=e;return(0,To.jsxs)(To.Fragment,{children:[(0,To.jsx)(aa,{}),t,(0,To.jsx)(Op,{})]})}const jm=function(){return(0,To.jsx)(nt,{children:(0,To.jsxs)(be,{children:[(0,To.jsx)(xe,{path:"/edit/:roadmapType",element:(0,To.jsx)(bm,{children:(0,To.jsx)(xm,{})})}),(0,To.jsx)(xe,{path:"/roadmap/:roadmapType/version/:versionId",element:(0,To.jsx)(wm,{})}),(0,To.jsx)(xe,{path:"/",element:(0,To.jsxs)(km,{children:[(0,To.jsx)(ia,{}),(0,To.jsx)(ca,{}),(0,To.jsx)(sa,{})]})}),(0,To.jsx)(xe,{path:"/termodinamica",element:(0,To.jsx)(km,{children:(0,To.jsx)(Mp,{})})}),(0,To.jsx)(xe,{path:"/roadmap/:roadmapType",element:(0,To.jsx)(km,{children:(0,To.jsx)(zp,{})})}),(0,To.jsx)(xe,{path:"/graph",element:(0,To.jsx)(km,{children:(0,To.jsx)(Pp,{})})}),(0,To.jsx)(xe,{path:"/create",element:(0,To.jsx)(km,{children:(0,To.jsx)(Kp,{})})}),(0,To.jsx)(xe,{path:"/my-roadmaps",element:(0,To.jsx)(km,{children:(0,To.jsx)(Xp,{})})}),(0,To.jsx)(xe,{path:"/privacy",element:(0,To.jsx)(km,{children:(0,To.jsx)(Gp,{})})}),(0,To.jsx)(xe,{path:"/privacidad",element:(0,To.jsx)(km,{children:(0,To.jsx)(Gp,{})})}),(0,To.jsx)(xe,{path:"/auth/callback",element:(0,To.jsx)(Jp,{})})]})})};(0,o.H)(document.getElementById("root")).render((0,To.jsx)(r.StrictMode,{children:(0,To.jsx)(Ro,{children:(0,To.jsx)(jm,{})})}))})();
//# sourceMappingURL=main.b4561c16.js.map